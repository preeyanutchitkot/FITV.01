{"ast":null,"code":"var _jsxFileName = \"C:\\\\Fit\\\\frontend\\\\src\\\\components\\\\RealKeypoints.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RealKeypoints = ({\n  videoRef,\n  isPlaying,\n  onKeypointsDetected\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  const [pose, setPose] = useState(null);\n\n  // MediaPipe Pose connections (33 landmarks)\n  const POSE_CONNECTIONS = [\n  // Face\n  [0, 1], [1, 2], [2, 3], [3, 7], [0, 4], [4, 5], [5, 6], [6, 8],\n  // Arms\n  [9, 10], [11, 12], [11, 13], [13, 15], [15, 17], [15, 19], [15, 21], [17, 19], [12, 14], [14, 16], [16, 18], [16, 20], [16, 22], [18, 20],\n  // Body\n  [11, 23], [12, 24], [23, 24],\n  // Legs\n  [23, 25], [24, 26], [25, 27], [26, 28], [27, 29], [28, 30], [29, 31], [30, 32], [27, 31], [28, 32]];\n\n  // ‡πÉ‡∏ä‡πâ MediaPipe ‡∏à‡∏≤‡∏Å local packages ‡πÅ‡∏ó‡∏ô CDN ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢ CORS issues\n  useEffect(() => {\n    const initializeMediaPipe = async () => {\n      try {\n        console.log('üîÑ Loading MediaPipe...');\n\n        // ‡πÉ‡∏ä‡πâ dynamic import ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î MediaPipe ‡∏à‡∏≤‡∏Å node_modules\n        const {\n          Pose\n        } = await import('@mediapipe/pose');\n        console.log('üì¶ Creating Pose instance...');\n        const poseInstance = new Pose({\n          locateFile: file => {\n            // ‡πÉ‡∏ä‡πâ path ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å node_modules\n            return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\n          }\n        });\n        console.log('‚öôÔ∏è Setting Pose options...');\n        await poseInstance.setOptions({\n          modelComplexity: 1,\n          smoothLandmarks: true,\n          enableSegmentation: false,\n          smoothSegmentation: true,\n          minDetectionConfidence: 0.5,\n          minTrackingConfidence: 0.5\n        });\n        console.log('üéØ Setting onResults callback...');\n        poseInstance.onResults(onResults);\n        setPose(poseInstance);\n        setIsReady(true);\n        console.log('‚úÖ MediaPipe Pose loaded successfully!');\n      } catch (error) {\n        console.error('‚ùå Failed to load MediaPipe:', error);\n        console.log('üîÑ Trying alternative loading method...');\n\n        // ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ‡πÉ‡∏ä‡πâ script loading ‡πÅ‡∏ö‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤\n        try {\n          await loadMediaPipeScripts();\n        } catch (scriptError) {\n          console.error('‚ùå Script loading also failed:', scriptError);\n        }\n      }\n    };\n    const loadMediaPipeScripts = async () => {\n      // ‡πÇ‡∏´‡∏•‡∏î MediaPipe scripts ‡πÅ‡∏ö‡∏ö sequential ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤\n      const scripts = ['https://unpkg.com/@mediapipe/camera_utils/camera_utils.js', 'https://unpkg.com/@mediapipe/control_utils/control_utils.js', 'https://unpkg.com/@mediapipe/drawing_utils/drawing_utils.js', 'https://unpkg.com/@mediapipe/pose/pose.js'];\n      for (const src of scripts) {\n        await loadScript(src);\n        console.log(`‚úÖ Loaded: ${src}`);\n      }\n\n      // ‡∏£‡∏≠‡πÉ‡∏´‡πâ MediaPipe ‡∏û‡∏£‡πâ‡∏≠‡∏°\n      let attempts = 0;\n      while (!window.Pose && attempts < 30) {\n        await new Promise(resolve => setTimeout(resolve, 200));\n        attempts++;\n      }\n      if (window.Pose) {\n        const poseInstance = new window.Pose({\n          locateFile: file => {\n            return `https://unpkg.com/@mediapipe/pose/${file}`;\n          }\n        });\n        await poseInstance.setOptions({\n          modelComplexity: 1,\n          smoothLandmarks: true,\n          enableSegmentation: false,\n          smoothSegmentation: true,\n          minDetectionConfidence: 0.5,\n          minTrackingConfidence: 0.5\n        });\n        poseInstance.onResults(onResults);\n        setPose(poseInstance);\n        setIsReady(true);\n        console.log('‚úÖ MediaPipe loaded via scripts!');\n      }\n    };\n    const loadScript = src => {\n      return new Promise((resolve, reject) => {\n        if (document.querySelector(`script[src=\"${src}\"]`)) {\n          resolve();\n          return;\n        }\n        const script = document.createElement('script');\n        script.src = src;\n        script.crossOrigin = 'anonymous';\n        script.onload = () => {\n          resolve();\n        };\n        script.onerror = error => {\n          reject(error);\n        };\n        document.head.appendChild(script);\n      });\n    };\n    initializeMediaPipe();\n  }, []);\n\n  // MediaPipe onResults callback\n  const onResults = results => {\n    console.log('üì∏ MediaPipe results:', results);\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    if (!canvas || !video) {\n      console.log('‚ùå Missing canvas or video');\n      return;\n    }\n    if (!results.poseLandmarks) {\n      console.log('‚ö†Ô∏è No pose landmarks detected');\n      return;\n    }\n    console.log('‚úÖ Drawing pose with', results.poseLandmarks.length, 'landmarks');\n    drawPoseMediaPipe(results.poseLandmarks, canvas, video);\n    if (onKeypointsDetected) {\n      onKeypointsDetected(results.poseLandmarks);\n    }\n  };\n  const drawPoseMediaPipe = (landmarks, canvas, video) => {\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Get actual video dimensions and display dimensions\n    const videoRect = video.getBoundingClientRect();\n    const videoWidth = video.videoWidth;\n    const videoHeight = video.videoHeight;\n    const displayWidth = videoRect.width;\n    const displayHeight = videoRect.height;\n\n    // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î canvas\n    if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\n      canvas.width = displayWidth;\n      canvas.height = displayHeight;\n    }\n\n    // Calculate aspect ratios\n    const videoAspect = videoWidth / videoHeight;\n    const displayAspect = displayWidth / displayHeight;\n\n    // Calculate actual video display area within the video element\n    let actualVideoWidth,\n      actualVideoHeight,\n      offsetX = 0,\n      offsetY = 0;\n    if (videoAspect > displayAspect) {\n      // Video is wider - letterboxed top/bottom\n      actualVideoWidth = displayWidth;\n      actualVideoHeight = displayWidth / videoAspect;\n      offsetY = (displayHeight - actualVideoHeight) / 2;\n    } else {\n      // Video is taller - letterboxed left/right\n      actualVideoHeight = displayHeight;\n      actualVideoWidth = displayHeight * videoAspect;\n      offsetX = (displayWidth - actualVideoWidth) / 2;\n    }\n\n    // MediaPipe landmarks are normalized (0-1), scale to actual video area\n    const scaleX = actualVideoWidth;\n    const scaleY = actualVideoHeight;\n\n    // Draw skeleton connections\n    POSE_CONNECTIONS.forEach(([i, j]) => {\n      const kp1 = landmarks[i];\n      const kp2 = landmarks[j];\n      if (kp1 && kp2 && kp1.visibility > 0.5 && kp2.visibility > 0.5) {\n        ctx.beginPath();\n        // Mirror x-coordinates to match the mirrored video (scaleX(-1) in CSS)\n        const x1 = actualVideoWidth - kp1.x * scaleX + offsetX;\n        const y1 = kp1.y * scaleY + offsetY;\n        const x2 = actualVideoWidth - kp2.x * scaleX + offsetX;\n        const y2 = kp2.y * scaleY + offsetY;\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.strokeStyle = '#00FF00';\n        ctx.lineWidth = 2;\n        ctx.stroke();\n      }\n    });\n\n    // Draw keypoints with different colors\n    landmarks.forEach((landmark, index) => {\n      if (landmark && landmark.visibility > 0.5) {\n        // Mirror x-coordinates to match the mirrored video (scaleX(-1) in CSS)\n        const x = actualVideoWidth - landmark.x * scaleX + offsetX;\n        const y = landmark.y * scaleY + offsetY;\n        ctx.beginPath();\n        ctx.arc(x, y, 3, 0, 2 * Math.PI);\n\n        // Different colors for different body parts\n        if (index <= 10) {\n          ctx.fillStyle = '#FF6B6B'; // Face and upper body\n        } else if (index <= 16) {\n          ctx.fillStyle = '#4ECDC4'; // Arms\n        } else if (index <= 22) {\n          ctx.fillStyle = '#45B7D1'; // Hands\n        } else {\n          ctx.fillStyle = '#96CEB4'; // Legs and body\n        }\n        ctx.fill();\n\n        // Add white border for better visibility\n        ctx.beginPath();\n        ctx.arc(x, y, 3, 0, 2 * Math.PI);\n        ctx.strokeStyle = '#FFFFFF';\n        ctx.lineWidth = 1;\n        ctx.stroke();\n      }\n    });\n  };\n  useEffect(() => {\n    console.log('Processing effect:', {\n      isReady,\n      hasPose: !!pose,\n      hasVideo: !!(videoRef !== null && videoRef !== void 0 && videoRef.current),\n      hasCanvas: !!canvasRef.current,\n      isPlaying\n    });\n    if (!isReady || !pose || !(videoRef !== null && videoRef !== void 0 && videoRef.current) || !canvasRef.current) {\n      console.log('Not ready for processing yet');\n      return;\n    }\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    console.log('Video properties:', {\n      videoWidth: video.videoWidth,\n      videoHeight: video.videoHeight,\n      readyState: video.readyState,\n      currentSrc: video.currentSrc || 'webcam'\n    });\n    const processFrame = async () => {\n      if (video.paused || video.ended || !isPlaying) {\n        console.log('Video not playing, skipping frame');\n        return;\n      }\n      try {\n        // Match canvas size to video element's display size exactly\n        const rect = video.getBoundingClientRect();\n        if (canvas.width !== rect.width || canvas.height !== rect.height) {\n          canvas.width = rect.width;\n          canvas.height = rect.height;\n          console.log('Canvas resized to:', rect.width, 'x', rect.height);\n        }\n\n        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n        if (video.readyState >= 2) {\n          console.log('Sending frame to MediaPipe...');\n          await pose.send({\n            image: video\n          });\n        } else {\n          console.log('Video not ready, readyState:', video.readyState);\n        }\n      } catch (error) {\n        console.error('Pose detection error:', error);\n      }\n      if (isPlaying && !video.paused && !video.ended) {\n        requestAnimationFrame(processFrame);\n      }\n    };\n    if (isPlaying) {\n      if (video.readyState >= 2) {\n        processFrame();\n      } else {\n        video.addEventListener('loadeddata', processFrame, {\n          once: true\n        });\n      }\n    }\n\n    // Clean up canvas when not playing\n    if (!isPlaying) {\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n  }, [isPlaying, isReady, pose]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      pointerEvents: 'none',\n      zIndex: 10\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 328,\n    columnNumber: 5\n  }, this);\n};\n_s(RealKeypoints, \"GWl8/6V6iP9xDmNZtvbW4679Hbc=\");\n_c = RealKeypoints;\nexport default RealKeypoints;\nvar _c;\n$RefreshReg$(_c, \"RealKeypoints\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","RealKeypoints","videoRef","isPlaying","onKeypointsDetected","_s","canvasRef","isReady","setIsReady","pose","setPose","POSE_CONNECTIONS","initializeMediaPipe","console","log","Pose","poseInstance","locateFile","file","setOptions","modelComplexity","smoothLandmarks","enableSegmentation","smoothSegmentation","minDetectionConfidence","minTrackingConfidence","onResults","error","loadMediaPipeScripts","scriptError","scripts","src","loadScript","attempts","window","Promise","resolve","setTimeout","reject","document","querySelector","script","createElement","crossOrigin","onload","onerror","head","appendChild","results","canvas","current","video","poseLandmarks","length","drawPoseMediaPipe","landmarks","ctx","getContext","clearRect","width","height","videoRect","getBoundingClientRect","videoWidth","videoHeight","displayWidth","displayHeight","videoAspect","displayAspect","actualVideoWidth","actualVideoHeight","offsetX","offsetY","scaleX","scaleY","forEach","i","j","kp1","kp2","visibility","beginPath","x1","x","y1","y","x2","y2","moveTo","lineTo","strokeStyle","lineWidth","stroke","landmark","index","arc","Math","PI","fillStyle","fill","hasPose","hasVideo","hasCanvas","readyState","currentSrc","processFrame","paused","ended","rect","send","image","requestAnimationFrame","addEventListener","once","ref","style","position","top","left","pointerEvents","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Fit/frontend/src/components/RealKeypoints.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\n\r\nconst RealKeypoints = ({ videoRef, isPlaying, onKeypointsDetected }) => {\r\n  const canvasRef = useRef(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [pose, setPose] = useState(null);\r\n\r\n  // MediaPipe Pose connections (33 landmarks)\r\n  const POSE_CONNECTIONS = [\r\n    // Face\r\n    [0, 1], [1, 2], [2, 3], [3, 7], [0, 4], [4, 5], [5, 6], [6, 8],\r\n    // Arms\r\n    [9, 10], [11, 12], [11, 13], [13, 15], [15, 17], [15, 19], [15, 21], [17, 19],\r\n    [12, 14], [14, 16], [16, 18], [16, 20], [16, 22], [18, 20],\r\n    // Body\r\n    [11, 23], [12, 24], [23, 24],\r\n    // Legs\r\n    [23, 25], [24, 26], [25, 27], [26, 28], [27, 29], [28, 30], [29, 31], [30, 32], [27, 31], [28, 32]\r\n  ];\r\n\r\n  // ‡πÉ‡∏ä‡πâ MediaPipe ‡∏à‡∏≤‡∏Å local packages ‡πÅ‡∏ó‡∏ô CDN ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢ CORS issues\r\n  useEffect(() => {\r\n    const initializeMediaPipe = async () => {\r\n      try {\r\n        console.log('üîÑ Loading MediaPipe...');\r\n        \r\n        // ‡πÉ‡∏ä‡πâ dynamic import ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î MediaPipe ‡∏à‡∏≤‡∏Å node_modules\r\n        const { Pose } = await import('@mediapipe/pose');\r\n        \r\n        console.log('üì¶ Creating Pose instance...');\r\n        const poseInstance = new Pose({\r\n          locateFile: (file) => {\r\n            // ‡πÉ‡∏ä‡πâ path ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å node_modules\r\n            return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\r\n          }\r\n        });\r\n\r\n        console.log('‚öôÔ∏è Setting Pose options...');\r\n        await poseInstance.setOptions({\r\n          modelComplexity: 1,\r\n          smoothLandmarks: true,\r\n          enableSegmentation: false,\r\n          smoothSegmentation: true,\r\n          minDetectionConfidence: 0.5,\r\n          minTrackingConfidence: 0.5\r\n        });\r\n\r\n        console.log('üéØ Setting onResults callback...');\r\n        poseInstance.onResults(onResults);\r\n\r\n        setPose(poseInstance);\r\n        setIsReady(true);\r\n        console.log('‚úÖ MediaPipe Pose loaded successfully!');\r\n\r\n      } catch (error) {\r\n        console.error('‚ùå Failed to load MediaPipe:', error);\r\n        console.log('üîÑ Trying alternative loading method...');\r\n        \r\n        // ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ‡πÉ‡∏ä‡πâ script loading ‡πÅ‡∏ö‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤\r\n        try {\r\n          await loadMediaPipeScripts();\r\n        } catch (scriptError) {\r\n          console.error('‚ùå Script loading also failed:', scriptError);\r\n        }\r\n      }\r\n    };\r\n\r\n    const loadMediaPipeScripts = async () => {\r\n      // ‡πÇ‡∏´‡∏•‡∏î MediaPipe scripts ‡πÅ‡∏ö‡∏ö sequential ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤\r\n      const scripts = [\r\n        'https://unpkg.com/@mediapipe/camera_utils/camera_utils.js',\r\n        'https://unpkg.com/@mediapipe/control_utils/control_utils.js', \r\n        'https://unpkg.com/@mediapipe/drawing_utils/drawing_utils.js',\r\n        'https://unpkg.com/@mediapipe/pose/pose.js'\r\n      ];\r\n\r\n      for (const src of scripts) {\r\n        await loadScript(src);\r\n        console.log(`‚úÖ Loaded: ${src}`);\r\n      }\r\n\r\n      // ‡∏£‡∏≠‡πÉ‡∏´‡πâ MediaPipe ‡∏û‡∏£‡πâ‡∏≠‡∏°\r\n      let attempts = 0;\r\n      while (!window.Pose && attempts < 30) {\r\n        await new Promise(resolve => setTimeout(resolve, 200));\r\n        attempts++;\r\n      }\r\n\r\n      if (window.Pose) {\r\n        const poseInstance = new window.Pose({\r\n          locateFile: (file) => {\r\n            return `https://unpkg.com/@mediapipe/pose/${file}`;\r\n          }\r\n        });\r\n\r\n        await poseInstance.setOptions({\r\n          modelComplexity: 1,\r\n          smoothLandmarks: true,\r\n          enableSegmentation: false,\r\n          smoothSegmentation: true,\r\n          minDetectionConfidence: 0.5,\r\n          minTrackingConfidence: 0.5\r\n        });\r\n\r\n        poseInstance.onResults(onResults);\r\n        setPose(poseInstance);\r\n        setIsReady(true);\r\n        console.log('‚úÖ MediaPipe loaded via scripts!');\r\n      }\r\n    };\r\n\r\n    const loadScript = (src) => {\r\n      return new Promise((resolve, reject) => {\r\n        if (document.querySelector(`script[src=\"${src}\"]`)) {\r\n          resolve();\r\n          return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.src = src;\r\n        script.crossOrigin = 'anonymous';\r\n        \r\n        script.onload = () => {\r\n          resolve();\r\n        };\r\n        \r\n        script.onerror = (error) => {\r\n          reject(error);\r\n        };\r\n        \r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    initializeMediaPipe();\r\n  }, []);\r\n\r\n  // MediaPipe onResults callback\r\n  const onResults = (results) => {\r\n    console.log('üì∏ MediaPipe results:', results);\r\n    \r\n    const canvas = canvasRef.current;\r\n    const video = videoRef.current;\r\n    \r\n    if (!canvas || !video) {\r\n      console.log('‚ùå Missing canvas or video');\r\n      return;\r\n    }\r\n    \r\n    if (!results.poseLandmarks) {\r\n      console.log('‚ö†Ô∏è No pose landmarks detected');\r\n      return;\r\n    }\r\n\r\n    console.log('‚úÖ Drawing pose with', results.poseLandmarks.length, 'landmarks');\r\n    drawPoseMediaPipe(results.poseLandmarks, canvas, video);\r\n    \r\n    if (onKeypointsDetected) {\r\n      onKeypointsDetected(results.poseLandmarks);\r\n    }\r\n  };\r\n\r\n  const drawPoseMediaPipe = (landmarks, canvas, video) => {\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    // Get actual video dimensions and display dimensions\r\n    const videoRect = video.getBoundingClientRect();\r\n    const videoWidth = video.videoWidth;\r\n    const videoHeight = video.videoHeight;\r\n    const displayWidth = videoRect.width;\r\n    const displayHeight = videoRect.height;\r\n\r\n    // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î canvas\r\n    if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\r\n      canvas.width = displayWidth;\r\n      canvas.height = displayHeight;\r\n    }\r\n\r\n    // Calculate aspect ratios\r\n    const videoAspect = videoWidth / videoHeight;\r\n    const displayAspect = displayWidth / displayHeight;\r\n\r\n    // Calculate actual video display area within the video element\r\n    let actualVideoWidth, actualVideoHeight, offsetX = 0, offsetY = 0;\r\n\r\n    if (videoAspect > displayAspect) {\r\n      // Video is wider - letterboxed top/bottom\r\n      actualVideoWidth = displayWidth;\r\n      actualVideoHeight = displayWidth / videoAspect;\r\n      offsetY = (displayHeight - actualVideoHeight) / 2;\r\n    } else {\r\n      // Video is taller - letterboxed left/right\r\n      actualVideoHeight = displayHeight;\r\n      actualVideoWidth = displayHeight * videoAspect;\r\n      offsetX = (displayWidth - actualVideoWidth) / 2;\r\n    }\r\n\r\n    // MediaPipe landmarks are normalized (0-1), scale to actual video area\r\n    const scaleX = actualVideoWidth;\r\n    const scaleY = actualVideoHeight;\r\n\r\n    // Draw skeleton connections\r\n    POSE_CONNECTIONS.forEach(([i, j]) => {\r\n      const kp1 = landmarks[i];\r\n      const kp2 = landmarks[j];\r\n      \r\n      if (kp1 && kp2 && kp1.visibility > 0.5 && kp2.visibility > 0.5) {\r\n        ctx.beginPath();\r\n        // Mirror x-coordinates to match the mirrored video (scaleX(-1) in CSS)\r\n        const x1 = actualVideoWidth - (kp1.x * scaleX) + offsetX;\r\n        const y1 = kp1.y * scaleY + offsetY;\r\n        const x2 = actualVideoWidth - (kp2.x * scaleX) + offsetX;\r\n        const y2 = kp2.y * scaleY + offsetY;\r\n        \r\n        ctx.moveTo(x1, y1);\r\n        ctx.lineTo(x2, y2);\r\n        ctx.strokeStyle = '#00FF00';\r\n        ctx.lineWidth = 2;\r\n        ctx.stroke();\r\n      }\r\n    });\r\n\r\n    // Draw keypoints with different colors\r\n    landmarks.forEach((landmark, index) => {\r\n      if (landmark && landmark.visibility > 0.5) {\r\n        // Mirror x-coordinates to match the mirrored video (scaleX(-1) in CSS)\r\n        const x = actualVideoWidth - (landmark.x * scaleX) + offsetX;\r\n        const y = landmark.y * scaleY + offsetY;\r\n        \r\n        ctx.beginPath();\r\n        ctx.arc(x, y, 3, 0, 2 * Math.PI);\r\n        \r\n        // Different colors for different body parts\r\n        if (index <= 10) {\r\n          ctx.fillStyle = '#FF6B6B'; // Face and upper body\r\n        } else if (index <= 16) {\r\n          ctx.fillStyle = '#4ECDC4'; // Arms\r\n        } else if (index <= 22) {\r\n          ctx.fillStyle = '#45B7D1'; // Hands\r\n        } else {\r\n          ctx.fillStyle = '#96CEB4'; // Legs and body\r\n        }\r\n        \r\n        ctx.fill();\r\n        \r\n        // Add white border for better visibility\r\n        ctx.beginPath();\r\n        ctx.arc(x, y, 3, 0, 2 * Math.PI);\r\n        ctx.strokeStyle = '#FFFFFF';\r\n        ctx.lineWidth = 1;\r\n        ctx.stroke();\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('Processing effect:', { \r\n      isReady, \r\n      hasPose: !!pose, \r\n      hasVideo: !!videoRef?.current, \r\n      hasCanvas: !!canvasRef.current,\r\n      isPlaying \r\n    });\r\n    \r\n    if (!isReady || !pose || !videoRef?.current || !canvasRef.current) {\r\n      console.log('Not ready for processing yet');\r\n      return;\r\n    }\r\n\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    \r\n    console.log('Video properties:', {\r\n      videoWidth: video.videoWidth,\r\n      videoHeight: video.videoHeight,\r\n      readyState: video.readyState,\r\n      currentSrc: video.currentSrc || 'webcam'\r\n    });\r\n    \r\n    const processFrame = async () => {\r\n      if (video.paused || video.ended || !isPlaying) {\r\n        console.log('Video not playing, skipping frame');\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        // Match canvas size to video element's display size exactly\r\n        const rect = video.getBoundingClientRect();\r\n        if (canvas.width !== rect.width || canvas.height !== rect.height) {\r\n          canvas.width = rect.width;\r\n          canvas.height = rect.height;\r\n          console.log('Canvas resized to:', rect.width, 'x', rect.height);\r\n        }\r\n        \r\n        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\r\n        if (video.readyState >= 2) {\r\n          console.log('Sending frame to MediaPipe...');\r\n          await pose.send({ image: video });\r\n        } else {\r\n          console.log('Video not ready, readyState:', video.readyState);\r\n        }\r\n      } catch (error) {\r\n        console.error('Pose detection error:', error);\r\n      }\r\n\r\n      if (isPlaying && !video.paused && !video.ended) {\r\n        requestAnimationFrame(processFrame);\r\n      }\r\n    };\r\n\r\n    if (isPlaying) {\r\n      if (video.readyState >= 2) {\r\n        processFrame();\r\n      } else {\r\n        video.addEventListener('loadeddata', processFrame, { once: true });\r\n      }\r\n    }\r\n\r\n    // Clean up canvas when not playing\r\n    if (!isPlaying) {\r\n      const ctx = canvas.getContext('2d');\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n  }, [isPlaying, isReady, pose]);\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      style={{\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        pointerEvents: 'none',\r\n        zIndex: 10\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default RealKeypoints;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}