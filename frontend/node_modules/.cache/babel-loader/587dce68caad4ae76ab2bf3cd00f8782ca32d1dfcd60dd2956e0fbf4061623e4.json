{"ast":null,"code":"// KeypointsService.js - Service ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ keypoints ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö pose\n\nclass KeypointsService {\n  constructor(baseURL = 'http://localhost:8000') {\n    this.baseURL = baseURL;\n  }\n\n  // ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î keypoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö video segment\n  async uploadKeypoints(videoId, segmentId, keypointsData) {\n    try {\n      const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/upload`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          keypoints_data: keypointsData\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error uploading keypoints:', error);\n      throw error;\n    }\n  }\n\n  // ‡πÇ‡∏´‡∏•‡∏î keypoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö video segment\n  async loadKeypoints(videoId, segmentId) {\n    try {\n      const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/load`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error loading keypoints:', error);\n      throw error;\n    }\n  }\n\n  // üéØ Core Function: ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö keypoints ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á trainer ‡πÅ‡∏•‡∏∞ trainee ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå\n  calculatePoseAccuracy(trainerPose, traineePose) {\n    if (!trainerPose || !traineePose || trainerPose.length !== traineePose.length) {\n      return {\n        accuracy: 0,\n        feedback: this.generateFeedback(0)\n      };\n    }\n\n    // ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ visibility > 0.5\n    const validPairs = [];\n    for (let i = 0; i < trainerPose.length; i++) {\n      if (trainerPose[i].visibility > 0.5 && traineePose[i].visibility > 0.5) {\n        validPairs.push({\n          trainer: trainerPose[i],\n          trainee: traineePose[i]\n        });\n      }\n    }\n    if (validPairs.length === 0) {\n      return {\n        accuracy: 0,\n        feedback: this.generateFeedback(0)\n      };\n    }\n\n    // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: Cosine Similarity (40%)\n    const cosineSim = this.calculateCosineSimilarity(trainerPose, traineePose);\n\n    // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: Angle Similarity ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (60%)\n    const angleSim = this.calculateAngleSimilarity(trainerPose, traineePose);\n\n    // ‡∏£‡∏ß‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ (60% angle + 40% cosine)\n    const finalScore = Math.round(angleSim * 0.6 + cosineSim * 0.4);\n    const accuracy = Math.max(0, Math.min(100, finalScore));\n\n    // ‡∏™‡∏£‡πâ‡∏≤‡∏á feedback\n    const feedback = this.generateFeedback(accuracy);\n    return {\n      accuracy,\n      feedback\n    };\n  }\n\n  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Cosine Similarity\n  calculateCosineSimilarity(trainerPose, traineePose) {\n    const flatten = pose => pose.flatMap(p => [p.x, p.y]);\n    const trainerVector = flatten(trainerPose);\n    const traineeVector = flatten(traineePose);\n    let dot = 0,\n      normA = 0,\n      normB = 0;\n    for (let i = 0; i < trainerVector.length; i++) {\n      dot += trainerVector[i] * traineeVector[i];\n      normA += trainerVector[i] ** 2;\n      normB += traineeVector[i] ** 2;\n    }\n    if (normA === 0 || normB === 0) return 0;\n    const similarity = dot / (Math.sqrt(normA) * Math.sqrt(normB));\n    return Math.round(similarity * 100);\n  }\n\n  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Angle Similarity ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç\n  calculateAngleSimilarity(trainerPose, traineePose) {\n    // ‡∏à‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç [‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà1, ‡∏à‡∏∏‡∏î‡∏Å‡∏•‡∏≤‡∏á, ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà3]\n    const joints = [[11, 13, 15],\n    // ‡πÅ‡∏Ç‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ (‡πÑ‡∏´‡∏•‡πà-‡∏®‡∏≠‡∏Å-‡∏Ç‡πâ‡∏≠‡∏°‡∏∑‡∏≠)\n    [12, 14, 16],\n    // ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏ß‡∏≤ (‡πÑ‡∏´‡∏•‡πà-‡∏®‡∏≠‡∏Å-‡∏Ç‡πâ‡∏≠‡∏°‡∏∑‡∏≠)\n    [23, 25, 27],\n    // ‡∏Ç‡∏≤‡∏ã‡πâ‡∏≤‡∏¢ (‡∏™‡∏∞‡πÇ‡∏û‡∏Å-‡πÄ‡∏Ç‡πà‡∏≤-‡∏Ç‡πâ‡∏≠‡πÄ‡∏ó‡πâ‡∏≤)\n    [24, 26, 28],\n    // ‡∏Ç‡∏≤‡∏Ç‡∏ß‡∏≤ (‡∏™‡∏∞‡πÇ‡∏û‡∏Å-‡πÄ‡∏Ç‡πà‡∏≤-‡∏Ç‡πâ‡∏≠‡πÄ‡∏ó‡πâ‡∏≤)\n    [11, 23, 25],\n    // ‡∏•‡∏≥‡∏ï‡∏±‡∏ß‡∏ã‡πâ‡∏≤‡∏¢ (‡πÑ‡∏´‡∏•‡πà-‡∏™‡∏∞‡πÇ‡∏û‡∏Å-‡πÄ‡∏Ç‡πà‡∏≤)\n    [12, 24, 26] // ‡∏•‡∏≥‡∏ï‡∏±‡∏ß‡∏Ç‡∏ß‡∏≤ (‡πÑ‡∏´‡∏•‡πà-‡∏™‡∏∞‡πÇ‡∏û‡∏Å-‡πÄ‡∏Ç‡πà‡∏≤)\n    ];\n    let totalDiff = 0;\n    let validJoints = 0;\n    joints.forEach(([a, b, c]) => {\n      if (this.isValidJoint(trainerPose, a, b, c) && this.isValidJoint(traineePose, a, b, c)) {\n        const trainerAngle = this.calculateAngle(trainerPose[a], trainerPose[b], trainerPose[c]);\n        const traineeAngle = this.calculateAngle(traineePose[a], traineePose[b], traineePose[c]);\n        const angleDiff = Math.abs(trainerAngle - traineeAngle);\n        totalDiff += Math.min(angleDiff, 180 - angleDiff); // ‡πÉ‡∏ä‡πâ‡∏°‡∏∏‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤\n        validJoints++;\n      }\n    });\n    if (validJoints === 0) return 0;\n    const avgDiff = totalDiff / validJoints;\n    // ‡πÅ‡∏õ‡∏•‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡∏°‡∏∏‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡∏°‡∏∏‡∏°‡∏ï‡πà‡∏≤‡∏á 0¬∞ = 100%, ‡∏°‡∏∏‡∏°‡∏ï‡πà‡∏≤‡∏á 45¬∞ = 0%)\n    const score = Math.max(0, 100 - avgDiff * 100 / 45);\n    return Math.round(score);\n  }\n\n  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 3 ‡∏à‡∏∏‡∏î\n  calculateAngle(p1, p2, p3) {\n    const a = Math.hypot(p2.x - p3.x, p2.y - p3.y);\n    const b = Math.hypot(p1.x - p3.x, p1.y - p3.y);\n    const c = Math.hypot(p1.x - p2.x, p1.y - p2.y);\n    if (a === 0 || b === 0 || c === 0) return 0;\n    const cosAngle = (b ** 2 + c ** 2 - a ** 2) / (2 * b * c);\n    const angle = Math.acos(Math.max(-1, Math.min(1, cosAngle))); // clamp to prevent NaN\n    return angle * (180 / Math.PI);\n  }\n\n  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏°‡∏µ visibility ‡∏î‡∏µ‡∏û‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n  isValidJoint(pose, a, b, c) {\n    var _pose$a, _pose$b, _pose$c;\n    return ((_pose$a = pose[a]) === null || _pose$a === void 0 ? void 0 : _pose$a.visibility) > 0.5 && ((_pose$b = pose[b]) === null || _pose$b === void 0 ? void 0 : _pose$b.visibility) > 0.5 && ((_pose$c = pose[c]) === null || _pose$c === void 0 ? void 0 : _pose$c.visibility) > 0.5;\n  }\n\n  // ‡∏™‡∏£‡πâ‡∏≤‡∏á feedback ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô - 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏µ\n  generateFeedback(accuracy) {\n    if (accuracy > 70) {\n      // üü¢ ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß - ‡∏ó‡πà‡∏≤‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á\n      return {\n        level: \"excellent\",\n        message: \"Excellent! ‚úÖ ‡∏ó‡πà‡∏≤‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÄ‡∏•‡∏¢!\",\n        color: \"#22c55e\",\n        // ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏°‡∏∞‡∏ô‡∏≤‡∏ß\n        emoji: \"‚úÖ\"\n      };\n    } else if (accuracy > 50) {\n      // üü° ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á - ‡∏û‡∏≠‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢\n      return {\n        level: \"almost-there\",\n        message: \"Almost There! ‚ö†Ô∏è ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏î‡∏µ‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ó‡∏£‡∏á‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î\",\n        color: \"#eab308\",\n        // ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á\n        emoji: \"‚ö†Ô∏è\"\n      };\n    } else {\n      // üî¥ ‡πÅ‡∏î‡∏á - ‡∏ó‡πà‡∏≤‡∏ú‡∏¥‡∏î‡∏°‡∏≤‡∏Å ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏¢‡∏≠‡∏∞\n      return {\n        level: \"needs-adjustment\",\n        message: \"Incorrect Posture ‚ùå ‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏≠‡∏µ‡∏Å‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡∏∞\",\n        color: \"#ef4444\",\n        // ‡πÅ‡∏î‡∏á‡∏™‡∏î\n        emoji: \"‚ùå\"\n      };\n    }\n  }\n\n  // ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö keypoints (original API method)\n  async compareKeypoints(videoId, segmentId, traineeKeypoints, timestamp) {\n    try {\n      const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/compare`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          keypoints: traineeKeypoints,\n          timestamp: timestamp\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error comparing keypoints:', error);\n      throw error;\n    }\n  }\n\n  // ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• segments ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á video\n  async getVideoSegments(videoId) {\n    try {\n      const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error getting video segments:', error);\n      throw error;\n    }\n  }\n\n  // ‡∏•‡∏ö keypoints\n  async deleteKeypoints(videoId, segmentId) {\n    try {\n      const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/keypoints`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error deleting keypoints:', error);\n      throw error;\n    }\n  }\n}\n\n// Export as default\nexport default KeypointsService;","map":{"version":3,"names":["KeypointsService","constructor","baseURL","uploadKeypoints","videoId","segmentId","keypointsData","response","fetch","method","headers","body","JSON","stringify","keypoints_data","ok","Error","status","json","error","console","loadKeypoints","calculatePoseAccuracy","trainerPose","traineePose","length","accuracy","feedback","generateFeedback","validPairs","i","visibility","push","trainer","trainee","cosineSim","calculateCosineSimilarity","angleSim","calculateAngleSimilarity","finalScore","Math","round","max","min","flatten","pose","flatMap","p","x","y","trainerVector","traineeVector","dot","normA","normB","similarity","sqrt","joints","totalDiff","validJoints","forEach","a","b","c","isValidJoint","trainerAngle","calculateAngle","traineeAngle","angleDiff","abs","avgDiff","score","p1","p2","p3","hypot","cosAngle","angle","acos","PI","_pose$a","_pose$b","_pose$c","level","message","color","emoji","compareKeypoints","traineeKeypoints","timestamp","keypoints","getVideoSegments","deleteKeypoints"],"sources":["C:/Fit/frontend/src/services/KeypointsService.js"],"sourcesContent":["// KeypointsService.js - Service ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ keypoints ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö pose\r\n\r\nclass KeypointsService {\r\n    constructor(baseURL = 'http://localhost:8000') {\r\n        this.baseURL = baseURL;\r\n    }\r\n\r\n    // ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î keypoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö video segment\r\n    async uploadKeypoints(videoId, segmentId, keypointsData) {\r\n        try {\r\n            const response = await fetch(\r\n                `${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/upload`,\r\n                {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({\r\n                        keypoints_data: keypointsData\r\n                    })\r\n                }\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Error uploading keypoints:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // ‡πÇ‡∏´‡∏•‡∏î keypoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö video segment\r\n    async loadKeypoints(videoId, segmentId) {\r\n        try {\r\n            const response = await fetch(\r\n                `${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/load`\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Error loading keypoints:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // üéØ Core Function: ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö keypoints ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á trainer ‡πÅ‡∏•‡∏∞ trainee ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå\r\n    calculatePoseAccuracy(trainerPose, traineePose) {\r\n        if (!trainerPose || !traineePose || \r\n            trainerPose.length !== traineePose.length) {\r\n            return { accuracy: 0, feedback: this.generateFeedback(0) };\r\n        }\r\n\r\n        // ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ visibility > 0.5\r\n        const validPairs = [];\r\n        for (let i = 0; i < trainerPose.length; i++) {\r\n            if (trainerPose[i].visibility > 0.5 && traineePose[i].visibility > 0.5) {\r\n                validPairs.push({ trainer: trainerPose[i], trainee: traineePose[i] });\r\n            }\r\n        }\r\n\r\n        if (validPairs.length === 0) {\r\n            return { accuracy: 0, feedback: this.generateFeedback(0) };\r\n        }\r\n\r\n        // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: Cosine Similarity (40%)\r\n        const cosineSim = this.calculateCosineSimilarity(trainerPose, traineePose);\r\n        \r\n        // ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: Angle Similarity ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (60%)\r\n        const angleSim = this.calculateAngleSimilarity(trainerPose, traineePose);\r\n        \r\n        // ‡∏£‡∏ß‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ (60% angle + 40% cosine)\r\n        const finalScore = Math.round(angleSim * 0.6 + cosineSim * 0.4);\r\n        const accuracy = Math.max(0, Math.min(100, finalScore));\r\n        \r\n        // ‡∏™‡∏£‡πâ‡∏≤‡∏á feedback\r\n        const feedback = this.generateFeedback(accuracy);\r\n        \r\n        return { accuracy, feedback };\r\n    }\r\n\r\n    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Cosine Similarity\r\n    calculateCosineSimilarity(trainerPose, traineePose) {\r\n        const flatten = (pose) => pose.flatMap(p => [p.x, p.y]);\r\n        const trainerVector = flatten(trainerPose);\r\n        const traineeVector = flatten(traineePose);\r\n\r\n        let dot = 0, normA = 0, normB = 0;\r\n        for (let i = 0; i < trainerVector.length; i++) {\r\n            dot += trainerVector[i] * traineeVector[i];\r\n            normA += trainerVector[i] ** 2;\r\n            normB += traineeVector[i] ** 2;\r\n        }\r\n\r\n        if (normA === 0 || normB === 0) return 0;\r\n        \r\n        const similarity = dot / (Math.sqrt(normA) * Math.sqrt(normB));\r\n        return Math.round(similarity * 100);\r\n    }\r\n\r\n    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Angle Similarity ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç\r\n    calculateAngleSimilarity(trainerPose, traineePose) {\r\n        // ‡∏à‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç [‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà1, ‡∏à‡∏∏‡∏î‡∏Å‡∏•‡∏≤‡∏á, ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà3]\r\n        const joints = [\r\n            [11, 13, 15], // ‡πÅ‡∏Ç‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ (‡πÑ‡∏´‡∏•‡πà-‡∏®‡∏≠‡∏Å-‡∏Ç‡πâ‡∏≠‡∏°‡∏∑‡∏≠)\r\n            [12, 14, 16], // ‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏ß‡∏≤ (‡πÑ‡∏´‡∏•‡πà-‡∏®‡∏≠‡∏Å-‡∏Ç‡πâ‡∏≠‡∏°‡∏∑‡∏≠)\r\n            [23, 25, 27], // ‡∏Ç‡∏≤‡∏ã‡πâ‡∏≤‡∏¢ (‡∏™‡∏∞‡πÇ‡∏û‡∏Å-‡πÄ‡∏Ç‡πà‡∏≤-‡∏Ç‡πâ‡∏≠‡πÄ‡∏ó‡πâ‡∏≤)\r\n            [24, 26, 28], // ‡∏Ç‡∏≤‡∏Ç‡∏ß‡∏≤ (‡∏™‡∏∞‡πÇ‡∏û‡∏Å-‡πÄ‡∏Ç‡πà‡∏≤-‡∏Ç‡πâ‡∏≠‡πÄ‡∏ó‡πâ‡∏≤)\r\n            [11, 23, 25], // ‡∏•‡∏≥‡∏ï‡∏±‡∏ß‡∏ã‡πâ‡∏≤‡∏¢ (‡πÑ‡∏´‡∏•‡πà-‡∏™‡∏∞‡πÇ‡∏û‡∏Å-‡πÄ‡∏Ç‡πà‡∏≤)\r\n            [12, 24, 26], // ‡∏•‡∏≥‡∏ï‡∏±‡∏ß‡∏Ç‡∏ß‡∏≤ (‡πÑ‡∏´‡∏•‡πà-‡∏™‡∏∞‡πÇ‡∏û‡∏Å-‡πÄ‡∏Ç‡πà‡∏≤)\r\n        ];\r\n\r\n        let totalDiff = 0;\r\n        let validJoints = 0;\r\n\r\n        joints.forEach(([a, b, c]) => {\r\n            if (this.isValidJoint(trainerPose, a, b, c) && \r\n                this.isValidJoint(traineePose, a, b, c)) {\r\n                \r\n                const trainerAngle = this.calculateAngle(\r\n                    trainerPose[a], trainerPose[b], trainerPose[c]\r\n                );\r\n                const traineeAngle = this.calculateAngle(\r\n                    traineePose[a], traineePose[b], traineePose[c]\r\n                );\r\n                \r\n                const angleDiff = Math.abs(trainerAngle - traineeAngle);\r\n                totalDiff += Math.min(angleDiff, 180 - angleDiff); // ‡πÉ‡∏ä‡πâ‡∏°‡∏∏‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πá‡∏Å‡∏Å‡∏ß‡πà‡∏≤\r\n                validJoints++;\r\n            }\r\n        });\r\n\r\n        if (validJoints === 0) return 0;\r\n\r\n        const avgDiff = totalDiff / validJoints;\r\n        // ‡πÅ‡∏õ‡∏•‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡∏°‡∏∏‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡∏°‡∏∏‡∏°‡∏ï‡πà‡∏≤‡∏á 0¬∞ = 100%, ‡∏°‡∏∏‡∏°‡∏ï‡πà‡∏≤‡∏á 45¬∞ = 0%)\r\n        const score = Math.max(0, 100 - (avgDiff * 100 / 45));\r\n        return Math.round(score);\r\n    }\r\n\r\n    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 3 ‡∏à‡∏∏‡∏î\r\n    calculateAngle(p1, p2, p3) {\r\n        const a = Math.hypot(p2.x - p3.x, p2.y - p3.y);\r\n        const b = Math.hypot(p1.x - p3.x, p1.y - p3.y);\r\n        const c = Math.hypot(p1.x - p2.x, p1.y - p2.y);\r\n        \r\n        if (a === 0 || b === 0 || c === 0) return 0;\r\n        \r\n        const cosAngle = (b ** 2 + c ** 2 - a ** 2) / (2 * b * c);\r\n        const angle = Math.acos(Math.max(-1, Math.min(1, cosAngle))); // clamp to prevent NaN\r\n        return angle * (180 / Math.PI);\r\n    }\r\n\r\n    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏°‡∏µ visibility ‡∏î‡∏µ‡∏û‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\r\n    isValidJoint(pose, a, b, c) {\r\n        return pose[a]?.visibility > 0.5 && \r\n               pose[b]?.visibility > 0.5 && \r\n               pose[c]?.visibility > 0.5;\r\n    }\r\n\r\n    // ‡∏™‡∏£‡πâ‡∏≤‡∏á feedback ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô - 3 ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏µ\r\n    generateFeedback(accuracy) {\r\n        if (accuracy > 70) {\r\n            // üü¢ ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß - ‡∏ó‡πà‡∏≤‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á\r\n            return {\r\n                level: \"excellent\",\r\n                message: \"Excellent! ‚úÖ ‡∏ó‡πà‡∏≤‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÄ‡∏•‡∏¢!\",\r\n                color: \"#22c55e\", // ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏°‡∏∞‡∏ô‡∏≤‡∏ß\r\n                emoji: \"‚úÖ\"\r\n            };\r\n        } else if (accuracy > 50) {\r\n            // üü° ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á - ‡∏û‡∏≠‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢\r\n            return {\r\n                level: \"almost-there\",\r\n                message: \"Almost There! ‚ö†Ô∏è ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏î‡∏µ‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ó‡∏£‡∏á‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î\",\r\n                color: \"#eab308\", // ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á\r\n                emoji: \"‚ö†Ô∏è\"\r\n            };\r\n        } else {\r\n            // üî¥ ‡πÅ‡∏î‡∏á - ‡∏ó‡πà‡∏≤‡∏ú‡∏¥‡∏î‡∏°‡∏≤‡∏Å ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏¢‡∏≠‡∏∞\r\n            return {\r\n                level: \"needs-adjustment\",\r\n                message: \"Incorrect Posture ‚ùå ‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏≠‡∏µ‡∏Å‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡∏∞\",\r\n                color: \"#ef4444\", // ‡πÅ‡∏î‡∏á‡∏™‡∏î\r\n                emoji: \"‚ùå\"\r\n            };\r\n        }\r\n    }\r\n\r\n    // ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö keypoints (original API method)\r\n    async compareKeypoints(videoId, segmentId, traineeKeypoints, timestamp) {\r\n        try {\r\n            const response = await fetch(\r\n                `${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/compare`,\r\n                {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({\r\n                        keypoints: traineeKeypoints,\r\n                        timestamp: timestamp\r\n                    })\r\n                }\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Error comparing keypoints:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• segments ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á video\r\n    async getVideoSegments(videoId) {\r\n        try {\r\n            const response = await fetch(\r\n                `${this.baseURL}/keypoints/videos/${videoId}/segments`\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Error getting video segments:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // ‡∏•‡∏ö keypoints\r\n    async deleteKeypoints(videoId, segmentId) {\r\n        try {\r\n            const response = await fetch(\r\n                `${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/keypoints`,\r\n                {\r\n                    method: 'DELETE'\r\n                }\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Error deleting keypoints:', error);\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n\r\n// Export as default\r\nexport default KeypointsService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}