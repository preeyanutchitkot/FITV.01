{"ast":null,"code":"var _jsxFileName = \"C:\\\\Fit\\\\frontend\\\\src\\\\components\\\\RealTimePoseComparison.js\",\n  _s = $RefreshSig$();\n// RealTimePoseComparison.js - Real-time pose comparison with MediaPipe\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport { Pose, POSE_CONNECTIONS } from '@mediapipe/pose';\nimport { Camera } from '@mediapipe/camera_utils';\nimport { drawConnectors, drawLandmarks } from '@mediapipe/drawing_utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RealTimePoseComparison = ({\n  trainerVideoUrl,\n  onComparisonResult,\n  isActive = false,\n  showTrainerPose = true\n}) => {\n  _s();\n  // Video ‡πÅ‡∏•‡∏∞ Canvas refs\n  const trainerVideoRef = useRef(null);\n  const traineeVideoRef = useRef(null);\n  const trainerCanvasRef = useRef(null);\n  const traineeCanvasRef = useRef(null);\n  const comparisonCanvasRef = useRef(null);\n\n  // MediaPipe instances\n  const trainerPoseRef = useRef(null);\n  const traineePoseRef = useRef(null);\n  const cameraRef = useRef(null);\n\n  // State\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [trainerKeypoints, setTrainerKeypoints] = useState(null);\n  const [traineeKeypoints, setTraineeKeypoints] = useState(null);\n  const [similarityScore, setSimilarityScore] = useState(0);\n  const [feedback, setFeedback] = useState('');\n  const [isComparing, setIsComparing] = useState(false);\n\n  // Initialize MediaPipe Pose for trainer video\n  useEffect(() => {\n    const initializeTrainerPose = async () => {\n      try {\n        const pose = new Pose({\n          locateFile: file => {\n            return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\n          }\n        });\n        pose.setOptions({\n          modelComplexity: 1,\n          smoothLandmarks: true,\n          enableSegmentation: false,\n          smoothSegmentation: true,\n          minDetectionConfidence: 0.5,\n          minTrackingConfidence: 0.5\n        });\n        pose.onResults(handleTrainerPoseResults);\n        trainerPoseRef.current = pose;\n        await pose.initialize();\n        setIsLoading(false);\n      } catch (err) {\n        console.error('Failed to initialize trainer pose:', err);\n        setError('Failed to initialize pose detection for trainer video');\n        setIsLoading(false);\n      }\n    };\n    initializeTrainerPose();\n  }, []);\n\n  // Initialize MediaPipe Pose for trainee camera\n  useEffect(() => {\n    const initializeTraineePose = async () => {\n      try {\n        const pose = new Pose({\n          locateFile: file => {\n            return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\n          }\n        });\n        pose.setOptions({\n          modelComplexity: 1,\n          smoothLandmarks: true,\n          enableSegmentation: false,\n          smoothSegmentation: true,\n          minDetectionConfidence: 0.5,\n          minTrackingConfidence: 0.5\n        });\n        pose.onResults(handleTraineePoseResults);\n        traineePoseRef.current = pose;\n        await pose.initialize();\n      } catch (err) {\n        console.error('Failed to initialize trainee pose:', err);\n        setError('Failed to initialize pose detection for camera');\n      }\n    };\n    initializeTraineePose();\n  }, []);\n\n  // Initialize camera for trainee\n  useEffect(() => {\n    const initializeCamera = async () => {\n      if (!traineePoseRef.current || !traineeVideoRef.current) return;\n      try {\n        const camera = new Camera(traineeVideoRef.current, {\n          onFrame: async () => {\n            if (isActive && traineePoseRef.current) {\n              await traineePoseRef.current.send({\n                image: traineeVideoRef.current\n              });\n            }\n          },\n          width: 640,\n          height: 480\n        });\n        await camera.start();\n        cameraRef.current = camera;\n      } catch (err) {\n        console.error('Failed to initialize camera:', err);\n        setError('Failed to access camera');\n      }\n    };\n    if (isActive) {\n      initializeCamera();\n    }\n    return () => {\n      if (cameraRef.current) {\n        cameraRef.current.stop();\n      }\n    };\n  }, [isActive, traineePoseRef.current, traineeVideoRef.current]);\n\n  // Handle trainer video pose results\n  const handleTrainerPoseResults = useCallback(results => {\n    if (!trainerCanvasRef.current) return;\n    const canvas = trainerCanvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // Clear canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Draw trainer video frame\n    if (trainerVideoRef.current) {\n      ctx.drawImage(trainerVideoRef.current, 0, 0, canvas.width, canvas.height);\n    }\n\n    // Draw pose landmarks and connections\n    if (results.poseLandmarks && showTrainerPose) {\n      drawConnectors(ctx, results.poseLandmarks, POSE_CONNECTIONS, {\n        color: '#00FF00',\n        lineWidth: 4\n      });\n      drawLandmarks(ctx, results.poseLandmarks, {\n        color: '#FF0000',\n        lineWidth: 2,\n        radius: 6\n      });\n    }\n\n    // Store keypoints for comparison\n    if (results.poseLandmarks) {\n      const keypoints = results.poseLandmarks.map(landmark => ({\n        x: landmark.x,\n        y: landmark.y,\n        z: landmark.z,\n        visibility: landmark.visibility\n      }));\n      setTrainerKeypoints(keypoints);\n    }\n  }, [showTrainerPose]);\n\n  // Handle trainee camera pose results\n  const handleTraineePoseResults = useCallback(results => {\n    if (!traineeCanvasRef.current) return;\n    const canvas = traineeCanvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // Clear canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Draw camera feed\n    ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);\n\n    // Draw pose landmarks and connections\n    if (results.poseLandmarks) {\n      drawConnectors(ctx, results.poseLandmarks, POSE_CONNECTIONS, {\n        color: '#00FFFF',\n        lineWidth: 4\n      });\n      drawLandmarks(ctx, results.poseLandmarks, {\n        color: '#0000FF',\n        lineWidth: 2,\n        radius: 6\n      });\n    }\n\n    // Store keypoints for comparison\n    if (results.poseLandmarks) {\n      const keypoints = results.poseLandmarks.map(landmark => ({\n        x: landmark.x,\n        y: landmark.y,\n        z: landmark.z,\n        visibility: landmark.visibility\n      }));\n      setTraineeKeypoints(keypoints);\n    }\n  }, []);\n\n  // Process trainer video frame\n  const processTrainerFrame = useCallback(async () => {\n    if (!trainerPoseRef.current || !trainerVideoRef.current || !isActive) return;\n    try {\n      await trainerPoseRef.current.send({\n        image: trainerVideoRef.current\n      });\n    } catch (err) {\n      console.error('Error processing trainer frame:', err);\n    }\n  }, [isActive]);\n\n  // Auto-process trainer video frames\n  useEffect(() => {\n    if (!isActive) return;\n    const interval = setInterval(processTrainerFrame, 100); // 10 FPS\n    return () => clearInterval(interval);\n  }, [isActive, processTrainerFrame]);\n\n  // Compare poses when both keypoints are available\n  useEffect(() => {\n    if (trainerKeypoints && traineeKeypoints && isActive) {\n      compareRealTimePoses();\n    }\n  }, [trainerKeypoints, traineeKeypoints, isActive]);\n\n  // Real-time pose comparison\n  const compareRealTimePoses = useCallback(() => {\n    if (!trainerKeypoints || !traineeKeypoints) return;\n    setIsComparing(true);\n    try {\n      const similarity = calculatePoseSimilarity(trainerKeypoints, traineeKeypoints);\n      const detailedScores = calculateDetailedScores(trainerKeypoints, traineeKeypoints);\n      const feedbackText = generateRealTimeFeedback(similarity, detailedScores);\n      setSimilarityScore(similarity);\n      setFeedback(feedbackText);\n\n      // Draw comparison visualization\n      drawPoseComparison(trainerKeypoints, traineeKeypoints, similarity);\n\n      // Callback to parent component\n      if (onComparisonResult) {\n        onComparisonResult({\n          similarity_score: similarity,\n          feedback: feedbackText,\n          detailed_scores: detailedScores,\n          timestamp: Date.now()\n        });\n      }\n    } catch (err) {\n      console.error('Error in pose comparison:', err);\n    } finally {\n      setIsComparing(false);\n    }\n  }, [trainerKeypoints, traineeKeypoints, onComparisonResult]);\n\n  // Calculate pose similarity (0-1)\n  const calculatePoseSimilarity = (trainerPose, traineePose) => {\n    if (!trainerPose || !traineePose || trainerPose.length !== traineePose.length) {\n      return 0;\n    }\n    let totalSimilarity = 0;\n    let validPoints = 0;\n    for (let i = 0; i < trainerPose.length; i++) {\n      const trainerPoint = trainerPose[i];\n      const traineePoint = traineePose[i];\n\n      // Check visibility threshold\n      if (trainerPoint.visibility > 0.5 && traineePoint.visibility > 0.5) {\n        // Calculate normalized distance\n        const dx = trainerPoint.x - traineePoint.x;\n        const dy = trainerPoint.y - traineePoint.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n\n        // Convert to similarity score (closer = higher score)\n        const similarity = Math.max(0, 1 - distance * 2);\n\n        // Weight important joints more\n        const weight = getJointWeight(i);\n        totalSimilarity += similarity * weight;\n        validPoints += weight;\n      }\n    }\n    return validPoints > 0 ? totalSimilarity / validPoints : 0;\n  };\n\n  // Calculate detailed scores for different body parts\n  const calculateDetailedScores = (trainerPose, traineePose) => {\n    const bodyParts = {\n      head: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n      arms: [11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22],\n      torso: [11, 12, 23, 24],\n      legs: [23, 24, 25, 26, 27, 28, 29, 30, 31, 32]\n    };\n    const detailedScores = {};\n    for (const [partName, indices] of Object.entries(bodyParts)) {\n      let partScore = 0;\n      let validPoints = 0;\n      for (const idx of indices) {\n        if (idx < trainerPose.length && idx < traineePose.length) {\n          const trainerPoint = trainerPose[idx];\n          const traineePoint = traineePose[idx];\n          if (trainerPoint.visibility > 0.5 && traineePoint.visibility > 0.5) {\n            const dx = trainerPoint.x - traineePoint.x;\n            const dy = trainerPoint.y - traineePoint.y;\n            const distance = Math.sqrt(dx * dx + dy * dy);\n            const similarity = Math.max(0, 1 - distance * 2);\n            partScore += similarity;\n            validPoints += 1;\n          }\n        }\n      }\n      detailedScores[partName] = validPoints > 0 ? partScore / validPoints : 0;\n    }\n    return detailedScores;\n  };\n\n  // Get weight for specific joint\n  const getJointWeight = jointIndex => {\n    const importantJoints = {\n      11: 1.5,\n      // Left shoulder\n      12: 1.5,\n      // Right shoulder\n      13: 1.3,\n      // Left elbow\n      14: 1.3,\n      // Right elbow\n      15: 1.1,\n      // Left wrist\n      16: 1.1,\n      // Right wrist\n      23: 1.5,\n      // Left hip\n      24: 1.5,\n      // Right hip\n      25: 1.3,\n      // Left knee\n      26: 1.3,\n      // Right knee\n      27: 1.1,\n      // Left ankle\n      28: 1.1 // Right ankle\n    };\n    return importantJoints[jointIndex] || 1.0;\n  };\n\n  // Generate real-time feedback\n  const generateRealTimeFeedback = (score, detailedScores) => {\n    let feedback = '';\n    if (score >= 0.9) {\n      feedback = 'üéâ Perfect form!';\n    } else if (score >= 0.8) {\n      feedback = 'üëç Great job!';\n    } else if (score >= 0.7) {\n      feedback = 'üëå Good form';\n    } else if (score >= 0.6) {\n      feedback = '‚ö†Ô∏è Needs improvement';\n    } else {\n      feedback = '‚ùå Focus on form';\n    }\n\n    // Add specific suggestions\n    const suggestions = [];\n    for (const [part, partScore] of Object.entries(detailedScores)) {\n      if (partScore < 0.6) {\n        switch (part) {\n          case 'arms':\n            suggestions.push('üí™ Adjust arm position');\n            break;\n          case 'legs':\n            suggestions.push('ü¶µ Check leg alignment');\n            break;\n          case 'torso':\n            suggestions.push('üèÉ Keep torso straight');\n            break;\n        }\n      }\n    }\n    if (suggestions.length > 0) {\n      feedback += '\\n' + suggestions.join(' ‚Ä¢ ');\n    }\n    return feedback;\n  };\n\n  // Draw pose comparison visualization\n  const drawPoseComparison = (trainerPose, traineePose, similarity) => {\n    if (!comparisonCanvasRef.current) return;\n    const canvas = comparisonCanvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // Clear canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Draw similarity score\n    ctx.fillStyle = similarity >= 0.8 ? '#4CAF50' : similarity >= 0.6 ? '#FF9800' : '#F44336';\n    ctx.font = 'bold 24px Arial';\n    ctx.fillText(`Score: ${(similarity * 100).toFixed(0)}%`, 10, 30);\n\n    // Draw pose comparison (side by side)\n    const halfWidth = canvas.width / 2;\n\n    // Draw trainer pose (left side)\n    ctx.strokeStyle = '#00FF00';\n    ctx.lineWidth = 3;\n    drawPosePoints(ctx, trainerPose, 0, 0, halfWidth, canvas.height);\n\n    // Draw trainee pose (right side)\n    ctx.strokeStyle = '#00FFFF';\n    ctx.lineWidth = 3;\n    drawPosePoints(ctx, traineePose, halfWidth, 0, halfWidth, canvas.height);\n\n    // Draw divider line\n    ctx.strokeStyle = '#FFFFFF';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(halfWidth, 0);\n    ctx.lineTo(halfWidth, canvas.height);\n    ctx.stroke();\n  };\n\n  // Draw pose points on canvas\n  const drawPosePoints = (ctx, pose, x, y, width, height) => {\n    if (!pose || pose.length === 0) return;\n\n    // Draw connections\n    const connections = [[11, 12], [11, 13], [13, 15], [12, 14], [14, 16],\n    // Arms\n    [11, 23], [12, 24], [23, 24],\n    // Torso\n    [23, 25], [25, 27], [24, 26], [26, 28] // Legs\n    ];\n    ctx.beginPath();\n    for (const [start, end] of connections) {\n      if (start < pose.length && end < pose.length) {\n        const startPoint = pose[start];\n        const endPoint = pose[end];\n        if (startPoint.visibility > 0.5 && endPoint.visibility > 0.5) {\n          ctx.moveTo(x + startPoint.x * width, y + startPoint.y * height);\n          ctx.lineTo(x + endPoint.x * width, y + endPoint.y * height);\n        }\n      }\n    }\n    ctx.stroke();\n\n    // Draw points\n    for (let i = 0; i < pose.length; i++) {\n      const point = pose[i];\n      if (point.visibility > 0.5) {\n        ctx.beginPath();\n        ctx.arc(x + point.x * width, y + point.y * height, 4, 0, 2 * Math.PI);\n        ctx.fill();\n      }\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pose-comparison-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading pose detection...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 13\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pose-comparison-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"real-time-pose-comparison\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: trainerVideoRef,\n      src: trainerVideoUrl,\n      style: {\n        display: 'none'\n      },\n      muted: true,\n      loop: true,\n      autoPlay: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: traineeVideoRef,\n      style: {\n        display: 'none'\n      },\n      autoPlay: true,\n      muted: true,\n      playsInline: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pose-display-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"trainee-display\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"live-indicator\",\n          children: \"\\uD83D\\uDD34 LIVE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: traineeCanvasRef,\n          width: 480,\n          height: 360,\n          className: \"pose-canvas trainee-canvas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"trainer-display\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"playing-indicator\",\n          children: \"\\u25B6\\uFE0F PLAYING\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: trainerCanvasRef,\n          width: 480,\n          height: 360,\n          className: \"pose-canvas trainer-canvas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Professional Demo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Follow the movement pattern\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feedback-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-messages\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feedback-item warning\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"feedback-icon\",\n            children: \"\\u26A0\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"feedback-text\",\n            children: \"Left Knee: Keep knees aligned with toes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"feedback-item error\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"feedback-icon\",\n            children: \"\\uD83D\\uDD34\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"feedback-text\",\n            children: \"Back: Keep chest up and spine neutral\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"score-display-compact\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-fill\",\n            style: {\n              width: `${similarityScore * 100}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"score-text\",\n          children: [(similarityScore * 100).toFixed(0), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comparison-visualization\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uD83D\\uDCCA Form Comparison\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: comparisonCanvasRef,\n        width: 640,\n        height: 240,\n        className: \"comparison-canvas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 514,\n    columnNumber: 9\n  }, this);\n};\n_s(RealTimePoseComparison, \"Jh+iNVdnx+ha8D9MLfx+oWXzH2A=\");\n_c = RealTimePoseComparison;\nexport default RealTimePoseComparison;\nvar _c;\n$RefreshReg$(_c, \"RealTimePoseComparison\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","Pose","POSE_CONNECTIONS","Camera","drawConnectors","drawLandmarks","jsxDEV","_jsxDEV","RealTimePoseComparison","trainerVideoUrl","onComparisonResult","isActive","showTrainerPose","_s","trainerVideoRef","traineeVideoRef","trainerCanvasRef","traineeCanvasRef","comparisonCanvasRef","trainerPoseRef","traineePoseRef","cameraRef","isLoading","setIsLoading","error","setError","trainerKeypoints","setTrainerKeypoints","traineeKeypoints","setTraineeKeypoints","similarityScore","setSimilarityScore","feedback","setFeedback","isComparing","setIsComparing","initializeTrainerPose","pose","locateFile","file","setOptions","modelComplexity","smoothLandmarks","enableSegmentation","smoothSegmentation","minDetectionConfidence","minTrackingConfidence","onResults","handleTrainerPoseResults","current","initialize","err","console","initializeTraineePose","handleTraineePoseResults","initializeCamera","camera","onFrame","send","image","width","height","start","stop","results","canvas","ctx","getContext","clearRect","drawImage","poseLandmarks","color","lineWidth","radius","keypoints","map","landmark","x","y","z","visibility","processTrainerFrame","interval","setInterval","clearInterval","compareRealTimePoses","similarity","calculatePoseSimilarity","detailedScores","calculateDetailedScores","feedbackText","generateRealTimeFeedback","drawPoseComparison","similarity_score","detailed_scores","timestamp","Date","now","trainerPose","traineePose","length","totalSimilarity","validPoints","i","trainerPoint","traineePoint","dx","dy","distance","Math","sqrt","max","weight","getJointWeight","bodyParts","head","arms","torso","legs","partName","indices","Object","entries","partScore","idx","jointIndex","importantJoints","score","suggestions","part","push","join","fillStyle","font","fillText","toFixed","halfWidth","strokeStyle","drawPosePoints","beginPath","moveTo","lineTo","stroke","connections","end","startPoint","endPoint","point","arc","PI","fill","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","ref","src","style","display","muted","loop","autoPlay","playsInline","_c","$RefreshReg$"],"sources":["C:/Fit/frontend/src/components/RealTimePoseComparison.js"],"sourcesContent":["// RealTimePoseComparison.js - Real-time pose comparison with MediaPipe\r\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\r\nimport { Pose, POSE_CONNECTIONS } from '@mediapipe/pose';\r\nimport { Camera } from '@mediapipe/camera_utils';\r\nimport { drawConnectors, drawLandmarks } from '@mediapipe/drawing_utils';\r\n\r\nconst RealTimePoseComparison = ({ \r\n    trainerVideoUrl, \r\n    onComparisonResult, \r\n    isActive = false,\r\n    showTrainerPose = true \r\n}) => {\r\n    // Video ‡πÅ‡∏•‡∏∞ Canvas refs\r\n    const trainerVideoRef = useRef(null);\r\n    const traineeVideoRef = useRef(null);\r\n    const trainerCanvasRef = useRef(null);\r\n    const traineeCanvasRef = useRef(null);\r\n    const comparisonCanvasRef = useRef(null);\r\n\r\n    // MediaPipe instances\r\n    const trainerPoseRef = useRef(null);\r\n    const traineePoseRef = useRef(null);\r\n    const cameraRef = useRef(null);\r\n\r\n    // State\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [trainerKeypoints, setTrainerKeypoints] = useState(null);\r\n    const [traineeKeypoints, setTraineeKeypoints] = useState(null);\r\n    const [similarityScore, setSimilarityScore] = useState(0);\r\n    const [feedback, setFeedback] = useState('');\r\n    const [isComparing, setIsComparing] = useState(false);\r\n\r\n    // Initialize MediaPipe Pose for trainer video\r\n    useEffect(() => {\r\n        const initializeTrainerPose = async () => {\r\n            try {\r\n                const pose = new Pose({\r\n                    locateFile: (file) => {\r\n                        return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\r\n                    }\r\n                });\r\n\r\n                pose.setOptions({\r\n                    modelComplexity: 1,\r\n                    smoothLandmarks: true,\r\n                    enableSegmentation: false,\r\n                    smoothSegmentation: true,\r\n                    minDetectionConfidence: 0.5,\r\n                    minTrackingConfidence: 0.5\r\n                });\r\n\r\n                pose.onResults(handleTrainerPoseResults);\r\n                trainerPoseRef.current = pose;\r\n\r\n                await pose.initialize();\r\n                setIsLoading(false);\r\n            } catch (err) {\r\n                console.error('Failed to initialize trainer pose:', err);\r\n                setError('Failed to initialize pose detection for trainer video');\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        initializeTrainerPose();\r\n    }, []);\r\n\r\n    // Initialize MediaPipe Pose for trainee camera\r\n    useEffect(() => {\r\n        const initializeTraineePose = async () => {\r\n            try {\r\n                const pose = new Pose({\r\n                    locateFile: (file) => {\r\n                        return `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`;\r\n                    }\r\n                });\r\n\r\n                pose.setOptions({\r\n                    modelComplexity: 1,\r\n                    smoothLandmarks: true,\r\n                    enableSegmentation: false,\r\n                    smoothSegmentation: true,\r\n                    minDetectionConfidence: 0.5,\r\n                    minTrackingConfidence: 0.5\r\n                });\r\n\r\n                pose.onResults(handleTraineePoseResults);\r\n                traineePoseRef.current = pose;\r\n\r\n                await pose.initialize();\r\n            } catch (err) {\r\n                console.error('Failed to initialize trainee pose:', err);\r\n                setError('Failed to initialize pose detection for camera');\r\n            }\r\n        };\r\n\r\n        initializeTraineePose();\r\n    }, []);\r\n\r\n    // Initialize camera for trainee\r\n    useEffect(() => {\r\n        const initializeCamera = async () => {\r\n            if (!traineePoseRef.current || !traineeVideoRef.current) return;\r\n\r\n            try {\r\n                const camera = new Camera(traineeVideoRef.current, {\r\n                    onFrame: async () => {\r\n                        if (isActive && traineePoseRef.current) {\r\n                            await traineePoseRef.current.send({\r\n                                image: traineeVideoRef.current\r\n                            });\r\n                        }\r\n                    },\r\n                    width: 640,\r\n                    height: 480\r\n                });\r\n\r\n                await camera.start();\r\n                cameraRef.current = camera;\r\n            } catch (err) {\r\n                console.error('Failed to initialize camera:', err);\r\n                setError('Failed to access camera');\r\n            }\r\n        };\r\n\r\n        if (isActive) {\r\n            initializeCamera();\r\n        }\r\n\r\n        return () => {\r\n            if (cameraRef.current) {\r\n                cameraRef.current.stop();\r\n            }\r\n        };\r\n    }, [isActive, traineePoseRef.current, traineeVideoRef.current]);\r\n\r\n    // Handle trainer video pose results\r\n    const handleTrainerPoseResults = useCallback((results) => {\r\n        if (!trainerCanvasRef.current) return;\r\n\r\n        const canvas = trainerCanvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        // Clear canvas\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Draw trainer video frame\r\n        if (trainerVideoRef.current) {\r\n            ctx.drawImage(trainerVideoRef.current, 0, 0, canvas.width, canvas.height);\r\n        }\r\n\r\n        // Draw pose landmarks and connections\r\n        if (results.poseLandmarks && showTrainerPose) {\r\n            drawConnectors(ctx, results.poseLandmarks, POSE_CONNECTIONS, {\r\n                color: '#00FF00',\r\n                lineWidth: 4\r\n            });\r\n            drawLandmarks(ctx, results.poseLandmarks, {\r\n                color: '#FF0000',\r\n                lineWidth: 2,\r\n                radius: 6\r\n            });\r\n        }\r\n\r\n        // Store keypoints for comparison\r\n        if (results.poseLandmarks) {\r\n            const keypoints = results.poseLandmarks.map(landmark => ({\r\n                x: landmark.x,\r\n                y: landmark.y,\r\n                z: landmark.z,\r\n                visibility: landmark.visibility\r\n            }));\r\n            setTrainerKeypoints(keypoints);\r\n        }\r\n    }, [showTrainerPose]);\r\n\r\n    // Handle trainee camera pose results\r\n    const handleTraineePoseResults = useCallback((results) => {\r\n        if (!traineeCanvasRef.current) return;\r\n\r\n        const canvas = traineeCanvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        // Clear canvas\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Draw camera feed\r\n        ctx.drawImage(results.image, 0, 0, canvas.width, canvas.height);\r\n\r\n        // Draw pose landmarks and connections\r\n        if (results.poseLandmarks) {\r\n            drawConnectors(ctx, results.poseLandmarks, POSE_CONNECTIONS, {\r\n                color: '#00FFFF',\r\n                lineWidth: 4\r\n            });\r\n            drawLandmarks(ctx, results.poseLandmarks, {\r\n                color: '#0000FF',\r\n                lineWidth: 2,\r\n                radius: 6\r\n            });\r\n        }\r\n\r\n        // Store keypoints for comparison\r\n        if (results.poseLandmarks) {\r\n            const keypoints = results.poseLandmarks.map(landmark => ({\r\n                x: landmark.x,\r\n                y: landmark.y,\r\n                z: landmark.z,\r\n                visibility: landmark.visibility\r\n            }));\r\n            setTraineeKeypoints(keypoints);\r\n        }\r\n    }, []);\r\n\r\n    // Process trainer video frame\r\n    const processTrainerFrame = useCallback(async () => {\r\n        if (!trainerPoseRef.current || !trainerVideoRef.current || !isActive) return;\r\n\r\n        try {\r\n            await trainerPoseRef.current.send({\r\n                image: trainerVideoRef.current\r\n            });\r\n        } catch (err) {\r\n            console.error('Error processing trainer frame:', err);\r\n        }\r\n    }, [isActive]);\r\n\r\n    // Auto-process trainer video frames\r\n    useEffect(() => {\r\n        if (!isActive) return;\r\n\r\n        const interval = setInterval(processTrainerFrame, 100); // 10 FPS\r\n        return () => clearInterval(interval);\r\n    }, [isActive, processTrainerFrame]);\r\n\r\n    // Compare poses when both keypoints are available\r\n    useEffect(() => {\r\n        if (trainerKeypoints && traineeKeypoints && isActive) {\r\n            compareRealTimePoses();\r\n        }\r\n    }, [trainerKeypoints, traineeKeypoints, isActive]);\r\n\r\n    // Real-time pose comparison\r\n    const compareRealTimePoses = useCallback(() => {\r\n        if (!trainerKeypoints || !traineeKeypoints) return;\r\n\r\n        setIsComparing(true);\r\n\r\n        try {\r\n            const similarity = calculatePoseSimilarity(trainerKeypoints, traineeKeypoints);\r\n            const detailedScores = calculateDetailedScores(trainerKeypoints, traineeKeypoints);\r\n            const feedbackText = generateRealTimeFeedback(similarity, detailedScores);\r\n\r\n            setSimilarityScore(similarity);\r\n            setFeedback(feedbackText);\r\n\r\n            // Draw comparison visualization\r\n            drawPoseComparison(trainerKeypoints, traineeKeypoints, similarity);\r\n\r\n            // Callback to parent component\r\n            if (onComparisonResult) {\r\n                onComparisonResult({\r\n                    similarity_score: similarity,\r\n                    feedback: feedbackText,\r\n                    detailed_scores: detailedScores,\r\n                    timestamp: Date.now()\r\n                });\r\n            }\r\n        } catch (err) {\r\n            console.error('Error in pose comparison:', err);\r\n        } finally {\r\n            setIsComparing(false);\r\n        }\r\n    }, [trainerKeypoints, traineeKeypoints, onComparisonResult]);\r\n\r\n    // Calculate pose similarity (0-1)\r\n    const calculatePoseSimilarity = (trainerPose, traineePose) => {\r\n        if (!trainerPose || !traineePose || trainerPose.length !== traineePose.length) {\r\n            return 0;\r\n        }\r\n\r\n        let totalSimilarity = 0;\r\n        let validPoints = 0;\r\n\r\n        for (let i = 0; i < trainerPose.length; i++) {\r\n            const trainerPoint = trainerPose[i];\r\n            const traineePoint = traineePose[i];\r\n\r\n            // Check visibility threshold\r\n            if (trainerPoint.visibility > 0.5 && traineePoint.visibility > 0.5) {\r\n                // Calculate normalized distance\r\n                const dx = trainerPoint.x - traineePoint.x;\r\n                const dy = trainerPoint.y - traineePoint.y;\r\n                const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n                // Convert to similarity score (closer = higher score)\r\n                const similarity = Math.max(0, 1 - (distance * 2));\r\n\r\n                // Weight important joints more\r\n                const weight = getJointWeight(i);\r\n                totalSimilarity += similarity * weight;\r\n                validPoints += weight;\r\n            }\r\n        }\r\n\r\n        return validPoints > 0 ? totalSimilarity / validPoints : 0;\r\n    };\r\n\r\n    // Calculate detailed scores for different body parts\r\n    const calculateDetailedScores = (trainerPose, traineePose) => {\r\n        const bodyParts = {\r\n            head: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\r\n            arms: [11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22],\r\n            torso: [11, 12, 23, 24],\r\n            legs: [23, 24, 25, 26, 27, 28, 29, 30, 31, 32]\r\n        };\r\n\r\n        const detailedScores = {};\r\n\r\n        for (const [partName, indices] of Object.entries(bodyParts)) {\r\n            let partScore = 0;\r\n            let validPoints = 0;\r\n\r\n            for (const idx of indices) {\r\n                if (idx < trainerPose.length && idx < traineePose.length) {\r\n                    const trainerPoint = trainerPose[idx];\r\n                    const traineePoint = traineePose[idx];\r\n\r\n                    if (trainerPoint.visibility > 0.5 && traineePoint.visibility > 0.5) {\r\n                        const dx = trainerPoint.x - traineePoint.x;\r\n                        const dy = trainerPoint.y - traineePoint.y;\r\n                        const distance = Math.sqrt(dx * dx + dy * dy);\r\n                        const similarity = Math.max(0, 1 - (distance * 2));\r\n\r\n                        partScore += similarity;\r\n                        validPoints += 1;\r\n                    }\r\n                }\r\n            }\r\n\r\n            detailedScores[partName] = validPoints > 0 ? partScore / validPoints : 0;\r\n        }\r\n\r\n        return detailedScores;\r\n    };\r\n\r\n    // Get weight for specific joint\r\n    const getJointWeight = (jointIndex) => {\r\n        const importantJoints = {\r\n            11: 1.5, // Left shoulder\r\n            12: 1.5, // Right shoulder\r\n            13: 1.3, // Left elbow\r\n            14: 1.3, // Right elbow\r\n            15: 1.1, // Left wrist\r\n            16: 1.1, // Right wrist\r\n            23: 1.5, // Left hip\r\n            24: 1.5, // Right hip\r\n            25: 1.3, // Left knee\r\n            26: 1.3, // Right knee\r\n            27: 1.1, // Left ankle\r\n            28: 1.1  // Right ankle\r\n        };\r\n\r\n        return importantJoints[jointIndex] || 1.0;\r\n    };\r\n\r\n    // Generate real-time feedback\r\n    const generateRealTimeFeedback = (score, detailedScores) => {\r\n        let feedback = '';\r\n\r\n        if (score >= 0.9) {\r\n            feedback = 'üéâ Perfect form!';\r\n        } else if (score >= 0.8) {\r\n            feedback = 'üëç Great job!';\r\n        } else if (score >= 0.7) {\r\n            feedback = 'üëå Good form';\r\n        } else if (score >= 0.6) {\r\n            feedback = '‚ö†Ô∏è Needs improvement';\r\n        } else {\r\n            feedback = '‚ùå Focus on form';\r\n        }\r\n\r\n        // Add specific suggestions\r\n        const suggestions = [];\r\n        for (const [part, partScore] of Object.entries(detailedScores)) {\r\n            if (partScore < 0.6) {\r\n                switch (part) {\r\n                    case 'arms':\r\n                        suggestions.push('üí™ Adjust arm position');\r\n                        break;\r\n                    case 'legs':\r\n                        suggestions.push('ü¶µ Check leg alignment');\r\n                        break;\r\n                    case 'torso':\r\n                        suggestions.push('üèÉ Keep torso straight');\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (suggestions.length > 0) {\r\n            feedback += '\\n' + suggestions.join(' ‚Ä¢ ');\r\n        }\r\n\r\n        return feedback;\r\n    };\r\n\r\n    // Draw pose comparison visualization\r\n    const drawPoseComparison = (trainerPose, traineePose, similarity) => {\r\n        if (!comparisonCanvasRef.current) return;\r\n\r\n        const canvas = comparisonCanvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        // Clear canvas\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Draw similarity score\r\n        ctx.fillStyle = similarity >= 0.8 ? '#4CAF50' : similarity >= 0.6 ? '#FF9800' : '#F44336';\r\n        ctx.font = 'bold 24px Arial';\r\n        ctx.fillText(`Score: ${(similarity * 100).toFixed(0)}%`, 10, 30);\r\n\r\n        // Draw pose comparison (side by side)\r\n        const halfWidth = canvas.width / 2;\r\n        \r\n        // Draw trainer pose (left side)\r\n        ctx.strokeStyle = '#00FF00';\r\n        ctx.lineWidth = 3;\r\n        drawPosePoints(ctx, trainerPose, 0, 0, halfWidth, canvas.height);\r\n\r\n        // Draw trainee pose (right side)\r\n        ctx.strokeStyle = '#00FFFF';\r\n        ctx.lineWidth = 3;\r\n        drawPosePoints(ctx, traineePose, halfWidth, 0, halfWidth, canvas.height);\r\n\r\n        // Draw divider line\r\n        ctx.strokeStyle = '#FFFFFF';\r\n        ctx.lineWidth = 2;\r\n        ctx.beginPath();\r\n        ctx.moveTo(halfWidth, 0);\r\n        ctx.lineTo(halfWidth, canvas.height);\r\n        ctx.stroke();\r\n    };\r\n\r\n    // Draw pose points on canvas\r\n    const drawPosePoints = (ctx, pose, x, y, width, height) => {\r\n        if (!pose || pose.length === 0) return;\r\n\r\n        // Draw connections\r\n        const connections = [\r\n            [11, 12], [11, 13], [13, 15], [12, 14], [14, 16], // Arms\r\n            [11, 23], [12, 24], [23, 24], // Torso\r\n            [23, 25], [25, 27], [24, 26], [26, 28] // Legs\r\n        ];\r\n\r\n        ctx.beginPath();\r\n        for (const [start, end] of connections) {\r\n            if (start < pose.length && end < pose.length) {\r\n                const startPoint = pose[start];\r\n                const endPoint = pose[end];\r\n                \r\n                if (startPoint.visibility > 0.5 && endPoint.visibility > 0.5) {\r\n                    ctx.moveTo(\r\n                        x + startPoint.x * width,\r\n                        y + startPoint.y * height\r\n                    );\r\n                    ctx.lineTo(\r\n                        x + endPoint.x * width,\r\n                        y + endPoint.y * height\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        ctx.stroke();\r\n\r\n        // Draw points\r\n        for (let i = 0; i < pose.length; i++) {\r\n            const point = pose[i];\r\n            if (point.visibility > 0.5) {\r\n                ctx.beginPath();\r\n                ctx.arc(\r\n                    x + point.x * width,\r\n                    y + point.y * height,\r\n                    4,\r\n                    0,\r\n                    2 * Math.PI\r\n                );\r\n                ctx.fill();\r\n            }\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"pose-comparison-loading\">\r\n                <div className=\"spinner\"></div>\r\n                <p>Loading pose detection...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"pose-comparison-error\">\r\n                <p>Error: {error}</p>\r\n                <button onClick={() => window.location.reload()}>\r\n                    Retry\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"real-time-pose-comparison\">\r\n            {/* Video Elements (hidden) */}\r\n            <video\r\n                ref={trainerVideoRef}\r\n                src={trainerVideoUrl}\r\n                style={{ display: 'none' }}\r\n                muted\r\n                loop\r\n                autoPlay\r\n            />\r\n            <video\r\n                ref={traineeVideoRef}\r\n                style={{ display: 'none' }}\r\n                autoPlay\r\n                muted\r\n                playsInline\r\n            />\r\n\r\n            {/* Display Canvases - Layout ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ */}\r\n            <div className=\"pose-display-container\">\r\n                <div className=\"trainee-display\">\r\n                    <div className=\"live-indicator\">üî¥ LIVE</div>\r\n                    <canvas\r\n                        ref={traineeCanvasRef}\r\n                        width={480}\r\n                        height={360}\r\n                        className=\"pose-canvas trainee-canvas\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"trainer-display\">\r\n                    <div className=\"playing-indicator\">‚ñ∂Ô∏è PLAYING</div>\r\n                    <canvas\r\n                        ref={trainerCanvasRef}\r\n                        width={480}\r\n                        height={360}\r\n                        className=\"pose-canvas trainer-canvas\"\r\n                    />\r\n                    <h3>Professional Demo</h3>\r\n                    <p>Follow the movement pattern</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Real-time Feedback Panel - ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ */}\r\n            <div className=\"feedback-panel\">\r\n                <div className=\"feedback-messages\">\r\n                    <div className=\"feedback-item warning\">\r\n                        <span className=\"feedback-icon\">‚ö†Ô∏è</span>\r\n                        <span className=\"feedback-text\">Left Knee: Keep knees aligned with toes</span>\r\n                    </div>\r\n                    <div className=\"feedback-item error\">\r\n                        <span className=\"feedback-icon\">üî¥</span>\r\n                        <span className=\"feedback-text\">Back: Keep chest up and spine neutral</span>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"score-display-compact\">\r\n                    <div className=\"progress-bar\">\r\n                        <div className=\"progress-fill\" style={{width: `${(similarityScore * 100)}%`}}></div>\r\n                    </div>\r\n                    <span className=\"score-text\">{(similarityScore * 100).toFixed(0)}%</span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Comparison Visualization */}\r\n            <div className=\"comparison-visualization\">\r\n                <h3>üìä Form Comparison</h3>\r\n                <canvas\r\n                    ref={comparisonCanvasRef}\r\n                    width={640}\r\n                    height={240}\r\n                    className=\"comparison-canvas\"\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RealTimePoseComparison;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}