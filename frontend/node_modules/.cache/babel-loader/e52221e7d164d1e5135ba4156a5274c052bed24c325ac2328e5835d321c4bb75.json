{"ast":null,"code":"// KeypointsService.js - Service à¸ªà¸³à¸«à¸£à¸±à¸šà¸ˆà¸±à¸”à¸à¸²à¸£ keypoints à¹à¸¥à¸°à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š pose\n\nclass KeypointsService {\n  constructor(baseURL = 'http://localhost:8000') {\n    this.baseURL = baseURL;\n  }\n\n  // à¸­à¸±à¸žà¹‚à¸«à¸¥à¸” keypoints à¸ªà¸³à¸«à¸£à¸±à¸š video segment\n  async uploadKeypoints(videoId, segmentId, keypointsData) {\n    try {\n      const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/upload`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          keypoints_data: keypointsData\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error uploading keypoints:', error);\n      throw error;\n    }\n  }\n\n  // à¹‚à¸«à¸¥à¸” keypoints à¸ªà¸³à¸«à¸£à¸±à¸š video segment\n  async loadKeypoints(videoId, segmentId) {\n    try {\n      const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/load`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error loading keypoints:', error);\n      throw error;\n    }\n  }\n\n  // ðŸŽ¯ Core Function: à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š keypoints à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ trainer à¹à¸¥à¸° trainee\n  calculatePoseAccuracy(trainerPose, traineePose) {\n    if (!trainerPose || !traineePose || trainerPose.length !== traineePose.length) {\n      return 0;\n    }\n\n    // à¸à¸£à¸­à¸‡à¹€à¸‰à¸žà¸²à¸°à¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¸¡à¸µ visibility > 0.5\n    const validPairs = [];\n    for (let i = 0; i < trainerPose.length; i++) {\n      if (trainerPose[i].visibility > 0.5 && traineePose[i].visibility > 0.5) {\n        validPairs.push({\n          trainer: trainerPose[i],\n          trainee: traineePose[i]\n        });\n      }\n    }\n    if (validPairs.length === 0) return 0;\n\n    // à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 1: Cosine Similarity\n    const cosineSim = this.calculateCosineSimilarity(trainerPose, traineePose);\n\n    // à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 2: Angle Similarity (à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸ªà¸³à¸„à¸±à¸)\n    const angleSim = this.calculateAngleSimilarity(trainerPose, traineePose);\n\n    // à¸£à¸§à¸¡à¸„à¸°à¹à¸™à¸™à¸—à¸±à¹‰à¸‡à¸ªà¸­à¸‡à¸§à¸´à¸˜à¸µ (60% angle + 40% cosine)\n    const finalScore = Math.round(angleSim * 0.6 + cosineSim * 0.4);\n    return Math.max(0, Math.min(100, finalScore));\n  }\n\n  // à¸„à¸³à¸™à¸§à¸“ Cosine Similarity\n  calculateCosineSimilarity(trainerPose, traineePose) {\n    const flatten = pose => pose.flatMap(p => [p.x, p.y]);\n    const trainerVector = flatten(trainerPose);\n    const traineeVector = flatten(traineePose);\n    let dot = 0,\n      normA = 0,\n      normB = 0;\n    for (let i = 0; i < trainerVector.length; i++) {\n      dot += trainerVector[i] * traineeVector[i];\n      normA += trainerVector[i] ** 2;\n      normB += traineeVector[i] ** 2;\n    }\n    const similarity = dot / (Math.sqrt(normA) * Math.sqrt(normB));\n    return Math.round(similarity * 100);\n  }\n\n  // à¸„à¸³à¸™à¸§à¸“ Angle Similarity à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸ªà¸³à¸„à¸±à¸\n  calculateAngleSimilarity(trainerPose, traineePose) {\n    // à¸ˆà¸¸à¸”à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸ªà¸³à¸„à¸±à¸ [à¸ˆà¸¸à¸”à¸—à¸µà¹ˆ1, à¸ˆà¸¸à¸”à¸à¸¥à¸²à¸‡, à¸ˆà¸¸à¸”à¸—à¸µà¹ˆ3]\n    const joints = [[11, 13, 15],\n    // à¹à¸‚à¸™à¸‹à¹‰à¸²à¸¢ (à¹„à¸«à¸¥à¹ˆ-à¸¨à¸­à¸-à¸‚à¹‰à¸­à¸¡à¸·à¸­)\n    [12, 14, 16],\n    // à¹à¸‚à¸™à¸‚à¸§à¸² (à¹„à¸«à¸¥à¹ˆ-à¸¨à¸­à¸-à¸‚à¹‰à¸­à¸¡à¸·à¸­)\n    [23, 25, 27],\n    // à¸‚à¸²à¸‹à¹‰à¸²à¸¢ (à¸ªà¸°à¹‚à¸žà¸-à¹€à¸‚à¹ˆà¸²-à¸‚à¹‰à¸­à¹€à¸—à¹‰à¸²)\n    [24, 26, 28],\n    // à¸‚à¸²à¸‚à¸§à¸² (à¸ªà¸°à¹‚à¸žà¸-à¹€à¸‚à¹ˆà¸²-à¸‚à¹‰à¸­à¹€à¸—à¹‰à¸²)\n    [11, 23, 25],\n    // à¸¥à¸³à¸•à¸±à¸§à¸‹à¹‰à¸²à¸¢ (à¹„à¸«à¸¥à¹ˆ-à¸ªà¸°à¹‚à¸žà¸-à¹€à¸‚à¹ˆà¸²)\n    [12, 24, 26] // à¸¥à¸³à¸•à¸±à¸§à¸‚à¸§à¸² (à¹„à¸«à¸¥à¹ˆ-à¸ªà¸°à¹‚à¸žà¸-à¹€à¸‚à¹ˆà¸²)\n    ];\n    let totalDiff = 0;\n    let validJoints = 0;\n    joints.forEach(([a, b, c]) => {\n      if (this.isValidJoint(trainerPose, a, b, c) && this.isValidJoint(traineePose, a, b, c)) {\n        const trainerAngle = this.calculateAngle(trainerPose[a], trainerPose[b], trainerPose[c]);\n        const traineeAngle = this.calculateAngle(traineePose[a], traineePose[b], traineePose[c]);\n        const angleDiff = Math.abs(trainerAngle - traineeAngle);\n        totalDiff += Math.min(angleDiff, 180 - angleDiff); // à¹ƒà¸Šà¹‰à¸¡à¸¸à¸¡à¸—à¸µà¹ˆà¹€à¸¥à¹‡à¸à¸à¸§à¹ˆà¸²\n        validJoints++;\n      }\n    });\n    if (validJoints === 0) return 0;\n    const avgDiff = totalDiff / validJoints;\n    // à¹à¸›à¸¥à¸‡à¸œà¸¥à¸•à¹ˆà¸²à¸‡à¸¡à¸¸à¸¡à¹€à¸›à¹‡à¸™à¸„à¸°à¹à¸™à¸™ (à¸¡à¸¸à¸¡à¸•à¹ˆà¸²à¸‡ 0Â° = 100%, à¸¡à¸¸à¸¡à¸•à¹ˆà¸²à¸‡ 45Â° = 0%)\n    const score = Math.max(0, 100 - avgDiff * 100 / 45);\n    return Math.round(score);\n  }\n\n  // à¸„à¸³à¸™à¸§à¸“à¸¡à¸¸à¸¡à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ 3 à¸ˆà¸¸à¸”\n  calculateAngle(p1, p2, p3) {\n    const a = Math.hypot(p2.x - p3.x, p2.y - p3.y);\n    const b = Math.hypot(p1.x - p3.x, p1.y - p3.y);\n    const c = Math.hypot(p1.x - p2.x, p1.y - p2.y);\n    const angle = Math.acos((b ** 2 + c ** 2 - a ** 2) / (2 * b * c));\n    return angle * (180 / Math.PI);\n  }\n\n  // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸¡à¸µ visibility à¸”à¸µà¸žà¸­à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ\n  isValidJoint(pose, a, b, c) {\n    var _pose$a, _pose$b, _pose$c;\n    return ((_pose$a = pose[a]) === null || _pose$a === void 0 ? void 0 : _pose$a.visibility) > 0.5 && ((_pose$b = pose[b]) === null || _pose$b === void 0 ? void 0 : _pose$b.visibility) > 0.5 && ((_pose$c = pose[c]) === null || _pose$c === void 0 ? void 0 : _pose$c.visibility) > 0.5;\n  }\n\n  // ðŸŽ¨ à¸ªà¸£à¹‰à¸²à¸‡ feedback à¸•à¸²à¸¡à¸„à¸°à¹à¸™à¸™ - 3 à¸£à¸°à¸”à¸±à¸šà¸ªà¸µ\n  generateFeedback(accuracy) {\n    if (accuracy > 70) {\n      // ðŸŸ¢ à¹€à¸‚à¸µà¸¢à¸§ - à¸—à¹ˆà¸²à¸”à¸µà¸¡à¸²à¸ à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡\n      return {\n        level: \"excellent\",\n        message: \"Excellent! âœ… à¸—à¹ˆà¸²à¸”à¸µà¸¡à¸²à¸ à¹€à¸¢à¸µà¹ˆà¸¢à¸¡à¹€à¸¥à¸¢!\",\n        color: \"#22c55e\",\n        // à¹€à¸‚à¸µà¸¢à¸§à¸¡à¸°à¸™à¸²à¸§\n        bgColor: \"rgba(34, 197, 94, 0.1)\",\n        emoji: \"âœ…\"\n      };\n    } else if (accuracy > 50) {\n      // ðŸŸ¡ à¹€à¸«à¸¥à¸·à¸­à¸‡ - à¸žà¸­à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ à¸•à¹‰à¸­à¸‡à¸›à¸£à¸±à¸šà¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢\n      return {\n        level: \"almost-there\",\n        message: \"Almost There! âš ï¸ à¹€à¸à¸·à¸­à¸šà¸”à¸µà¹à¸¥à¹‰à¸§ à¸£à¸±à¸à¸©à¸²à¸—à¸£à¸‡à¸­à¸µà¸à¸™à¸´à¸”\",\n        color: \"#eab308\",\n        // à¹€à¸«à¸¥à¸·à¸­à¸‡à¸—à¸­à¸‡\n        bgColor: \"rgba(234, 179, 8, 0.1)\",\n        emoji: \"âš ï¸\"\n      };\n    } else {\n      // ðŸ”´ à¹à¸”à¸‡ - à¸—à¹ˆà¸²à¸œà¸´à¸”à¸¡à¸²à¸ à¸•à¹‰à¸­à¸‡à¸›à¸£à¸±à¸šà¹€à¸¢à¸­à¸°\n      return {\n        level: \"needs-adjustment\",\n        message: \"Incorrect Posture âŒ à¸¥à¸­à¸‡à¸›à¸£à¸±à¸šà¸—à¹ˆà¸²à¸­à¸µà¸à¸«à¸™à¹ˆà¸­à¸¢à¸™à¸°\",\n        color: \"#ef4444\",\n        // à¹à¸”à¸‡à¸ªà¸”\n        bgColor: \"rgba(239, 68, 68, 0.1)\",\n        emoji: \"âŒ\"\n      };\n    }\n  }\n\n  // à¸„à¸³à¸™à¸§à¸“à¸„à¸°à¹à¸™à¸™à¹€à¸‰à¸¥à¸µà¹ˆà¸¢à¸ªà¸³à¸«à¸£à¸±à¸š session\n  calculateSessionScore(accuracyHistory) {\n    if (!accuracyHistory || accuracyHistory.length === 0) return 0;\n    const sum = accuracyHistory.reduce((acc, val) => acc + val, 0);\n    return Math.round(sum / accuracyHistory.length);\n  }\n\n  // à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡\n  analyzeWeakPoints(trainerPose, traineePose) {\n    const joints = {\n      'Left Arm': [11, 13, 15],\n      'Right Arm': [12, 14, 16],\n      'Left Leg': [23, 25, 27],\n      'Right Leg': [24, 26, 28],\n      'Core': [11, 23, 24]\n    };\n    const analysis = {};\n    Object.entries(joints).forEach(([jointName, [a, b, c]]) => {\n      if (this.isValidJoint(trainerPose, a, b, c) && this.isValidJoint(traineePose, a, b, c)) {\n        const trainerAngle = this.calculateAngle(trainerPose[a], trainerPose[b], trainerPose[c]);\n        const traineeAngle = this.calculateAngle(traineePose[a], traineePose[b], traineePose[c]);\n        const diff = Math.abs(trainerAngle - traineeAngle);\n        analysis[jointName] = {\n          accuracy: Math.max(0, 100 - diff * 100 / 45),\n          needsImprovement: diff > 15\n        };\n      }\n    });\n    return analysis;\n  }\n\n  // ðŸŽ¨ Helper functions à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸µ 3 à¸£à¸°à¸”à¸±à¸š\n  getFeedbackColor(score) {\n    if (score <= 50) return \"#ef4444\"; // ðŸ”´ Red\n    if (score <= 70) return \"#eab308\"; // ðŸŸ¡ Yellow\n    return \"#22c55e\"; // ðŸŸ¢ Green\n  }\n  getFeedbackBackgroundColor(score) {\n    if (score <= 50) return \"rgba(239, 68, 68, 0.1)\"; // ðŸ”´ Red background\n    if (score <= 70) return \"rgba(234, 179, 8, 0.1)\"; // ðŸŸ¡ Yellow background\n    return \"rgba(34, 197, 94, 0.1)\"; // ðŸŸ¢ Green background\n  }\n  getFeedbackEmoji(score) {\n    if (score <= 50) return \"âŒ\"; // ðŸ”´ Red\n    if (score <= 70) return \"âš ï¸\"; // ðŸŸ¡ Yellow\n    return \"âœ…\"; // ðŸŸ¢ Green\n  }\n  getFeedbackText(score) {\n    if (score <= 50) return \"Incorrect Posture\";\n    if (score <= 70) return \"Almost There!\";\n    return \"Excellent!\";\n  }\n}\nexport default KeypointsService;","map":{"version":3,"names":["KeypointsService","constructor","baseURL","uploadKeypoints","videoId","segmentId","keypointsData","response","fetch","method","headers","body","JSON","stringify","keypoints_data","ok","Error","status","json","error","console","loadKeypoints","calculatePoseAccuracy","trainerPose","traineePose","length","validPairs","i","visibility","push","trainer","trainee","cosineSim","calculateCosineSimilarity","angleSim","calculateAngleSimilarity","finalScore","Math","round","max","min","flatten","pose","flatMap","p","x","y","trainerVector","traineeVector","dot","normA","normB","similarity","sqrt","joints","totalDiff","validJoints","forEach","a","b","c","isValidJoint","trainerAngle","calculateAngle","traineeAngle","angleDiff","abs","avgDiff","score","p1","p2","p3","hypot","angle","acos","PI","_pose$a","_pose$b","_pose$c","generateFeedback","accuracy","level","message","color","bgColor","emoji","calculateSessionScore","accuracyHistory","sum","reduce","acc","val","analyzeWeakPoints","analysis","Object","entries","jointName","diff","needsImprovement","getFeedbackColor","getFeedbackBackgroundColor","getFeedbackEmoji","getFeedbackText"],"sources":["C:/Fit/frontend/src/services/KeypointsService.js"],"sourcesContent":["// KeypointsService.js - Service à¸ªà¸³à¸«à¸£à¸±à¸šà¸ˆà¸±à¸”à¸à¸²à¸£ keypoints à¹à¸¥à¸°à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š pose\r\n\r\nclass KeypointsService {\r\n    constructor(baseURL = 'http://localhost:8000') {\r\n        this.baseURL = baseURL;\r\n    }\r\n\r\n    // à¸­à¸±à¸žà¹‚à¸«à¸¥à¸” keypoints à¸ªà¸³à¸«à¸£à¸±à¸š video segment\r\n    async uploadKeypoints(videoId, segmentId, keypointsData) {\r\n        try {\r\n            const response = await fetch(\r\n                `${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/upload`,\r\n                {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({\r\n                        keypoints_data: keypointsData\r\n                    })\r\n                }\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Error uploading keypoints:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // à¹‚à¸«à¸¥à¸” keypoints à¸ªà¸³à¸«à¸£à¸±à¸š video segment\r\n    async loadKeypoints(videoId, segmentId) {\r\n        try {\r\n            const response = await fetch(\r\n                `${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/load`\r\n            );\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n\r\n            return await response.json();\r\n        } catch (error) {\r\n            console.error('Error loading keypoints:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // ðŸŽ¯ Core Function: à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š keypoints à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ trainer à¹à¸¥à¸° trainee\r\n    calculatePoseAccuracy(trainerPose, traineePose) {\r\n        if (!trainerPose || !traineePose || \r\n            trainerPose.length !== traineePose.length) {\r\n            return 0;\r\n        }\r\n\r\n        // à¸à¸£à¸­à¸‡à¹€à¸‰à¸žà¸²à¸°à¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¸¡à¸µ visibility > 0.5\r\n        const validPairs = [];\r\n        for (let i = 0; i < trainerPose.length; i++) {\r\n            if (trainerPose[i].visibility > 0.5 && traineePose[i].visibility > 0.5) {\r\n                validPairs.push({ trainer: trainerPose[i], trainee: traineePose[i] });\r\n            }\r\n        }\r\n\r\n        if (validPairs.length === 0) return 0;\r\n\r\n        // à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 1: Cosine Similarity\r\n        const cosineSim = this.calculateCosineSimilarity(trainerPose, traineePose);\r\n        \r\n        // à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 2: Angle Similarity (à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸ªà¸³à¸„à¸±à¸)\r\n        const angleSim = this.calculateAngleSimilarity(trainerPose, traineePose);\r\n        \r\n        // à¸£à¸§à¸¡à¸„à¸°à¹à¸™à¸™à¸—à¸±à¹‰à¸‡à¸ªà¸­à¸‡à¸§à¸´à¸˜à¸µ (60% angle + 40% cosine)\r\n        const finalScore = Math.round(angleSim * 0.6 + cosineSim * 0.4);\r\n        \r\n        return Math.max(0, Math.min(100, finalScore));\r\n    }\r\n\r\n    // à¸„à¸³à¸™à¸§à¸“ Cosine Similarity\r\n    calculateCosineSimilarity(trainerPose, traineePose) {\r\n        const flatten = (pose) => pose.flatMap(p => [p.x, p.y]);\r\n        const trainerVector = flatten(trainerPose);\r\n        const traineeVector = flatten(traineePose);\r\n\r\n        let dot = 0, normA = 0, normB = 0;\r\n        for (let i = 0; i < trainerVector.length; i++) {\r\n            dot += trainerVector[i] * traineeVector[i];\r\n            normA += trainerVector[i] ** 2;\r\n            normB += traineeVector[i] ** 2;\r\n        }\r\n\r\n        const similarity = dot / (Math.sqrt(normA) * Math.sqrt(normB));\r\n        return Math.round(similarity * 100);\r\n    }\r\n\r\n    // à¸„à¸³à¸™à¸§à¸“ Angle Similarity à¸ªà¸³à¸«à¸£à¸±à¸šà¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸ªà¸³à¸„à¸±à¸\r\n    calculateAngleSimilarity(trainerPose, traineePose) {\r\n        // à¸ˆà¸¸à¸”à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸ªà¸³à¸„à¸±à¸ [à¸ˆà¸¸à¸”à¸—à¸µà¹ˆ1, à¸ˆà¸¸à¸”à¸à¸¥à¸²à¸‡, à¸ˆà¸¸à¸”à¸—à¸µà¹ˆ3]\r\n        const joints = [\r\n            [11, 13, 15], // à¹à¸‚à¸™à¸‹à¹‰à¸²à¸¢ (à¹„à¸«à¸¥à¹ˆ-à¸¨à¸­à¸-à¸‚à¹‰à¸­à¸¡à¸·à¸­)\r\n            [12, 14, 16], // à¹à¸‚à¸™à¸‚à¸§à¸² (à¹„à¸«à¸¥à¹ˆ-à¸¨à¸­à¸-à¸‚à¹‰à¸­à¸¡à¸·à¸­)\r\n            [23, 25, 27], // à¸‚à¸²à¸‹à¹‰à¸²à¸¢ (à¸ªà¸°à¹‚à¸žà¸-à¹€à¸‚à¹ˆà¸²-à¸‚à¹‰à¸­à¹€à¸—à¹‰à¸²)\r\n            [24, 26, 28], // à¸‚à¸²à¸‚à¸§à¸² (à¸ªà¸°à¹‚à¸žà¸-à¹€à¸‚à¹ˆà¸²-à¸‚à¹‰à¸­à¹€à¸—à¹‰à¸²)\r\n            [11, 23, 25], // à¸¥à¸³à¸•à¸±à¸§à¸‹à¹‰à¸²à¸¢ (à¹„à¸«à¸¥à¹ˆ-à¸ªà¸°à¹‚à¸žà¸-à¹€à¸‚à¹ˆà¸²)\r\n            [12, 24, 26], // à¸¥à¸³à¸•à¸±à¸§à¸‚à¸§à¸² (à¹„à¸«à¸¥à¹ˆ-à¸ªà¸°à¹‚à¸žà¸-à¹€à¸‚à¹ˆà¸²)\r\n        ];\r\n\r\n        let totalDiff = 0;\r\n        let validJoints = 0;\r\n\r\n        joints.forEach(([a, b, c]) => {\r\n            if (this.isValidJoint(trainerPose, a, b, c) && \r\n                this.isValidJoint(traineePose, a, b, c)) {\r\n                \r\n                const trainerAngle = this.calculateAngle(\r\n                    trainerPose[a], trainerPose[b], trainerPose[c]\r\n                );\r\n                const traineeAngle = this.calculateAngle(\r\n                    traineePose[a], traineePose[b], traineePose[c]\r\n                );\r\n                \r\n                const angleDiff = Math.abs(trainerAngle - traineeAngle);\r\n                totalDiff += Math.min(angleDiff, 180 - angleDiff); // à¹ƒà¸Šà¹‰à¸¡à¸¸à¸¡à¸—à¸µà¹ˆà¹€à¸¥à¹‡à¸à¸à¸§à¹ˆà¸²\r\n                validJoints++;\r\n            }\r\n        });\r\n\r\n        if (validJoints === 0) return 0;\r\n\r\n        const avgDiff = totalDiff / validJoints;\r\n        // à¹à¸›à¸¥à¸‡à¸œà¸¥à¸•à¹ˆà¸²à¸‡à¸¡à¸¸à¸¡à¹€à¸›à¹‡à¸™à¸„à¸°à¹à¸™à¸™ (à¸¡à¸¸à¸¡à¸•à¹ˆà¸²à¸‡ 0Â° = 100%, à¸¡à¸¸à¸¡à¸•à¹ˆà¸²à¸‡ 45Â° = 0%)\r\n        const score = Math.max(0, 100 - (avgDiff * 100 / 45));\r\n        return Math.round(score);\r\n    }\r\n\r\n    // à¸„à¸³à¸™à¸§à¸“à¸¡à¸¸à¸¡à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ 3 à¸ˆà¸¸à¸”\r\n    calculateAngle(p1, p2, p3) {\r\n        const a = Math.hypot(p2.x - p3.x, p2.y - p3.y);\r\n        const b = Math.hypot(p1.x - p3.x, p1.y - p3.y);\r\n        const c = Math.hypot(p1.x - p2.x, p1.y - p2.y);\r\n        \r\n        const angle = Math.acos((b ** 2 + c ** 2 - a ** 2) / (2 * b * c));\r\n        return angle * (180 / Math.PI);\r\n    }\r\n\r\n    // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸¡à¸µ visibility à¸”à¸µà¸žà¸­à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ\r\n    isValidJoint(pose, a, b, c) {\r\n        return pose[a]?.visibility > 0.5 && \r\n               pose[b]?.visibility > 0.5 && \r\n               pose[c]?.visibility > 0.5;\r\n    }\r\n\r\n    // ðŸŽ¨ à¸ªà¸£à¹‰à¸²à¸‡ feedback à¸•à¸²à¸¡à¸„à¸°à¹à¸™à¸™ - 3 à¸£à¸°à¸”à¸±à¸šà¸ªà¸µ\r\n    generateFeedback(accuracy) {\r\n        if (accuracy > 70) {\r\n            // ðŸŸ¢ à¹€à¸‚à¸µà¸¢à¸§ - à¸—à¹ˆà¸²à¸”à¸µà¸¡à¸²à¸ à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡\r\n            return {\r\n                level: \"excellent\",\r\n                message: \"Excellent! âœ… à¸—à¹ˆà¸²à¸”à¸µà¸¡à¸²à¸ à¹€à¸¢à¸µà¹ˆà¸¢à¸¡à¹€à¸¥à¸¢!\",\r\n                color: \"#22c55e\", // à¹€à¸‚à¸µà¸¢à¸§à¸¡à¸°à¸™à¸²à¸§\r\n                bgColor: \"rgba(34, 197, 94, 0.1)\",\r\n                emoji: \"âœ…\"\r\n            };\r\n        } else if (accuracy > 50) {\r\n            // ðŸŸ¡ à¹€à¸«à¸¥à¸·à¸­à¸‡ - à¸žà¸­à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ à¸•à¹‰à¸­à¸‡à¸›à¸£à¸±à¸šà¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢\r\n            return {\r\n                level: \"almost-there\",\r\n                message: \"Almost There! âš ï¸ à¹€à¸à¸·à¸­à¸šà¸”à¸µà¹à¸¥à¹‰à¸§ à¸£à¸±à¸à¸©à¸²à¸—à¸£à¸‡à¸­à¸µà¸à¸™à¸´à¸”\",\r\n                color: \"#eab308\", // à¹€à¸«à¸¥à¸·à¸­à¸‡à¸—à¸­à¸‡\r\n                bgColor: \"rgba(234, 179, 8, 0.1)\",\r\n                emoji: \"âš ï¸\"\r\n            };\r\n        } else {\r\n            // ðŸ”´ à¹à¸”à¸‡ - à¸—à¹ˆà¸²à¸œà¸´à¸”à¸¡à¸²à¸ à¸•à¹‰à¸­à¸‡à¸›à¸£à¸±à¸šà¹€à¸¢à¸­à¸°\r\n            return {\r\n                level: \"needs-adjustment\",\r\n                message: \"Incorrect Posture âŒ à¸¥à¸­à¸‡à¸›à¸£à¸±à¸šà¸—à¹ˆà¸²à¸­à¸µà¸à¸«à¸™à¹ˆà¸­à¸¢à¸™à¸°\",\r\n                color: \"#ef4444\", // à¹à¸”à¸‡à¸ªà¸”\r\n                bgColor: \"rgba(239, 68, 68, 0.1)\",\r\n                emoji: \"âŒ\"\r\n            };\r\n        }\r\n    }\r\n\r\n    // à¸„à¸³à¸™à¸§à¸“à¸„à¸°à¹à¸™à¸™à¹€à¸‰à¸¥à¸µà¹ˆà¸¢à¸ªà¸³à¸«à¸£à¸±à¸š session\r\n    calculateSessionScore(accuracyHistory) {\r\n        if (!accuracyHistory || accuracyHistory.length === 0) return 0;\r\n        \r\n        const sum = accuracyHistory.reduce((acc, val) => acc + val, 0);\r\n        return Math.round(sum / accuracyHistory.length);\r\n    }\r\n\r\n    // à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡\r\n    analyzeWeakPoints(trainerPose, traineePose) {\r\n        const joints = {\r\n            'Left Arm': [11, 13, 15],\r\n            'Right Arm': [12, 14, 16],\r\n            'Left Leg': [23, 25, 27],\r\n            'Right Leg': [24, 26, 28],\r\n            'Core': [11, 23, 24]\r\n        };\r\n\r\n        const analysis = {};\r\n        \r\n        Object.entries(joints).forEach(([jointName, [a, b, c]]) => {\r\n            if (this.isValidJoint(trainerPose, a, b, c) && \r\n                this.isValidJoint(traineePose, a, b, c)) {\r\n                \r\n                const trainerAngle = this.calculateAngle(\r\n                    trainerPose[a], trainerPose[b], trainerPose[c]\r\n                );\r\n                const traineeAngle = this.calculateAngle(\r\n                    traineePose[a], traineePose[b], traineePose[c]\r\n                );\r\n                \r\n                const diff = Math.abs(trainerAngle - traineeAngle);\r\n                analysis[jointName] = {\r\n                    accuracy: Math.max(0, 100 - (diff * 100 / 45)),\r\n                    needsImprovement: diff > 15\r\n                };\r\n            }\r\n        });\r\n\r\n        return analysis;\r\n    }\r\n\r\n    // ðŸŽ¨ Helper functions à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¸µ 3 à¸£à¸°à¸”à¸±à¸š\r\n    getFeedbackColor(score) {\r\n        if (score <= 50) return \"#ef4444\"; // ðŸ”´ Red\r\n        if (score <= 70) return \"#eab308\"; // ðŸŸ¡ Yellow\r\n        return \"#22c55e\"; // ðŸŸ¢ Green\r\n    }\r\n\r\n    getFeedbackBackgroundColor(score) {\r\n        if (score <= 50) return \"rgba(239, 68, 68, 0.1)\"; // ðŸ”´ Red background\r\n        if (score <= 70) return \"rgba(234, 179, 8, 0.1)\"; // ðŸŸ¡ Yellow background\r\n        return \"rgba(34, 197, 94, 0.1)\"; // ðŸŸ¢ Green background\r\n    }\r\n\r\n    getFeedbackEmoji(score) {\r\n        if (score <= 50) return \"âŒ\"; // ðŸ”´ Red\r\n        if (score <= 70) return \"âš ï¸\"; // ðŸŸ¡ Yellow\r\n        return \"âœ…\"; // ðŸŸ¢ Green\r\n    }\r\n\r\n    getFeedbackText(score) {\r\n        if (score <= 50) return \"Incorrect Posture\";\r\n        if (score <= 70) return \"Almost There!\";\r\n        return \"Excellent!\";\r\n    }\r\n}\r\n\r\nexport default KeypointsService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}