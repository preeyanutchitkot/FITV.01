{"ast":null,"code":"var _jsxFileName = \"C:\\\\FitAddict\\\\frontend\\\\src\\\\pages\\\\UploadVideo.js\",\n  _s = $RefreshSig$();\n// src/pages/UploadVideo.jsx\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport TrainerHeader from \"../components/TrainerHeader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst box = (extra = {}) => ({\n  background: \"#fff\",\n  borderRadius: 16,\n  boxShadow: \"0 2px 12px rgba(0,0,0,0.06)\",\n  ...extra\n});\nexport default function UploadVideo() {\n  _s();\n  var _location$state;\n  // สถานะ loading เฉพาะปุ่ม save draft\n  const [submittingDraft, setSubmittingDraft] = useState(false);\n  // ฟังก์ชัน save draft (frontend only)\n  const handleSaveDraft = () => {\n    if (!name) {\n      alert(\"กรุณากรอกชื่อวิดีโอ\");\n      return;\n    }\n    // สร้าง draft object\n    const draft = {\n      id: Date.now(),\n      title: name,\n      difficulty: level,\n      kcal: kcal,\n      image: fileURL,\n      status: 'draft',\n      created_at: new Date().toISOString()\n    };\n    // เก็บไฟล์ใน localStorage (base64 ถ้ามีไฟล์)\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = function (e) {\n        draft.image = e.target.result;\n        saveDraftToStorage(draft);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      saveDraftToStorage(draft);\n    }\n    function saveDraftToStorage(draft) {\n      let drafts = JSON.parse(localStorage.getItem('trainer_drafts') || '[]');\n      // ถ้าแก้ไข draft เดิม ให้แทนที่\n      if (isEdit) {\n        drafts = drafts.filter(d => d.id !== Number(editId));\n      }\n      drafts.push(draft);\n      localStorage.setItem('trainer_drafts', JSON.stringify(drafts));\n      alert('บันทึก draft สำเร็จ!');\n      navigate('/trainer');\n    }\n  };\n  const navigate = useNavigate();\n  const location = useLocation();\n  const fileRef = useRef(null);\n\n  // NEW: แยกโหมดแก้ไขจาก state หรือ query (?id=)\n  const editId = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.videoId) || new URLSearchParams(location.search).get(\"id\");\n  const isEdit = !!editId;\n\n  // ฟอร์ม\n  const [file, setFile] = useState(null);\n  const [fileURL, setFileURL] = useState(\"\"); // ใช้ preview (ทั้งไฟล์ใหม่/ของเดิม)\n  const [name, setName] = useState(\"\");\n  const [kcal, setKcal] = useState(\"\");\n  const [level, setLevel] = useState(\"1\");\n  const [preview, setPreview] = useState(false);\n\n  // NEW: กันกดซ้ำ + แสดงสถานะตอนกำลังส่ง\n  const [submitting, setSubmitting] = useState(false);\n  const onPick = () => {\n    var _fileRef$current;\n    return (_fileRef$current = fileRef.current) === null || _fileRef$current === void 0 ? void 0 : _fileRef$current.click();\n  };\n  const onFileChange = e => {\n    var _e$target$files;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!f) return;\n    setFile(f);\n    setFileURL(URL.createObjectURL(f));\n  };\n  const onDrop = e => {\n    var _e$dataTransfer$files;\n    e.preventDefault();\n    const f = (_e$dataTransfer$files = e.dataTransfer.files) === null || _e$dataTransfer$files === void 0 ? void 0 : _e$dataTransfer$files[0];\n    if (!f) return;\n    setFile(f);\n    setFileURL(URL.createObjectURL(f));\n  };\n  const onDragOver = e => e.preventDefault();\n\n  // NEW: Prefill เมื่อเป็นโหมดแก้ไข (อ่านจาก state ก่อน, ไม่มีก็ค่อย GET /videos/:id)\n  useEffect(() => {\n    var _location$state2;\n    if (!isEdit) return;\n    // ถ้ามีข้อมูลมากับ state ก็เติมเลย (เร็วกว่า)\n    if ((_location$state2 = location.state) !== null && _location$state2 !== void 0 && _location$state2.video) {\n      const v = location.state.video;\n      setName(v.title || \"\");\n      setLevel(String(v.difficulty || v.level || \"1\"));\n      setKcal(v.kcal || \"\");\n      setFileURL(v.image || \"\");\n      return;\n    }\n    // ถ้าไม่มีใน state ให้ลองโหลดจาก localStorage\n    let drafts = JSON.parse(localStorage.getItem('trainer_drafts') || '[]');\n    const draft = drafts.find(d => d.id === Number(editId));\n    if (draft) {\n      setName(draft.title || \"\");\n      setLevel(String(draft.difficulty || \"1\"));\n      setKcal(draft.kcal || \"\");\n      setFileURL(draft.image || \"\");\n    }\n\n    // ไม่มีใน state -> ดึงจาก BE\n    (async () => {\n      try {\n        var _v$kcal, _v$description$match$, _v$description$match;\n        const token = localStorage.getItem(\"token\");\n        if (!token) return; // ไม่ล็อกอินจะดึงไม่ได้\n        const res = await fetch(`http://localhost:8000/videos/${editId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!res.ok) return;\n        const v = await res.json();\n        setName(v.title || \"\");\n        setLevel(String(v.difficulty || v.level || \"1\"));\n        setKcal((_v$kcal = v.kcal) !== null && _v$kcal !== void 0 ? _v$kcal : typeof v.description === \"string\" ? (_v$description$match$ = (_v$description$match = v.description.match(/kcal:(\\d+)/)) === null || _v$description$match === void 0 ? void 0 : _v$description$match[1]) !== null && _v$description$match$ !== void 0 ? _v$description$match$ : \"\" : \"\");\n        const url = v.s3_url && (!/^https?:\\/\\//i.test(v.s3_url) ? `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}` : v.s3_url);\n        setFileURL(url || \"\");\n      } catch {}\n    })();\n  }, [isEdit, editId, location.state]);\n\n  // CHANGED: อัปโหลดใหม่ (POST /videos) + เช็ค token + กันกดซ้ำ + แสดง error ชัดเจน\n  const handleCreate = async () => {\n    if (!file || !name) {\n      alert(\"กรุณาเลือกไฟล์และกรอกชื่อวิดีโอ\");\n      return;\n    }\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\n      return;\n    }\n    if (submitting) return;\n    setSubmitting(true);\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"title\", name);\n    formData.append(\"difficulty\", level);\n    formData.append(\"description\", `kcal:${kcal}`);\n    try {\n      const res = await fetch(\"http://localhost:8000/videos\", {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        // NEW: ส่ง Bearer token\n        body: formData\n      });\n      if (!res.ok) {\n        let detail = \"\";\n        try {\n          const data = await res.json();\n          detail = data.detail || \"\";\n        } catch {}\n        if (res.status === 401) {\n          alert(`อัพโหลดไม่สำเร็จ (401 Unauthorized)\\n${detail || \"Token ไม่ถูกต้องหรือไม่มีการส่ง\"}`);\n        } else if (res.status === 403) {\n          alert(\"อัพโหลดไม่สำเร็จ (403) — เฉพาะ Trainer เท่านั้น\");\n        } else {\n          alert(`อัพโหลดไม่สำเร็จ (${res.status}) ${detail}`);\n        }\n        return;\n      }\n      alert(\"อัพโหลดสำเร็จ!\");\n      navigate(\"/trainer\");\n    } catch (e) {\n      alert(\"เกิดข้อผิดพลาดในการอัพโหลด: \" + ((e === null || e === void 0 ? void 0 : e.message) || e));\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // NEW: โหมดแก้ไข (PUT /videos/:id + ออปชัน PUT /videos/:id/file ถ้าเลือกไฟล์ใหม่)\n  const handleUpdate = async () => {\n    if (!name) {\n      alert(\"กรุณากรอกชื่อวิดีโอ\");\n      return;\n    }\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\n      return;\n    }\n    if (submitting) return;\n    setSubmitting(true);\n\n    // 1) อัปเดต metadata\n    const metaRes = await fetch(`http://localhost:8000/videos/${editId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}` // NEW: ส่ง Bearer token\n      },\n      body: JSON.stringify({\n        title: name,\n        difficulty: level,\n        // ถ้า BE ใช้ int: Number(level)\n        description: `kcal:${kcal}`\n      })\n    });\n    if (!metaRes.ok) {\n      let detail = \"\";\n      try {\n        const data = await metaRes.json();\n        detail = data.detail || \"\";\n      } catch {}\n      alert(`อัปเดตไม่สำเร็จ (${metaRes.status}) ${detail}`);\n      setSubmitting(false);\n      return;\n    }\n\n    // 2) ถ้าเลือกไฟล์ใหม่ -> อัปเดตไฟล์\n    if (file) {\n      const fd = new FormData();\n      fd.append(\"file\", file);\n      const fileRes = await fetch(`http://localhost:8000/videos/${editId}/file`, {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        // NEW: ส่ง Bearer token\n        body: fd\n      });\n      if (!fileRes.ok) {\n        let detail = \"\";\n        try {\n          const data = await fileRes.json();\n          detail = data.detail || \"\";\n        } catch {}\n        alert(`อัปเดตไฟล์ไม่สำเร็จ (${fileRes.status}) ${detail}`);\n        setSubmitting(false);\n        return;\n      }\n    }\n    alert(\"อัปเดตเรียบร้อย\");\n    setSubmitting(false);\n    navigate(\"/trainer\");\n  };\n\n  // header user\n  const today = new Date().toLocaleDateString(\"en-GB\", {\n    day: \"numeric\",\n    month: \"long\",\n    year: \"numeric\"\n  });\n  let user = {\n    name: \"Trainer\"\n  };\n  try {\n    const userData = localStorage.getItem(\"user\");\n    if (userData) {\n      const userObj = JSON.parse(userData);\n      user = {\n        name: userObj.name || \"Trainer\",\n        picture: userObj.picture || \"/user (1).png\"\n      };\n    }\n  } catch {}\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: \"100vh\",\n      background: \"linear-gradient(135deg,#f8fafc 0%, #e2e8f0 100%)\",\n      fontFamily: \"Inter, system-ui, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(TrainerHeader, {\n      user: user,\n      date: today\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: 1200,\n        margin: \"0 auto\",\n        marginTop: \"12px\",\n        marginBottom: \"8px\",\n        display: \"flex\",\n        alignItems: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/trainer\"),\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 8,\n          background: \"linear-gradient(90deg,#a855f7 0%, #ff4d8b 100%)\",\n          color: \"#fff\",\n          fontWeight: 700,\n          border: \"none\",\n          borderRadius: 999,\n          padding: \"8px 22px 8px 16px\",\n          fontSize: \"1.08rem\",\n          boxShadow: \"0 2px 8px #a855f733\",\n          cursor: \"pointer\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"20\",\n          height: \"20\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          style: {\n            marginRight: 4\n          },\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12.5 15l-5-5 5-5\",\n            stroke: \"#fff\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), \"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: 1200,\n        margin: \"0 auto\",\n        padding: \"8px 16px 40px 16px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: box({\n          padding: 24,\n          marginTop: 8\n        }),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          onDrop: onDrop,\n          onDragOver: onDragOver,\n          style: {\n            border: \"2px dashed #d1d5db\",\n            borderRadius: 16,\n            padding: \"36px 20px\",\n            textAlign: \"center\",\n            color: \"#6b7280\",\n            background: \"#f8fafc\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 18,\n              fontWeight: 700,\n              color: \"#111827\",\n              marginBottom: 6\n            },\n            children: isEdit ? \"Replace video (optional)\" : \"Select video to upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 16\n            },\n            children: \"Or drag and drop it here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onPick,\n            style: {\n              background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\n              color: \"#fff\",\n              fontWeight: 700,\n              border: \"none\",\n              borderRadius: 10,\n              padding: \"10px 18px\",\n              cursor: \"pointer\"\n            },\n            children: \"Select video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileRef,\n            type: \"file\",\n            accept: \"video/*\",\n            onChange: onFileChange,\n            style: {\n              display: \"none\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this), file && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12,\n              color: \"#374151\"\n            },\n            children: [\"Selected: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: file.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 27\n            }, this), \" (\", Math.round(file.size / 1024 / 1024), \" MB)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"repeat(4,1fr)\",\n          gap: 16,\n          marginTop: 14\n        },\n        children: [{\n          title: \"Size and duration\",\n          desc: \"Maximum size: 30 GB, video duration: 60 minutes\"\n        }, {\n          title: \"File formats\",\n          desc: \"Recommended: .mp4 (others supported)\"\n        }, {\n          title: \"Video resolutions\",\n          desc: \"Better: 1080p/1440p/4K\"\n        }, {\n          title: \"Aspect ratios\",\n          desc: \"Recommended: 16:9\"\n        }].map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: \"14px 16px\"\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700,\n              color: \"#111827\",\n              marginBottom: 6\n            },\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 13,\n              color: \"#6b7280\",\n              lineHeight: 1.4\n            },\n            children: item.desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"1.1fr 1fr\",\n          gap: 20,\n          marginTop: 24\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: 20\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 20,\n                fontWeight: 800,\n                color: \"#111827\"\n              },\n              children: isEdit ? \"Edit details\" : \"Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPreview(p => !p),\n              style: {\n                border: \"1.5px solid #e5e7eb\",\n                background: \"#fff\",\n                color: \"#a855f7\",\n                borderRadius: 999,\n                padding: \"8px 14px\",\n                fontWeight: 700,\n                cursor: \"pointer\"\n              },\n              children: \"Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 18\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: name,\n              onChange: e => setName(e.target.value),\n              placeholder: \"e.g., Pushups \\u2013 Beginner Form\",\n              style: {\n                width: \"97%\",\n                padding: \"10px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #e5e7eb\",\n                outline: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 14\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Kcalories *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"0\",\n              value: kcal,\n              onChange: e => setKcal(e.target.value),\n              placeholder: \"e.g., 60\",\n              style: {\n                width: 240,\n                padding: \"10px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #e5e7eb\",\n                outline: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 14\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Level\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: level,\n              onChange: e => setLevel(e.target.value),\n              style: {\n                width: 180,\n                padding: \"10px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #e5e7eb\",\n                outline: \"none\",\n                background: \"#fff\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"Level 1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"Level 2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"Level 3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              gap: 12,\n              marginTop: 20\n            },\n            children: [isEdit ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleUpdate,\n              disabled: submitting // NEW: กันกดซ้ำ\n              ,\n              style: {\n                opacity: submitting ? 0.7 : 1,\n                // NEW: ฟีดแบ็กกำลังส่ง\n                background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\n                color: \"#fff\",\n                fontWeight: 700,\n                border: \"none\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submitting ? \"not-allowed\" : \"pointer\"\n              },\n              children: submitting ? \"Updating...\" : \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (window.confirm(\"ต้องรอ admin อนุมัติคลิปก่อนจึงจะเป็น Active\\nกดยืนยันเพื่อส่งคลิปเข้าสู่สถานะ Pending\")) {\n                  handleCreate();\n                }\n              },\n              disabled: submitting,\n              style: {\n                opacity: submitting ? 0.7 : 1,\n                background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\n                color: \"#fff\",\n                fontWeight: 700,\n                border: \"none\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submitting ? \"not-allowed\" : \"pointer\",\n                display: \"inline-flex\",\n                alignItems: \"center\",\n                gap: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: process.env.PUBLIC_URL + \"/UploadSimple.png\",\n                alt: \"upload\",\n                style: {\n                  width: 20,\n                  height: 20,\n                  marginRight: 6,\n                  verticalAlign: \"middle\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 19\n              }, this), submitting ? \"Uploading...\" : \"Public\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSaveDraft,\n              disabled: submittingDraft,\n              style: {\n                background: \"#e5e7eb\",\n                color: \"#111827\",\n                fontWeight: 700,\n                border: \"none\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submittingDraft ? \"not-allowed\" : \"pointer\",\n                opacity: submittingDraft ? 0.7 : 1\n              },\n              children: submittingDraft ? \"Saving...\" : \"Save draft\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (window.confirm('Discard changes and go back to Trainer page?')) {\n                  navigate('/trainer');\n                }\n              },\n              disabled: submitting,\n              style: {\n                background: \"#fff\",\n                color: \"#6b7280\",\n                fontWeight: 700,\n                border: \"1px solid #e5e7eb\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submitting ? \"not-allowed\" : \"pointer\"\n              },\n              children: \"Discard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: 16,\n            minHeight: 300,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          }),\n          children: !fileURL || !preview ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"100%\",\n              height: 320,\n              borderRadius: 12,\n              background: \"#e5e7eb\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              color: \"#6b7280\"\n            },\n            children: preview ? \"No video selected\" : \"Preview area\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n            src: fileURL,\n            controls: true,\n            style: {\n              width: \"100%\",\n              height: 320,\n              objectFit: \"cover\",\n              borderRadius: 12\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 274,\n    columnNumber: 5\n  }, this);\n}\n_s(UploadVideo, \"esEBzLlk+e6RVs0DsTYfFwSJaVE=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = UploadVideo;\nvar _c;\n$RefreshReg$(_c, \"UploadVideo\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","useLocation","TrainerHeader","jsxDEV","_jsxDEV","box","extra","background","borderRadius","boxShadow","UploadVideo","_s","_location$state","submittingDraft","setSubmittingDraft","handleSaveDraft","name","alert","draft","id","Date","now","title","difficulty","level","kcal","image","fileURL","status","created_at","toISOString","file","reader","FileReader","onload","e","target","result","saveDraftToStorage","readAsDataURL","drafts","JSON","parse","localStorage","getItem","isEdit","filter","d","Number","editId","push","setItem","stringify","navigate","location","fileRef","state","videoId","URLSearchParams","search","get","setFile","setFileURL","setName","setKcal","setLevel","preview","setPreview","submitting","setSubmitting","onPick","_fileRef$current","current","click","onFileChange","_e$target$files","f","files","URL","createObjectURL","onDrop","_e$dataTransfer$files","preventDefault","dataTransfer","onDragOver","_location$state2","video","v","String","find","_v$kcal","_v$description$match$","_v$description$match","token","res","fetch","headers","Authorization","ok","json","description","match","url","s3_url","test","replace","handleCreate","formData","FormData","append","method","body","detail","data","message","handleUpdate","metaRes","fd","fileRes","today","toLocaleDateString","day","month","year","user","userData","userObj","picture","style","minHeight","fontFamily","children","date","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","marginTop","marginBottom","display","alignItems","onClick","gap","color","fontWeight","border","padding","fontSize","cursor","width","height","fill","xmlns","marginRight","stroke","strokeWidth","strokeLinecap","strokeLinejoin","textAlign","ref","type","accept","onChange","Math","round","size","gridTemplateColumns","desc","map","item","idx","lineHeight","justifyContent","p","value","placeholder","outline","min","disabled","opacity","window","confirm","src","process","env","PUBLIC_URL","alt","verticalAlign","controls","objectFit","_c","$RefreshReg$"],"sources":["C:/FitAddict/frontend/src/pages/UploadVideo.js"],"sourcesContent":["// src/pages/UploadVideo.jsx\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport TrainerHeader from \"../components/TrainerHeader\";\r\n\r\nconst box = (extra = {}) => ({\r\n  background: \"#fff\",\r\n  borderRadius: 16,\r\n  boxShadow: \"0 2px 12px rgba(0,0,0,0.06)\",\r\n  ...extra,\r\n});\r\n\r\nexport default function UploadVideo() {\r\n  // สถานะ loading เฉพาะปุ่ม save draft\r\n  const [submittingDraft, setSubmittingDraft] = useState(false);\r\n  // ฟังก์ชัน save draft (frontend only)\r\n  const handleSaveDraft = () => {\r\n    if (!name) {\r\n      alert(\"กรุณากรอกชื่อวิดีโอ\");\r\n      return;\r\n    }\r\n    // สร้าง draft object\r\n    const draft = {\r\n      id: Date.now(),\r\n      title: name,\r\n      difficulty: level,\r\n      kcal: kcal,\r\n      image: fileURL,\r\n      status: 'draft',\r\n      created_at: new Date().toISOString(),\r\n    };\r\n    // เก็บไฟล์ใน localStorage (base64 ถ้ามีไฟล์)\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = function(e) {\r\n        draft.image = e.target.result;\r\n        saveDraftToStorage(draft);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    } else {\r\n      saveDraftToStorage(draft);\r\n    }\r\n    function saveDraftToStorage(draft) {\r\n      let drafts = JSON.parse(localStorage.getItem('trainer_drafts') || '[]');\r\n      // ถ้าแก้ไข draft เดิม ให้แทนที่\r\n      if (isEdit) {\r\n        drafts = drafts.filter(d => d.id !== Number(editId));\r\n      }\r\n      drafts.push(draft);\r\n      localStorage.setItem('trainer_drafts', JSON.stringify(drafts));\r\n      alert('บันทึก draft สำเร็จ!');\r\n      navigate('/trainer');\r\n    }\r\n  };\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const fileRef = useRef(null);\r\n\r\n  // NEW: แยกโหมดแก้ไขจาก state หรือ query (?id=)\r\n  const editId = location.state?.videoId || new URLSearchParams(location.search).get(\"id\");\r\n  const isEdit = !!editId;\r\n\r\n  // ฟอร์ม\r\n  const [file, setFile] = useState(null);\r\n  const [fileURL, setFileURL] = useState(\"\"); // ใช้ preview (ทั้งไฟล์ใหม่/ของเดิม)\r\n  const [name, setName] = useState(\"\");\r\n  const [kcal, setKcal] = useState(\"\");\r\n  const [level, setLevel] = useState(\"1\");\r\n  const [preview, setPreview] = useState(false);\r\n\r\n  // NEW: กันกดซ้ำ + แสดงสถานะตอนกำลังส่ง\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const onPick = () => fileRef.current?.click();\r\n  const onFileChange = (e) => {\r\n    const f = e.target.files?.[0];\r\n    if (!f) return;\r\n    setFile(f);\r\n    setFileURL(URL.createObjectURL(f));\r\n  };\r\n  const onDrop = (e) => {\r\n    e.preventDefault();\r\n    const f = e.dataTransfer.files?.[0];\r\n    if (!f) return;\r\n    setFile(f);\r\n    setFileURL(URL.createObjectURL(f));\r\n  };\r\n  const onDragOver = (e) => e.preventDefault();\r\n\r\n  // NEW: Prefill เมื่อเป็นโหมดแก้ไข (อ่านจาก state ก่อน, ไม่มีก็ค่อย GET /videos/:id)\r\n  useEffect(() => {\r\n    if (!isEdit) return;\r\n    // ถ้ามีข้อมูลมากับ state ก็เติมเลย (เร็วกว่า)\r\n    if (location.state?.video) {\r\n      const v = location.state.video;\r\n      setName(v.title || \"\");\r\n      setLevel(String(v.difficulty || v.level || \"1\"));\r\n      setKcal(v.kcal || \"\");\r\n      setFileURL(v.image || \"\");\r\n      return;\r\n    }\r\n    // ถ้าไม่มีใน state ให้ลองโหลดจาก localStorage\r\n    let drafts = JSON.parse(localStorage.getItem('trainer_drafts') || '[]');\r\n    const draft = drafts.find(d => d.id === Number(editId));\r\n    if (draft) {\r\n      setName(draft.title || \"\");\r\n      setLevel(String(draft.difficulty || \"1\"));\r\n      setKcal(draft.kcal || \"\");\r\n      setFileURL(draft.image || \"\");\r\n    }\r\n\r\n    // ไม่มีใน state -> ดึงจาก BE\r\n    (async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) return; // ไม่ล็อกอินจะดึงไม่ได้\r\n        const res = await fetch(`http://localhost:8000/videos/${editId}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        if (!res.ok) return;\r\n        const v = await res.json();\r\n        setName(v.title || \"\");\r\n        setLevel(String(v.difficulty || v.level || \"1\"));\r\n        setKcal(\r\n          v.kcal ??\r\n            (typeof v.description === \"string\"\r\n              ? (v.description.match(/kcal:(\\d+)/)?.[1] ?? \"\")\r\n              : \"\")\r\n        );\r\n        const url =\r\n          v.s3_url &&\r\n          (!/^https?:\\/\\//i.test(v.s3_url)\r\n            ? `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}`\r\n            : v.s3_url);\r\n        setFileURL(url || \"\");\r\n      } catch {}\r\n    })();\r\n  }, [isEdit, editId, location.state]);\r\n\r\n  // CHANGED: อัปโหลดใหม่ (POST /videos) + เช็ค token + กันกดซ้ำ + แสดง error ชัดเจน\r\n  const handleCreate = async () => {\r\n    if (!file || !name) {\r\n      alert(\"กรุณาเลือกไฟล์และกรอกชื่อวิดีโอ\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\r\n      return;\r\n    }\r\n    if (submitting) return;\r\n    setSubmitting(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"title\", name);\r\n    formData.append(\"difficulty\", level);\r\n    formData.append(\"description\", `kcal:${kcal}`);\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:8000/videos\", {\r\n        method: \"POST\",\r\n        headers: { Authorization: `Bearer ${token}` }, // NEW: ส่ง Bearer token\r\n        body: formData,\r\n      });\r\n      if (!res.ok) {\r\n        let detail = \"\";\r\n        try {\r\n          const data = await res.json();\r\n          detail = data.detail || \"\";\r\n        } catch {}\r\n        if (res.status === 401) {\r\n          alert(`อัพโหลดไม่สำเร็จ (401 Unauthorized)\\n${detail || \"Token ไม่ถูกต้องหรือไม่มีการส่ง\"}`);\r\n        } else if (res.status === 403) {\r\n          alert(\"อัพโหลดไม่สำเร็จ (403) — เฉพาะ Trainer เท่านั้น\");\r\n        } else {\r\n          alert(`อัพโหลดไม่สำเร็จ (${res.status}) ${detail}`);\r\n        }\r\n        return;\r\n      }\r\n      alert(\"อัพโหลดสำเร็จ!\");\r\n      navigate(\"/trainer\");\r\n    } catch (e) {\r\n      alert(\"เกิดข้อผิดพลาดในการอัพโหลด: \" + (e?.message || e));\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // NEW: โหมดแก้ไข (PUT /videos/:id + ออปชัน PUT /videos/:id/file ถ้าเลือกไฟล์ใหม่)\r\n  const handleUpdate = async () => {\r\n    if (!name) {\r\n      alert(\"กรุณากรอกชื่อวิดีโอ\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\r\n      return;\r\n    }\r\n    if (submitting) return;\r\n    setSubmitting(true);\r\n\r\n    // 1) อัปเดต metadata\r\n    const metaRes = await fetch(`http://localhost:8000/videos/${editId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`, // NEW: ส่ง Bearer token\r\n      },\r\n      body: JSON.stringify({\r\n        title: name,\r\n        difficulty: level, // ถ้า BE ใช้ int: Number(level)\r\n        description: `kcal:${kcal}`,\r\n      }),\r\n    });\r\n    if (!metaRes.ok) {\r\n      let detail = \"\";\r\n      try {\r\n        const data = await metaRes.json();\r\n        detail = data.detail || \"\";\r\n      } catch {}\r\n      alert(`อัปเดตไม่สำเร็จ (${metaRes.status}) ${detail}`);\r\n      setSubmitting(false);\r\n      return;\r\n    }\r\n\r\n    // 2) ถ้าเลือกไฟล์ใหม่ -> อัปเดตไฟล์\r\n    if (file) {\r\n      const fd = new FormData();\r\n      fd.append(\"file\", file);\r\n      const fileRes = await fetch(`http://localhost:8000/videos/${editId}/file`, {\r\n        method: \"PUT\",\r\n        headers: { Authorization: `Bearer ${token}` }, // NEW: ส่ง Bearer token\r\n        body: fd,\r\n      });\r\n      if (!fileRes.ok) {\r\n        let detail = \"\";\r\n        try {\r\n          const data = await fileRes.json();\r\n          detail = data.detail || \"\";\r\n        } catch {}\r\n        alert(`อัปเดตไฟล์ไม่สำเร็จ (${fileRes.status}) ${detail}`);\r\n        setSubmitting(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    alert(\"อัปเดตเรียบร้อย\");\r\n    setSubmitting(false);\r\n    navigate(\"/trainer\");\r\n  };\r\n\r\n  // header user\r\n  const today = new Date().toLocaleDateString(\"en-GB\", {\r\n    day: \"numeric\",\r\n    month: \"long\",\r\n    year: \"numeric\",\r\n  });\r\n  let user = { name: \"Trainer\" };\r\n  try {\r\n    const userData = localStorage.getItem(\"user\");\r\n    if (userData) {\r\n      const userObj = JSON.parse(userData);\r\n      user = {\r\n        name: userObj.name || \"Trainer\",\r\n        picture: userObj.picture || \"/user (1).png\",\r\n      };\r\n    }\r\n  } catch {}\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        minHeight: \"100vh\",\r\n        background: \"linear-gradient(135deg,#f8fafc 0%, #e2e8f0 100%)\",\r\n        fontFamily: \"Inter, system-ui, sans-serif\",\r\n      }}\r\n    >\r\n      <TrainerHeader user={user} date={today} />\r\n\r\n      {/* back button */}\r\n      <div\r\n        style={{\r\n          maxWidth: 1200,\r\n          margin: \"0 auto\",\r\n          marginTop: \"12px\",\r\n          marginBottom: \"8px\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <button\r\n          onClick={() => navigate(\"/trainer\")}\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: 8,\r\n            background: \"linear-gradient(90deg,#a855f7 0%, #ff4d8b 100%)\",\r\n            color: \"#fff\",\r\n            fontWeight: 700,\r\n            border: \"none\",\r\n            borderRadius: 999,\r\n            padding: \"8px 22px 8px 16px\",\r\n            fontSize: \"1.08rem\",\r\n            boxShadow: \"0 2px 8px #a855f733\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          <svg\r\n            width=\"20\"\r\n            height=\"20\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            style={{ marginRight: 4 }}\r\n          >\r\n            <path\r\n              d=\"M12.5 15l-5-5 5-5\"\r\n              stroke=\"#fff\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            />\r\n          </svg>\r\n          กลับหน้าหลัก\r\n        </button>\r\n      </div>\r\n\r\n      {/* Main */}\r\n      <div style={{ maxWidth: 1200, margin: \"0 auto\", padding: \"8px 16px 40px 16px\" }}>\r\n        {/* Upload area */}\r\n        <div style={box({ padding: 24, marginTop: 8 })}>\r\n          <div\r\n            onDrop={onDrop}\r\n            onDragOver={onDragOver}\r\n            style={{\r\n              border: \"2px dashed #d1d5db\",\r\n              borderRadius: 16,\r\n              padding: \"36px 20px\",\r\n              textAlign: \"center\",\r\n              color: \"#6b7280\",\r\n              background: \"#f8fafc\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                fontSize: 18,\r\n                fontWeight: 700,\r\n                color: \"#111827\",\r\n                marginBottom: 6,\r\n              }}\r\n            >\r\n              {isEdit ? \"Replace video (optional)\" : \"Select video to upload\"}\r\n            </div>\r\n            <div style={{ marginBottom: 16 }}>Or drag and drop it here</div>\r\n            <button\r\n              onClick={onPick}\r\n              style={{\r\n                background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\r\n                color: \"#fff\",\r\n                fontWeight: 700,\r\n                border: \"none\",\r\n                borderRadius: 10,\r\n                padding: \"10px 18px\",\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              Select video\r\n            </button>\r\n            <input\r\n              ref={fileRef}\r\n              type=\"file\"\r\n              accept=\"video/*\"\r\n              onChange={onFileChange}\r\n              style={{ display: \"none\" }}\r\n            />\r\n            {file && (\r\n              <div style={{ marginTop: 12, color: \"#374151\" }}>\r\n                Selected: <b>{file.name}</b> ({Math.round(file.size / 1024 / 1024)} MB)\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Info row */}\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(4,1fr)\",\r\n            gap: 16,\r\n            marginTop: 14,\r\n          }}\r\n        >\r\n          {[\r\n            { title: \"Size and duration\", desc: \"Maximum size: 30 GB, video duration: 60 minutes\" },\r\n            { title: \"File formats\", desc: \"Recommended: .mp4 (others supported)\" },\r\n            { title: \"Video resolutions\", desc: \"Better: 1080p/1440p/4K\" },\r\n            { title: \"Aspect ratios\", desc: \"Recommended: 16:9\" },\r\n          ].map((item, idx) => (\r\n            <div key={idx} style={box({ padding: \"14px 16px\" })}>\r\n              <div style={{ fontWeight: 700, color: \"#111827\", marginBottom: 6 }}>\r\n                {item.title}\r\n              </div>\r\n              <div style={{ fontSize: 13, color: \"#6b7280\", lineHeight: 1.4 }}>\r\n                {item.desc}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Details */}\r\n        <div style={{ display: \"grid\", gridTemplateColumns: \"1.1fr 1fr\", gap: 20, marginTop: 24 }}>\r\n          {/* Left form */}\r\n          <div style={box({ padding: 20 })}>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n              <div style={{ fontSize: 20, fontWeight: 800, color: \"#111827\" }}>\r\n                {isEdit ? \"Edit details\" : \"Details\"}\r\n              </div>\r\n              <button\r\n                onClick={() => setPreview((p) => !p)}\r\n                style={{\r\n                  border: \"1.5px solid #e5e7eb\",\r\n                  background: \"#fff\",\r\n                  color: \"#a855f7\",\r\n                  borderRadius: 999,\r\n                  padding: \"8px 14px\",\r\n                  fontWeight: 700,\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                Preview\r\n              </button>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 18 }}>\r\n              <label style={{ display: \"block\", fontWeight: 700, marginBottom: 6 }}>\r\n                Name *\r\n              </label>\r\n              <input\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                placeholder=\"e.g., Pushups – Beginner Form\"\r\n                style={{\r\n                  width: \"97%\",\r\n                  padding: \"10px 12px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  outline: \"none\",\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 14 }}>\r\n              <label style={{ display: \"block\", fontWeight: 700, marginBottom: 6 }}>\r\n                Kcalories *\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                value={kcal}\r\n                onChange={(e) => setKcal(e.target.value)}\r\n                placeholder=\"e.g., 60\"\r\n                style={{\r\n                  width: 240,\r\n                  padding: \"10px 12px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  outline: \"none\",\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 14 }}>\r\n              <label style={{ display: \"block\", fontWeight: 700, marginBottom: 6 }}>\r\n                Level\r\n              </label>\r\n              <select\r\n                value={level}\r\n                onChange={(e) => setLevel(e.target.value)}\r\n                style={{\r\n                  width: 180,\r\n                  padding: \"10px 12px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  outline: \"none\",\r\n                  background: \"#fff\",\r\n                }}\r\n              >\r\n                <option value=\"1\">Level 1</option>\r\n                <option value=\"2\">Level 2</option>\r\n                <option value=\"3\">Level 3</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Action buttons */}\r\n            <div style={{ display: \"flex\", gap: 12, marginTop: 20 }}>\r\n              {isEdit ? (\r\n                <button\r\n                  onClick={handleUpdate}\r\n                  disabled={submitting}                       // NEW: กันกดซ้ำ\r\n                  style={{\r\n                    opacity: submitting ? 0.7 : 1,            // NEW: ฟีดแบ็กกำลังส่ง\r\n                    background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\r\n                    color: \"#fff\",\r\n                    fontWeight: 700,\r\n                    border: \"none\",\r\n                    borderRadius: 10,\r\n                    padding: \"10px 16px\",\r\n                    cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n                  }}\r\n                >\r\n                  {submitting ? \"Updating...\" : \"Update\"}\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  onClick={() => {\r\n                    if (window.confirm(\"ต้องรอ admin อนุมัติคลิปก่อนจึงจะเป็น Active\\nกดยืนยันเพื่อส่งคลิปเข้าสู่สถานะ Pending\")) {\r\n                      handleCreate();\r\n                    }\r\n                  }}\r\n                  disabled={submitting}\r\n                  style={{\r\n                    opacity: submitting ? 0.7 : 1,\r\n                    background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\r\n                    color: \"#fff\",\r\n                    fontWeight: 700,\r\n                    border: \"none\",\r\n                    borderRadius: 10,\r\n                    padding: \"10px 16px\",\r\n                    cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n                    display: \"inline-flex\",\r\n                    alignItems: \"center\",\r\n                    gap: 8,\r\n                  }}\r\n                >\r\n                  <img\r\n                    src={process.env.PUBLIC_URL + \"/UploadSimple.png\"}\r\n                    alt=\"upload\"\r\n                    style={{\r\n                      width: 20,\r\n                      height: 20,\r\n                      marginRight: 6,\r\n                      verticalAlign: \"middle\",\r\n                    }}\r\n                  />\r\n                  {submitting ? \"Uploading...\" : \"Public\"}\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={handleSaveDraft}\r\n                disabled={submittingDraft}\r\n                style={{\r\n                  background: \"#e5e7eb\",\r\n                  color: \"#111827\",\r\n                  fontWeight: 700,\r\n                  border: \"none\",\r\n                  borderRadius: 10,\r\n                  padding: \"10px 16px\",\r\n                  cursor: submittingDraft ? \"not-allowed\" : \"pointer\",\r\n                  opacity: submittingDraft ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {submittingDraft ? \"Saving...\" : \"Save draft\"}\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  if (window.confirm('Discard changes and go back to Trainer page?')) {\r\n                    navigate('/trainer');\r\n                  }\r\n                }}\r\n                disabled={submitting}\r\n                style={{\r\n                  background: \"#fff\",\r\n                  color: \"#6b7280\",\r\n                  fontWeight: 700,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  borderRadius: 10,\r\n                  padding: \"10px 16px\",\r\n                  cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n                }}\r\n              >\r\n                Discard\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right preview pane */}\r\n          <div\r\n            style={box({\r\n              padding: 16,\r\n              minHeight: 300,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            })}\r\n          >\r\n            {!fileURL || !preview ? (\r\n              <div\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: 320,\r\n                  borderRadius: 12,\r\n                  background: \"#e5e7eb\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  color: \"#6b7280\",\r\n                }}\r\n              >\r\n                {preview ? \"No video selected\" : \"Preview area\"}\r\n              </div>\r\n            ) : (\r\n              <video\r\n                src={fileURL}\r\n                controls\r\n                style={{ width: \"100%\", height: 320, objectFit: \"cover\", borderRadius: 12 }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}