{"ast":null,"code":"var _jsxFileName = \"E:\\\\Fitaddict\\\\frontend\\\\src\\\\components\\\\InviteTrainee.js\",\n  _s = $RefreshSig$();\n// src/components/InviteTrainee.js\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction InviteTrainee({\n  onInvite,\n  onSuccess,\n  endpoint = 'http://localhost:8000/invite'\n}) {\n  _s();\n  const [email, setEmail] = useState('');\n  const [status, setStatus] = useState('');\n  const [sending, setSending] = useState(false);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setStatus('Please sign in again (missing token).');\n      return;\n    }\n    if (!email.trim()) {\n      setStatus('Please enter an email.');\n      return;\n    }\n    setSending(true);\n    setStatus('Sending...');\n    try {\n      var _data$detail, _data$detail$toLowerC;\n      const token = localStorage.getItem('token');\n      const res = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          email\n        })\n      });\n\n      // สำเร็จ (200/201/204)\n      if (res.ok) {\n        setStatus('Trainee invitation sent!');\n        onInvite === null || onInvite === void 0 ? void 0 : onInvite(email.trim());\n        onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess();\n        setEmail('');\n        return;\n      }\n\n      // กรณี BE ส่งข้อความมา\n      const data = await res.json().catch(() => ({}));\n\n      // เผื่อกรณีตั้งใจทำ idempotent: เป็น trainee อยู่แล้วแต่ถือว่าสำเร็จ\n      if (res.status === 200 || data !== null && data !== void 0 && (_data$detail = data.detail) !== null && _data$detail !== void 0 && (_data$detail$toLowerC = _data$detail.toLowerCase) !== null && _data$detail$toLowerC !== void 0 && _data$detail$toLowerC.call(_data$detail).includes('already')) {\n        setStatus(data.detail || 'Already invited / mapping ensured');\n        onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess();\n      } else if (res.status === 401) {\n        setStatus(`Unauthorized: ${data.detail || 'Please sign in again.'}`);\n      } else {\n        setStatus(`Failed: ${data.detail || 'Unknown error'}`);\n      }\n    } catch (err) {\n      setStatus(`Error: ${err.message}`);\n    } finally {\n      setSending(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      display: 'flex',\n      gap: 8,\n      marginBottom: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"email\",\n      placeholder: \"Type an email to invite\",\n      value: email,\n      onChange: e => setEmail(e.target.value),\n      required: true,\n      disabled: sending,\n      style: {\n        flex: 1,\n        padding: 10,\n        borderRadius: 8,\n        border: '1px solid #e5e7eb',\n        fontSize: 15,\n        outline: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: sending,\n      style: {\n        background: 'linear-gradient(90deg, #ff5c8d 0%, #a259ff 100%)',\n        color: '#fff',\n        border: 'none',\n        borderRadius: 8,\n        padding: '0 18px',\n        fontWeight: 600,\n        fontSize: 15,\n        cursor: sending ? 'not-allowed' : 'pointer',\n        height: 40,\n        opacity: sending ? 0.8 : 1\n      },\n      children: sending ? 'Sending…' : '+ Invite'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), status && /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        marginLeft: 8,\n        color: '#475569',\n        fontSize: 13\n      },\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(InviteTrainee, \"VZdrXAY37MaF0C2uVQALNTmoUdE=\");\n_c = InviteTrainee;\nexport default InviteTrainee;\nvar _c;\n$RefreshReg$(_c, \"InviteTrainee\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","InviteTrainee","onInvite","onSuccess","endpoint","_s","email","setEmail","status","setStatus","sending","setSending","handleSubmit","e","preventDefault","token","localStorage","getItem","trim","_data$detail","_data$detail$toLowerC","res","fetch","method","headers","body","JSON","stringify","ok","data","json","catch","detail","toLowerCase","call","includes","err","message","onSubmit","style","display","gap","marginBottom","children","type","placeholder","value","onChange","target","required","disabled","flex","padding","borderRadius","border","fontSize","outline","fileName","_jsxFileName","lineNumber","columnNumber","background","color","fontWeight","cursor","height","opacity","marginLeft","_c","$RefreshReg$"],"sources":["E:/Fitaddict/frontend/src/components/InviteTrainee.js"],"sourcesContent":["// src/components/InviteTrainee.js\r\nimport React, { useState } from 'react';\r\n\r\nfunction InviteTrainee({ onInvite, onSuccess, endpoint = 'http://localhost:8000/invite' }) {\r\n  const [email, setEmail] = useState('');\r\n  const [status, setStatus] = useState('');\r\n  const [sending, setSending] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      setStatus('Please sign in again (missing token).');\r\n      return;\r\n    }\r\n    if (!email.trim()) {\r\n      setStatus('Please enter an email.');\r\n      return;\r\n    }\r\n\r\n    setSending(true);\r\n    setStatus('Sending...');\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ email }),\r\n      });\r\n\r\n      // สำเร็จ (200/201/204)\r\n      if (res.ok) {\r\n        setStatus('Trainee invitation sent!');\r\n        onInvite?.(email.trim());\r\n        onSuccess?.();\r\n        setEmail('');\r\n        return;\r\n      }\r\n\r\n      // กรณี BE ส่งข้อความมา\r\n      const data = await res.json().catch(() => ({}));\r\n\r\n      // เผื่อกรณีตั้งใจทำ idempotent: เป็น trainee อยู่แล้วแต่ถือว่าสำเร็จ\r\n      if (res.status === 200 || data?.detail?.toLowerCase?.().includes('already')) {\r\n        setStatus(data.detail || 'Already invited / mapping ensured');\r\n        onSuccess?.();\r\n      } else if (res.status === 401) {\r\n        setStatus(`Unauthorized: ${data.detail || 'Please sign in again.'}`);\r\n      } else {\r\n        setStatus(`Failed: ${data.detail || 'Unknown error'}`);\r\n      }\r\n    } catch (err) {\r\n      setStatus(`Error: ${err.message}`);\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{ display: 'flex', gap: 8, marginBottom: 16 }}>\r\n      <input\r\n        type=\"email\"\r\n        placeholder=\"Type an email to invite\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        required\r\n        disabled={sending}\r\n        style={{\r\n          flex: 1,\r\n          padding: 10,\r\n          borderRadius: 8,\r\n          border: '1px solid #e5e7eb',\r\n          fontSize: 15,\r\n          outline: 'none',\r\n        }}\r\n      />\r\n      <button\r\n        type=\"submit\"\r\n        disabled={sending}\r\n        style={{\r\n          background: 'linear-gradient(90deg, #ff5c8d 0%, #a259ff 100%)',\r\n          color: '#fff',\r\n          border: 'none',\r\n          borderRadius: 8,\r\n          padding: '0 18px',\r\n          fontWeight: 600,\r\n          fontSize: 15,\r\n          cursor: sending ? 'not-allowed' : 'pointer',\r\n          height: 40,\r\n          opacity: sending ? 0.8 : 1,\r\n        }}\r\n      >\r\n        {sending ? 'Sending…' : '+ Invite'}\r\n      </button>\r\n      {status && (\r\n        <span style={{ marginLeft: 8, color: '#475569', fontSize: 13 }}>\r\n          {status}\r\n        </span>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default InviteTrainee;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}