{"ast":null,"code":"var _jsxFileName = \"C:\\\\frontend\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\n// ...existing code from Dashboard.js...\nimport React, { useEffect, useState } from 'react';\nimport ExternalUserModal from '../components/ExternalUserModal';\nimport { useNavigate } from 'react-router-dom';\nimport '../components/Dashboard.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const navigate = useNavigate();\n  const [user, setUser] = useState(null);\n  const [showExternalModal, setShowExternalModal] = useState(false);\n  useEffect(() => {\n    const userData = localStorage.getItem('user');\n    if (!userData) {\n      navigate('/login');\n      return;\n    }\n    const parsed = JSON.parse(userData);\n    setUser(parsed);\n    // ตรวจสอบ role\n    // รองรับ role unverified/pending\n    const validRoles = ['admin', 'trainer', 'trainee'];\n    if (!parsed.role || !validRoles.includes(parsed.role)) {\n      setShowExternalModal(true);\n    }\n    if (parsed.role === 'unverified' || parsed.role === 'pending') {\n      setShowExternalModal(true);\n    }\n  }, [navigate]);\n  const handleLogout = () => {\n    localStorage.removeItem('user');\n    navigate('/login');\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this);\n  }\n\n  // dashboard เปล่าสำหรับ unverified/pending\n  if (showExternalModal) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard\",\n        style: {\n          minHeight: '100vh',\n          background: '#f6f8fb'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ExternalUserModal, {\n        open: showExternalModal,\n        onContactAdmin: () => {\n          window.location.href = 'mailto:admin@example.com?subject=ขอสิทธิ์เข้าใช้งานระบบ';\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n  // dashboard ปกติ\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"dashboard-nav\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-logo\",\n        children: \"FitAddict\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-user\",\n        children: [user.picture && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.picture,\n          alt: \"Profile\",\n          className: \"user-avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"user-name\",\n          style: {\n            fontWeight: 700,\n            fontSize: \"1.1rem\",\n            color: \"#1e293b\"\n          },\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"logout-btn\",\n          style: {\n            marginLeft: \"1.5rem\",\n            background: \"#f1f5f9\",\n            color: \"#64748b\",\n            fontWeight: 500,\n            border: \"none\",\n            borderRadius: \"100px\",\n            padding: \"0.5rem 1.25rem\",\n            cursor: \"pointer\",\n            fontSize: \"0.95rem\",\n            transition: \"all 0.3s\"\n          },\n          onClick: handleLogout,\n          children: \"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n_s(Dashboard, \"P/tnBqaCS/7K7DRb7MPucdjImYc=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","ExternalUserModal","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","navigate","user","setUser","showExternalModal","setShowExternalModal","userData","localStorage","getItem","parsed","JSON","parse","validRoles","role","includes","handleLogout","removeItem","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","minHeight","background","open","onContactAdmin","window","location","href","picture","src","alt","fontWeight","fontSize","color","name","marginLeft","border","borderRadius","padding","cursor","transition","onClick","_c","$RefreshReg$"],"sources":["C:/frontend/src/pages/Dashboard.js"],"sourcesContent":["// ...existing code from Dashboard.js...\r\nimport React, { useEffect, useState } from 'react';\r\nimport ExternalUserModal from '../components/ExternalUserModal';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../components/Dashboard.css';\r\n\r\nconst Dashboard = () => {\r\n    const navigate = useNavigate();\r\n    const [user, setUser] = useState(null);\r\n    const [showExternalModal, setShowExternalModal] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const userData = localStorage.getItem('user');\r\n        if (!userData) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n        const parsed = JSON.parse(userData);\r\n        setUser(parsed);\r\n        // ตรวจสอบ role\r\n        // รองรับ role unverified/pending\r\n        const validRoles = ['admin', 'trainer', 'trainee'];\r\n        if (!parsed.role || !validRoles.includes(parsed.role)) {\r\n            setShowExternalModal(true);\r\n        }\r\n        if (parsed.role === 'unverified' || parsed.role === 'pending') {\r\n            setShowExternalModal(true);\r\n        }\r\n    }, [navigate]);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('user');\r\n        navigate('/login');\r\n    };\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"dashboard-loading\">\r\n                <div className=\"loading-spinner\"></div>\r\n                <p>กำลังโหลด...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // dashboard เปล่าสำหรับ unverified/pending\r\n    if (showExternalModal) {\r\n        return (\r\n            <>\r\n                <div className=\"dashboard\" style={{ minHeight: '100vh', background: '#f6f8fb' }}></div>\r\n                <ExternalUserModal\r\n                    open={showExternalModal}\r\n                    onContactAdmin={() => {\r\n                        window.location.href = 'mailto:admin@example.com?subject=ขอสิทธิ์เข้าใช้งานระบบ';\r\n                    }}\r\n                />\r\n            </>\r\n        );\r\n    }\r\n    // dashboard ปกติ\r\n    return (\r\n        <div className=\"dashboard\">\r\n            <nav className=\"dashboard-nav\">\r\n                <div className=\"dashboard-logo\">FitAddict</div>\r\n                <div className=\"dashboard-user\">\r\n                    {user.picture && (\r\n                        <img src={user.picture} alt=\"Profile\" className=\"user-avatar\" />\r\n                    )}\r\n                    <span className=\"user-name\" style={{ fontWeight: 700, fontSize: \"1.1rem\", color: \"#1e293b\" }}>\r\n                        {user.name}\r\n                    </span>\r\n                    <button\r\n                        className=\"logout-btn\"\r\n                        style={{\r\n                            marginLeft: \"1.5rem\",\r\n                            background: \"#f1f5f9\",\r\n                            color: \"#64748b\",\r\n                            fontWeight: 500,\r\n                            border: \"none\",\r\n                            borderRadius: \"100px\",\r\n                            padding: \"0.5rem 1.25rem\",\r\n                            cursor: \"pointer\",\r\n                            fontSize: \"0.95rem\",\r\n                            transition: \"all 0.3s\"\r\n                        }}\r\n                        onClick={handleLogout}\r\n                    >\r\n                        ออกจากระบบ\r\n                    </button>\r\n                </div>\r\n            </nav>\r\n            {/* ...rest of Dashboard code... */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}