{"ast":null,"code":"var _jsxFileName = \"C:\\\\Fit\\\\frontend\\\\src\\\\pages\\\\UploadVideo.js\",\n  _s = $RefreshSig$();\n// src/pages/UploadVideo.jsx\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport TrainerHeader from \"../components/TrainerHeader\";\nimport VideoSegmentService from \"../services/VideoSegmentService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst box = (extra = {}) => ({\n  background: \"#fff\",\n  borderRadius: 16,\n  boxShadow: \"0 2px 12px rgba(0,0,0,0.06)\",\n  ...extra\n});\nexport default function UploadVideo() {\n  _s();\n  var _location$state, _availableExercises$f, _availableExercises$f2;\n  // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ loading ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏õ‡∏∏‡πà‡∏° save draft\n  const [submittingDraft, setSubmittingDraft] = useState(false);\n\n  // State ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö keypoint overlay\n  const videoRef = useRef(null);\n  const [showKeypoints, setShowKeypoints] = useState(false);\n  const [keypoints, setKeypoints] = useState(null);\n  const [isVideoPlaying, setIsVideoPlaying] = useState(false);\n  const [processingKeypoints, setProcessingKeypoints] = useState(false);\n  const [allKeypoints, setAllKeypoints] = useState([]); // ‡πÄ‡∏Å‡πá‡∏ö keypoints ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\n\n  // NEW: Time Picker States\n  const [videoDuration, setVideoDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [exerciseSegments, setExerciseSegments] = useState([]);\n  const [newSegment, setNewSegment] = useState({\n    exerciseId: '',\n    exerciseName: '',\n    startTime: 0,\n    endTime: 0,\n    isSelectingStart: false,\n    isSelectingEnd: false\n  });\n\n  // NEW: Available exercises from DB\n  const [availableExercises, setAvailableExercises] = useState([]);\n  const [loadingExercises, setLoadingExercises] = useState(false);\n\n  // NEW: Video segment service for simplified workflow\n  const [videoSegmentService] = useState(new VideoSegmentService());\n\n  // NEW: ‡πÄ‡∏Å‡πá‡∏ö video ID ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å upload ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\n  const [videoId, setVideoId] = useState(null);\n\n  // NEW: Fetch exercises from backend\n  useEffect(() => {\n    const fetchExercises = async () => {\n      setLoadingExercises(true);\n      try {\n        const token = localStorage.getItem(\"token\");\n        const res = await fetch(\"http://localhost:8000/exercises\", {\n          headers: token ? {\n            Authorization: `Bearer ${token}`\n          } : {}\n        });\n        if (res.ok) {\n          const exercises = await res.json();\n          console.log(\"‚úÖ Exercises loaded from API:\", exercises.length);\n          setAvailableExercises(exercises);\n        } else {\n          console.warn(\"‚ö†Ô∏è API /exercises not available, using fallback data\");\n          // Fallback exercises ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô DB\n          setAvailableExercises([\n          // Upper Body\n          {\n            id: 1,\n            name: \"Push-up\",\n            muscle_group: \"Chest/Triceps\",\n            description: \"‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏î‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô\"\n          }, {\n            id: 2,\n            name: \"Pull-up\",\n            muscle_group: \"Back/Biceps\",\n            description: \"‡∏î‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏ö‡∏≤‡∏£‡πå\"\n          }, {\n            id: 3,\n            name: \"Dips\",\n            muscle_group: \"Triceps/Chest\",\n            description: \"‡∏î‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏≤‡∏ô‡∏ö‡∏≤‡∏£‡πå\"\n          }, {\n            id: 4,\n            name: \"Shoulder Press\",\n            muscle_group: \"Shoulders\",\n            description: \"‡∏¢‡∏Å‡∏î‡∏±‡∏°‡πÄ‡∏ö‡∏•‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏´‡∏±‡∏ß\"\n          },\n          // Lower Body\n          {\n            id: 5,\n            name: \"Squat\",\n            muscle_group: \"Legs/Glutes\",\n            description: \"‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏•‡∏∏‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô\"\n          }, {\n            id: 6,\n            name: \"Lunge\",\n            muscle_group: \"Legs/Glutes\",\n            description: \"‡∏Å‡πâ‡∏≤‡∏ß‡∏Ç‡∏≤‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß\"\n          }, {\n            id: 7,\n            name: \"Deadlift\",\n            muscle_group: \"Hamstrings/Back\",\n            description: \"‡∏Å‡πâ‡∏°‡∏¢‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô\"\n          }, {\n            id: 8,\n            name: \"Calf Raise\",\n            muscle_group: \"Calves\",\n            description: \"‡∏¢‡∏∑‡∏ô‡πÄ‡∏Ç‡∏¢‡πà‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏ó‡πâ‡∏≤\"\n          },\n          // Core\n          {\n            id: 9,\n            name: \"Plank\",\n            muscle_group: \"Core\",\n            description: \"‡∏ó‡πà‡∏≤‡πÄ‡∏Å‡∏£‡πá‡∏á‡∏•‡∏≥‡∏ï‡∏±‡∏ß\"\n          }, {\n            id: 10,\n            name: \"Sit-up\",\n            muscle_group: \"Abs\",\n            description: \"‡∏á‡∏≠‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô\"\n          }, {\n            id: 11,\n            name: \"Crunch\",\n            muscle_group: \"Abs\",\n            description: \"‡πÄ‡∏Å‡∏£‡πá‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢\"\n          }, {\n            id: 12,\n            name: \"Russian Twist\",\n            muscle_group: \"Core\",\n            description: \"‡∏ö‡∏¥‡∏î‡∏•‡∏≥‡∏ï‡∏±‡∏ß‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤\"\n          }, {\n            id: 13,\n            name: \"Leg Raise\",\n            muscle_group: \"Lower Abs\",\n            description: \"‡∏¢‡∏Å‡∏Ç‡∏≤‡∏ï‡∏£‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á\"\n          },\n          // Cardio\n          {\n            id: 14,\n            name: \"Jumping Jack\",\n            muscle_group: \"Full Body\",\n            description: \"‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏Å‡∏≤‡∏á‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤\"\n          }, {\n            id: 15,\n            name: \"Burpee\",\n            muscle_group: \"Full Body\",\n            description: \"‡∏¢‡∏∑‡∏ô-‡∏ß‡∏¥‡∏î‡∏û‡∏∑‡πâ‡∏ô-‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î\"\n          }, {\n            id: 16,\n            name: \"Mountain Climber\",\n            muscle_group: \"Core/Legs\",\n            description: \"‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πà‡∏≤‡∏ä‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô\"\n          }, {\n            id: 17,\n            name: \"High Knees\",\n            muscle_group: \"Legs/Cardio\",\n            description: \"‡∏ß‡∏¥‡πà‡∏á‡∏¢‡∏Å‡πÄ‡∏Ç‡πà‡∏≤‡∏™‡∏π‡∏á\"\n          },\n          // Flexibility\n          {\n            id: 18,\n            name: \"Stretching Hamstrings\",\n            muscle_group: \"Hamstrings\",\n            description: \"‡∏¢‡∏∑‡∏î‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤\"\n          }, {\n            id: 19,\n            name: \"Stretching Shoulders\",\n            muscle_group: \"Shoulders\",\n            description: \"‡∏¢‡∏∑‡∏î‡πÑ‡∏´‡∏•‡πà\"\n          }, {\n            id: 20,\n            name: \"Yoga Downward Dog\",\n            muscle_group: \"Full Body Stretch\",\n            description: \"‡∏ó‡πà‡∏≤‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏Å‡πâ‡∏°\"\n          }, {\n            id: 21,\n            name: \"Hip Opener Stretch\",\n            muscle_group: \"Hips\",\n            description: \"‡∏¢‡∏∑‡∏î‡∏™‡∏∞‡πÇ‡∏û‡∏Å\"\n          }]);\n        }\n      } catch (error) {\n        console.error(\"‚ùå Error fetching exercises:\", error);\n        // Fallback exercises (Popular ones)\n        setAvailableExercises([{\n          id: 1,\n          name: \"Push-up\",\n          muscle_group: \"Chest/Triceps\",\n          description: \"‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏î‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô\"\n        }, {\n          id: 5,\n          name: \"Squat\",\n          muscle_group: \"Legs/Glutes\",\n          description: \"‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏•‡∏∏‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô\"\n        }, {\n          id: 9,\n          name: \"Plank\",\n          muscle_group: \"Core\",\n          description: \"‡∏ó‡πà‡∏≤‡πÄ‡∏Å‡∏£‡πá‡∏á‡∏•‡∏≥‡∏ï‡∏±‡∏ß\"\n        }, {\n          id: 14,\n          name: \"Jumping Jack\",\n          muscle_group: \"Full Body\",\n          description: \"‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏Å‡∏≤‡∏á‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤\"\n        }, {\n          id: 15,\n          name: \"Burpee\",\n          muscle_group: \"Full Body\",\n          description: \"‡∏¢‡∏∑‡∏ô-‡∏ß‡∏¥‡∏î‡∏û‡∏∑‡πâ‡∏ô-‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î\"\n        }]);\n      } finally {\n        setLoadingExercises(false);\n      }\n    };\n    fetchExercises();\n  }, []);\n\n  // NEW: Function to process keypoints after video upload\n  const processVideoKeypoints = async videoId => {\n    try {\n      setProcessingVideoKeypoints(true);\n      setKeypointsProgress({\n        status: \"Starting keypoints processing...\",\n        current: 0,\n        total: 0\n      });\n      console.log(`üöÄ Starting keypoints processing for video ${videoId}`);\n      const result = await keypointsProcessor.processVideoKeypoints(videoId, progress => {\n        setKeypointsProgress(progress);\n        console.log(`üìä Progress: ${progress.current}/${progress.total} - ${progress.status}`);\n      });\n      console.log(\"‚úÖ Keypoints processing completed:\", result);\n      setKeypointsProgress({\n        status: `Completed! Processed ${result.processedSuccessfully}/${result.totalSegments} segments`,\n        current: result.totalSegments,\n        total: result.totalSegments,\n        completed: true\n      });\n\n      // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏´‡πâ user ‡πÄ‡∏´‡πá‡∏ô\n      setTimeout(() => {\n        setKeypointsProgress(null);\n        setProcessingVideoKeypoints(false);\n      }, 3000);\n    } catch (error) {\n      console.error(\"‚ùå Keypoints processing failed:\", error);\n      setKeypointsProgress({\n        status: `Error: ${error.message}`,\n        error: true\n      });\n      setTimeout(() => {\n        setKeypointsProgress(null);\n        setProcessingVideoKeypoints(false);\n      }, 5000);\n    }\n  };\n\n  // NEW: Add segment function with immediate keypoints processing\n  const addExerciseSegment = async () => {\n    if (!newSegment.exerciseId) {\n      alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢');\n      return;\n    }\n    if (newSegment.startTime >= newSegment.endTime) {\n      alert('‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏ö\\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡∏°‡πà');\n      return;\n    }\n    if (newSegment.endTime - newSegment.startTime < 5) {\n      alert('‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ');\n      return;\n    }\n\n    // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏°‡∏µ editId) ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏î‡∏¥‡∏°\n    if (editId) {\n      const selectedExercise = availableExercises.find(ex => ex.id == newSegment.exerciseId);\n      const segment = {\n        id: Date.now(),\n        exerciseId: newSegment.exerciseId,\n        exerciseName: (selectedExercise === null || selectedExercise === void 0 ? void 0 : selectedExercise.name) || 'Unknown Exercise',\n        muscleGroup: (selectedExercise === null || selectedExercise === void 0 ? void 0 : selectedExercise.muscle_group) || '',\n        startTime: newSegment.startTime,\n        endTime: newSegment.endTime,\n        keypoints: []\n      };\n      setExerciseSegments(prev => [...prev, segment]);\n      setNewSegment({\n        exerciseId: '',\n        exerciseName: '',\n        startTime: 0,\n        endTime: 0,\n        isSelectingStart: false,\n        isSelectingEnd: false\n      });\n      return;\n    }\n\n    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡∏°‡∏µ video ID ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡πà‡∏≤‡∏ô API\n    if (videoId) {\n      try {\n        setProcessingVideoKeypoints(true);\n        setKeypointsProgress({\n          status: \"Creating segment and processing keypoints...\",\n          current: 0,\n          total: 1\n        });\n        const selectedExercise = availableExercises.find(ex => ex.id == newSegment.exerciseId);\n        const result = await videoSegmentService.createSegmentWithKeypoints(videoId, {\n          exerciseId: parseInt(newSegment.exerciseId),\n          startTime: newSegment.startTime,\n          endTime: newSegment.endTime\n        }, progress => {\n          console.log('üìä Segment creation progress:', progress);\n          if (progress.phase === 'created') {\n            setKeypointsProgress({\n              status: progress.message,\n              current: 0,\n              total: 1\n            });\n          } else if (progress.phase === 'processing') {\n            setKeypointsProgress({\n              status: progress.message,\n              current: 0.5,\n              total: 1\n            });\n          } else if (progress.phase === 'completed') {\n            setKeypointsProgress({\n              status: progress.message,\n              current: 1,\n              total: 1,\n              completed: true\n            });\n          } else if (progress.phase === 'error') {\n            setKeypointsProgress({\n              status: progress.message,\n              error: true\n            });\n          }\n        });\n\n        // ‡πÄ‡∏û‡∏¥‡πà‡∏° segment ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô state\n        const newSegmentForState = {\n          id: result.segment.id,\n          exerciseId: result.segment.exercise_id,\n          exerciseName: (selectedExercise === null || selectedExercise === void 0 ? void 0 : selectedExercise.name) || 'Unknown Exercise',\n          muscleGroup: (selectedExercise === null || selectedExercise === void 0 ? void 0 : selectedExercise.muscle_group) || '',\n          startTime: result.segment.start_time,\n          endTime: result.segment.end_time,\n          keypoints: [],\n          hasKeypoints: result.keypoints_status.has_keypoints,\n          keypointsFile: result.keypoints_status.keypoints_file\n        };\n        setExerciseSegments(prev => [...prev, newSegmentForState]);\n\n        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï form\n        setNewSegment({\n          exerciseId: '',\n          exerciseName: '',\n          startTime: 0,\n          endTime: 0,\n          isSelectingStart: false,\n          isSelectingEnd: false\n        });\n\n        // ‡∏ã‡πà‡∏≠‡∏ô progress ‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ\n        setTimeout(() => {\n          setKeypointsProgress(null);\n          setProcessingVideoKeypoints(false);\n        }, 3000);\n        console.log('‚úÖ Segment created with keypoints:', result);\n      } catch (error) {\n        console.error('‚ùå Error creating segment:', error);\n        setKeypointsProgress({\n          status: `Error: ${error.message}`,\n          error: true\n        });\n        setTimeout(() => {\n          setKeypointsProgress(null);\n          setProcessingVideoKeypoints(false);\n        }, 5000);\n        alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á segment: ${error.message}`);\n      }\n    } else {\n      // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ videoId ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏î‡∏¥‡∏° (‡πÄ‡∏Å‡πá‡∏ö local state)\n      const selectedExercise = availableExercises.find(ex => ex.id == newSegment.exerciseId);\n      const segment = {\n        id: Date.now(),\n        exerciseId: newSegment.exerciseId,\n        exerciseName: (selectedExercise === null || selectedExercise === void 0 ? void 0 : selectedExercise.name) || 'Unknown Exercise',\n        muscleGroup: (selectedExercise === null || selectedExercise === void 0 ? void 0 : selectedExercise.muscle_group) || '',\n        startTime: newSegment.startTime,\n        endTime: newSegment.endTime,\n        keypoints: []\n      };\n      setExerciseSegments(prev => [...prev, segment]);\n      setNewSegment({\n        exerciseId: '',\n        exerciseName: '',\n        startTime: 0,\n        endTime: 0,\n        isSelectingStart: false,\n        isSelectingEnd: false\n      });\n    }\n  };\n\n  // NEW: Start selecting time range\n  const startTimeSelection = () => {\n    if (videoRef.current) {\n      setNewSegment(prev => ({\n        ...prev,\n        startTime: videoRef.current.currentTime,\n        isSelectingStart: true,\n        isSelectingEnd: false\n      }));\n\n      // Auto-highlight the start time for 2 seconds\n      setTimeout(() => {\n        setNewSegment(prev => ({\n          ...prev,\n          isSelectingStart: false\n        }));\n      }, 2000);\n    }\n  };\n\n  // NEW: End selecting time range\n  const endTimeSelection = () => {\n    if (videoRef.current) {\n      setNewSegment(prev => ({\n        ...prev,\n        endTime: videoRef.current.currentTime,\n        isSelectingEnd: true\n      }));\n\n      // Auto-highlight the end time for 2 seconds\n      setTimeout(() => {\n        setNewSegment(prev => ({\n          ...prev,\n          isSelectingEnd: false\n        }));\n      }, 2000);\n    }\n  };\n\n  // NEW: Handle exercise selection\n  const handleExerciseChange = e => {\n    const exerciseId = e.target.value;\n    const selectedExercise = availableExercises.find(ex => ex.id == exerciseId);\n    setNewSegment(prev => ({\n      ...prev,\n      exerciseId,\n      exerciseName: (selectedExercise === null || selectedExercise === void 0 ? void 0 : selectedExercise.name) || ''\n    }));\n  };\n\n  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô save draft - ‡πÄ‡∏û‡∏¥‡πà‡∏° segments\n  const handleSaveDraft = async () => {\n    if (!file || !name) {\n      alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\");\n      return;\n    }\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ token ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ (‡πÇ‡∏õ‡∏£‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Trainer)\");\n      return;\n    }\n    if (submittingDraft) return;\n    setSubmittingDraft(true);\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"title\", name);\n    formData.append(\"difficulty\", level);\n    formData.append(\"description\", `kcal:${kcal};draft:true`);\n    formData.append(\"approved\", \"false\");\n\n    // NEW: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• exercise segments ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö draft ‡∏î‡πâ‡∏ß‡∏¢\n    if (exerciseSegments.length > 0) {\n      formData.append(\"segments\", JSON.stringify(exerciseSegments.map(segment => ({\n        exercise_id: segment.exerciseId,\n        start_time: segment.startTime,\n        end_time: segment.endTime\n      }))));\n    }\n    try {\n      const res = await fetch(\"http://localhost:8000/videos\", {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        body: formData\n      });\n      if (!res.ok) {\n        let detail = \"\";\n        try {\n          const data = await res.json();\n          detail = data.detail || \"\";\n        } catch {}\n        alert(`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å draft ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${res.status}) ${detail}`);\n        return;\n      }\n      alert(`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å draft ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ${exerciseSegments.length > 0 ? `\\n‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ${exerciseSegments.length} ‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß` : ''}`);\n      navigate(\"/trainer\");\n    } catch (e) {\n      alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å draft: \" + ((e === null || e === void 0 ? void 0 : e.message) || e));\n    } finally {\n      setSubmittingDraft(false);\n    }\n  };\n  const navigate = useNavigate();\n  const location = useLocation();\n  const fileRef = useRef(null);\n\n  // NEW: ‡πÅ‡∏¢‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≤‡∏Å state ‡∏´‡∏£‡∏∑‡∏≠ query (?id=)\n  const editId = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.videoId) || new URLSearchParams(location.search).get(\"id\");\n  const isEdit = !!editId;\n\n  // ‡∏ü‡∏≠‡∏£‡πå‡∏°\n  const [file, setFile] = useState(null);\n  const [fileURL, setFileURL] = useState(\"\"); // ‡πÉ‡∏ä‡πâ preview (‡∏ó‡∏±‡πâ‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà/‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)\n  const [name, setName] = useState(\"\");\n  const [kcal, setKcal] = useState(\"\");\n  const [level, setLevel] = useState(\"1\");\n  const [preview, setPreview] = useState(false);\n\n  // NEW: ‡∏Å‡∏±‡∏ô‡∏Å‡∏î‡∏ã‡πâ‡∏≥ + ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡∏≠‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á\n  const [submitting, setSubmitting] = useState(false);\n  const onPick = () => {\n    var _fileRef$current;\n    return (_fileRef$current = fileRef.current) === null || _fileRef$current === void 0 ? void 0 : _fileRef$current.click();\n  };\n  const onFileChange = e => {\n    var _e$target$files;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!f) return;\n    setFile(f);\n    setFileURL(URL.createObjectURL(f));\n    setPreview(true); // Auto-enable preview when file is selected\n    // Auto-enable keypoints when new video is loaded\n    setShowKeypoints(true);\n    setProcessingKeypoints(true);\n    setTimeout(() => setProcessingKeypoints(false), 2000);\n  };\n  const onDrop = e => {\n    var _e$dataTransfer$files;\n    e.preventDefault();\n    const f = (_e$dataTransfer$files = e.dataTransfer.files) === null || _e$dataTransfer$files === void 0 ? void 0 : _e$dataTransfer$files[0];\n    if (!f) return;\n    setFile(f);\n    setFileURL(URL.createObjectURL(f));\n    setPreview(true); // Auto-enable preview when file is dropped\n    // Auto-enable keypoints when new video is loaded\n    setShowKeypoints(true);\n    setProcessingKeypoints(true);\n    setTimeout(() => setProcessingKeypoints(false), 2000);\n  };\n  const onDragOver = e => e.preventDefault();\n\n  // NEW: Prefill ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏≤‡∏Å state ‡∏Å‡πà‡∏≠‡∏ô, ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡πá‡∏Ñ‡πà‡∏≠‡∏¢ GET /videos/:id)\n  useEffect(() => {\n    var _location$state2;\n    if (!isEdit) return;\n\n    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å‡∏±‡∏ö state ‡∏Å‡πá‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏•‡∏¢ (‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤)\n    if ((_location$state2 = location.state) !== null && _location$state2 !== void 0 && _location$state2.video) {\n      var _v$kcal, _v$description$match$, _v$description$match;\n      const v = location.state.video;\n      setName(v.title || \"\");\n      setLevel(String(v.difficulty || v.level || \"1\"));\n      setKcal((_v$kcal = v.kcal) !== null && _v$kcal !== void 0 ? _v$kcal : typeof v.description === \"string\" ? (_v$description$match$ = (_v$description$match = v.description.match(/kcal:(\\d+)/)) === null || _v$description$match === void 0 ? void 0 : _v$description$match[1]) !== null && _v$description$match$ !== void 0 ? _v$description$match$ : \"\" : \"\");\n      const url = v.image || (v.s3_url ? /^https?:\\/\\//i.test(v.s3_url) ? v.s3_url : `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}` : \"\");\n      setFileURL(url);\n      // Auto-enable keypoints for edit mode\n      if (url) {\n        setShowKeypoints(true);\n        setProcessingKeypoints(true);\n        setTimeout(() => setProcessingKeypoints(false), 2000);\n      }\n\n      // NEW: ‡πÇ‡∏´‡∏•‡∏î segments ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)\n      if (v.segments && Array.isArray(v.segments)) {\n        const loadedSegments = v.segments.map((seg, index) => ({\n          id: Date.now() + index,\n          exerciseId: seg.exercise_id,\n          exerciseName: seg.exercise_name || 'Unknown Exercise',\n          muscleGroup: seg.muscle_group || '',\n          startTime: seg.start_time,\n          endTime: seg.end_time,\n          keypoints: []\n        }));\n        setExerciseSegments(loadedSegments);\n      }\n      return;\n    }\n\n    // ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô state -> ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å BE\n    (async () => {\n      try {\n        var _v$kcal2, _v$description$match$2, _v$description$match2;\n        const token = localStorage.getItem(\"token\");\n        if (!token) return;\n\n        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\n        const res = await fetch(`http://localhost:8000/videos/${editId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!res.ok) return;\n        const v = await res.json();\n        setName(v.title || \"\");\n        setLevel(String(v.difficulty || v.level || \"1\"));\n        setKcal((_v$kcal2 = v.kcal) !== null && _v$kcal2 !== void 0 ? _v$kcal2 : typeof v.description === \"string\" ? (_v$description$match$2 = (_v$description$match2 = v.description.match(/kcal:(\\d+)/)) === null || _v$description$match2 === void 0 ? void 0 : _v$description$match2[1]) !== null && _v$description$match$2 !== void 0 ? _v$description$match$2 : \"\" : \"\");\n        const url = v.s3_url && (!/^https?:\\/\\//i.test(v.s3_url) ? `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}` : v.s3_url);\n        setFileURL(url || \"\");\n        if (url) {\n          setShowKeypoints(true);\n          setProcessingKeypoints(true);\n          setTimeout(() => setProcessingKeypoints(false), 2000);\n        }\n\n        // NEW: ‡∏î‡∏∂‡∏á segments ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß\n        try {\n          const segmentRes = await fetch(`http://localhost:8000/videos/${editId}/segments`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (segmentRes.ok) {\n            const segments = await segmentRes.json();\n            if (Array.isArray(segments) && segments.length > 0) {\n              const loadedSegments = segments.map((seg, index) => ({\n                id: Date.now() + index,\n                exerciseId: seg.exercise_id,\n                exerciseName: seg.exercise_name || 'Unknown Exercise',\n                muscleGroup: seg.muscle_group || '',\n                startTime: seg.start_time,\n                endTime: seg.end_time,\n                keypoints: []\n              }));\n              setExerciseSegments(loadedSegments);\n            }\n          }\n        } catch (segmentError) {\n          console.warn(\"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î segments ‡πÑ‡∏î‡πâ:\", segmentError);\n        }\n      } catch {}\n    })();\n  }, [isEdit, editId, location.state]);\n\n  // CHANGED: ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà (POST /videos) + ‡πÄ‡∏ä‡πá‡∏Ñ token + ‡∏Å‡∏±‡∏ô‡∏Å‡∏î‡∏ã‡πâ‡∏≥ + ‡πÅ‡∏™‡∏î‡∏á error ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô\n  const handleCreate = async () => {\n    if (!file || !name) {\n      alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\");\n      return;\n    }\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ token ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ (‡πÇ‡∏õ‡∏£‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Trainer)\");\n      return;\n    }\n    if (submitting) return;\n    setSubmitting(true);\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"title\", name);\n    formData.append(\"difficulty\", level);\n    formData.append(\"description\", `kcal:${kcal};verifying:true`);\n    formData.append(\"approved\", \"false\");\n\n    // NEW: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• exercise segments ‡∏û‡∏£‡πâ‡∏≠‡∏° debug\n    if (exerciseSegments.length > 0) {\n      const segmentsData = exerciseSegments.map(segment => ({\n        exercise_id: segment.exerciseId,\n        start_time: segment.startTime,\n        end_time: segment.endTime\n      }));\n      console.log(\"üî• Sending segments data:\", segmentsData);\n      formData.append(\"segments\", JSON.stringify(segmentsData));\n    } else {\n      console.log(\"‚ö†Ô∏è No segments to send\");\n    }\n\n    // Debug: Log all FormData contents\n    console.log(\"üì§ FormData contents:\");\n    for (let [key, value] of formData.entries()) {\n      console.log(`${key}:`, value);\n    }\n    try {\n      const res = await fetch(\"http://localhost:8000/videos\", {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        body: formData\n      });\n      console.log(\"üì• Response status:\", res.status);\n      if (!res.ok) {\n        let detail = \"\";\n        try {\n          const data = await res.json();\n          detail = data.detail || \"\";\n          console.error(\"‚ùå Response error:\", data);\n        } catch {}\n        if (res.status === 401) {\n          alert(`‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (401 Unauthorized)\\n${detail || \"Token ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á\"}`);\n        } else if (res.status === 403) {\n          alert(\"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (403) ‚Äî ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Trainer ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô\");\n        } else {\n          alert(`‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${res.status}) ${detail}`);\n        }\n        return;\n      }\n      const responseData = await res.json();\n      console.log(\"‚úÖ Upload success:\", responseData);\n\n      // ‡πÄ‡∏Å‡πá‡∏ö video ID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á segments\n      if (responseData.id) {\n        setVideoId(responseData.id);\n        console.log(`üìù Video ID saved: ${responseData.id}`);\n      }\n\n      // ‡∏´‡∏≤‡∏Å‡∏°‡∏µ segments ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô local state ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡πà‡∏≤‡∏ô API\n      if (responseData.id && exerciseSegments.length > 0) {\n        try {\n          setProcessingVideoKeypoints(true);\n          setKeypointsProgress({\n            status: \"Creating segments and processing keypoints...\",\n            current: 0,\n            total: exerciseSegments.length\n          });\n          const segmentsToCreate = exerciseSegments.map(segment => ({\n            exerciseId: parseInt(segment.exerciseId),\n            startTime: segment.startTime,\n            endTime: segment.endTime\n          }));\n          const results = await videoSegmentService.createMultipleSegments(responseData.id, segmentsToCreate, progress => {\n            console.log('üìä Multiple segments progress:', progress);\n            setKeypointsProgress({\n              status: `Processing segments... ${progress.completed + 1}/${progress.total}`,\n              current: progress.completed,\n              total: progress.total\n            });\n          });\n          console.log('‚úÖ All segments created:', results);\n          setKeypointsProgress({\n            status: `Completed! Created ${results.successful}/${results.total} segments with keypoints`,\n            current: results.total,\n            total: results.total,\n            completed: true\n          });\n          setTimeout(() => {\n            setKeypointsProgress(null);\n            setProcessingVideoKeypoints(false);\n          }, 3000);\n        } catch (error) {\n          console.error(\"‚ö†Ô∏è Segments creation failed:\", error);\n          setKeypointsProgress({\n            status: `Error creating segments: ${error.message}`,\n            error: true\n          });\n          setTimeout(() => {\n            setKeypointsProgress(null);\n            setProcessingVideoKeypoints(false);\n          }, 5000);\n        }\n      }\n      alert(`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (verifying)... ‡∏Ñ‡∏•‡∏¥‡∏õ‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Pending\\n${exerciseSegments.length > 0 ? `‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ${exerciseSegments.length} ‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß` : ''}`);\n      navigate(\"/trainer\");\n    } catch (e) {\n      console.error(\"‚ùå Upload error:\", e);\n      alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î: \" + ((e === null || e === void 0 ? void 0 : e.message) || e));\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // NEW: ‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö segments\n  const handleUpdate = async () => {\n    if (!name) {\n      alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\");\n      return;\n    }\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ token ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ (‡πÇ‡∏õ‡∏£‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Trainer)\");\n      return;\n    }\n    if (submitting) return;\n    setSubmitting(true);\n\n    // 1) ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï metadata\n    const metaRes = await fetch(`http://localhost:8000/videos/${editId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        title: name,\n        difficulty: level,\n        description: `kcal:${kcal}`\n      })\n    });\n    if (!metaRes.ok) {\n      let detail = \"\";\n      try {\n        const data = await metaRes.json();\n        detail = data.detail || \"\";\n      } catch {}\n      alert(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${metaRes.status}) ${detail}`);\n      setSubmitting(false);\n      return;\n    }\n\n    // 2) ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï segments (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)\n    if (exerciseSegments.length > 0) {\n      try {\n        const segmentRes = await fetch(`http://localhost:8000/videos/${editId}/segments`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          },\n          body: JSON.stringify({\n            segments: exerciseSegments.map(segment => ({\n              exercise_id: segment.exerciseId,\n              start_time: segment.startTime,\n              end_time: segment.endTime\n            }))\n          })\n        });\n        if (!segmentRes.ok) {\n          console.warn(\"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï segments ‡πÑ‡∏î‡πâ:\", segmentRes.status);\n        }\n      } catch (error) {\n        console.warn(\"Error updating segments:\", error);\n      }\n    }\n\n    // 3) ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà -> ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå\n    if (file) {\n      const fd = new FormData();\n      fd.append(\"file\", file);\n      const fileRes = await fetch(`http://localhost:8000/videos/${editId}/file`, {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        body: fd\n      });\n      if (!fileRes.ok) {\n        let detail = \"\";\n        try {\n          const data = await fileRes.json();\n          detail = data.detail || \"\";\n        } catch {}\n        alert(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${fileRes.status}) ${detail}`);\n        setSubmitting(false);\n        return;\n      }\n    }\n    alert(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢${exerciseSegments.length > 0 ? `\\n‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï ${exerciseSegments.length} ‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß` : ''}`);\n    setSubmitting(false);\n    navigate(\"/trainer\");\n  };\n\n  // header user\n  const today = new Date().toLocaleDateString(\"en-GB\", {\n    day: \"numeric\",\n    month: \"long\",\n    year: \"numeric\"\n  });\n  let user = {\n    name: \"Trainer\"\n  };\n  try {\n    const userData = localStorage.getItem(\"user\");\n    if (userData) {\n      const userObj = JSON.parse(userData);\n      user = {\n        name: userObj.name || \"Trainer\",\n        picture: userObj.picture || \"/user (1).png\"\n      };\n    }\n  } catch {}\n\n  // NEW: Time formatting helper\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // NEW: Remove segment function\n  const removeSegment = segmentId => {\n    setExerciseSegments(prev => prev.filter(seg => seg.id !== segmentId));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: \"100vh\",\n      background: \"linear-gradient(135deg,#f8fafc 0%, #e2e8f0 100%)\",\n      fontFamily: \"Inter, system-ui, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(TrainerHeader, {\n      user: user,\n      date: today\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 839,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: 1200,\n        margin: \"0 auto\",\n        marginTop: \"12px\",\n        marginBottom: \"8px\",\n        display: \"flex\",\n        alignItems: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/trainer\"),\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 8,\n          background: \"linear-gradient(90deg,#a855f7 0%, #ff4d8b 100%)\",\n          color: \"#fff\",\n          fontWeight: 700,\n          border: \"none\",\n          borderRadius: 999,\n          padding: \"8px 22px 8px 16px\",\n          fontSize: \"1.08rem\",\n          boxShadow: \"0 2px 8px #a855f733\",\n          cursor: \"pointer\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"20\",\n          height: \"20\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          style: {\n            marginRight: 4\n          },\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12.5 15l-5-5 5-5\",\n            stroke: \"#fff\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 876,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 869,\n          columnNumber: 11\n        }, this), \"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 852,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 842,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: 1200,\n        margin: \"0 auto\",\n        padding: \"8px 16px 40px 16px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: box({\n          padding: 24,\n          marginTop: 8\n        }),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          onDrop: onDrop,\n          onDragOver: onDragOver,\n          style: {\n            border: \"2px dashed #d1d5db\",\n            borderRadius: 16,\n            padding: \"36px 20px\",\n            textAlign: \"center\",\n            color: \"#6b7280\",\n            background: \"#f8fafc\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 18,\n              fontWeight: 700,\n              color: \"#111827\",\n              marginBottom: 6\n            },\n            children: isEdit ? \"Replace video (optional)\" : \"Select video to upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 904,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 16\n            },\n            children: \"Or drag and drop it here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 914,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onPick,\n            style: {\n              background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\n              color: \"#fff\",\n              fontWeight: 700,\n              border: \"none\",\n              borderRadius: 10,\n              padding: \"10px 18px\",\n              cursor: \"pointer\"\n            },\n            children: \"Select video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 915,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileRef,\n            type: \"file\",\n            accept: \"video/*\",\n            onChange: onFileChange,\n            style: {\n              display: \"none\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 929,\n            columnNumber: 13\n          }, this), file && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12,\n              color: \"#374151\"\n            },\n            children: [\"Selected: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: file.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 938,\n              columnNumber: 27\n            }, this), \" (\", Math.round(file.size / 1024 / 1024), \" MB)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 937,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 892,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 891,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"repeat(4,1fr)\",\n          gap: 16,\n          marginTop: 14\n        },\n        children: [{\n          title: \"Size and duration\",\n          desc: \"Maximum size: 30 GB, video duration: 60 minutes\"\n        }, {\n          title: \"File formats\",\n          desc: \"Recommended: .mp4 (others supported)\"\n        }, {\n          title: \"Video resolutions\",\n          desc: \"Better: 1080p/1440p/4K\"\n        }, {\n          title: \"Aspect ratios\",\n          desc: \"Recommended: 16:9\"\n        }].map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: \"14px 16px\"\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700,\n              color: \"#111827\",\n              marginBottom: 6\n            },\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 960,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 13,\n              color: \"#6b7280\",\n              lineHeight: 1.4\n            },\n            children: item.desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 963,\n            columnNumber: 15\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 959,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 945,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"1.1fr 1fr\",\n          gap: 20,\n          marginTop: 24\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: 20\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 20,\n                fontWeight: 800,\n                color: \"#111827\"\n              },\n              children: isEdit ? \"Edit details\" : \"Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 975,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPreview(p => !p),\n              style: {\n                border: \"1.5px solid #e5e7eb\",\n                background: \"#fff\",\n                color: \"#a855f7\",\n                borderRadius: 999,\n                padding: \"8px 14px\",\n                fontWeight: 700,\n                cursor: \"pointer\"\n              },\n              children: \"Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 978,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 974,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 18\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 995,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: name,\n              onChange: e => setName(e.target.value),\n              placeholder: \"e.g., Pushups \\u2013 Beginner Form\",\n              style: {\n                width: \"97%\",\n                padding: \"10px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #e5e7eb\",\n                outline: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 998,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 994,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 14\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Kcalories *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1013,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"0\",\n              value: kcal,\n              onChange: e => setKcal(e.target.value),\n              placeholder: \"e.g., 60\",\n              style: {\n                width: 240,\n                padding: \"10px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #e5e7eb\",\n                outline: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1016,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1012,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 14\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Level\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1033,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: level,\n              onChange: e => setLevel(e.target.value),\n              style: {\n                width: 180,\n                padding: \"10px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #e5e7eb\",\n                outline: \"none\",\n                background: \"#fff\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"Level 1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1048,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"Level 2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1049,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"Level 3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1050,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1036,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1032,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              gap: 12,\n              marginTop: 20\n            },\n            children: [isEdit ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleUpdate,\n              disabled: submitting // NEW: ‡∏Å‡∏±‡∏ô‡∏Å‡∏î‡∏ã‡πâ‡∏≥\n              ,\n              style: {\n                opacity: submitting ? 0.7 : 1,\n                // NEW: ‡∏ü‡∏µ‡∏î‡πÅ‡∏ö‡πá‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á\n                background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\n                color: \"#fff\",\n                fontWeight: 700,\n                border: \"none\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submitting ? \"not-allowed\" : \"pointer\"\n              },\n              children: submitting ? \"Updating...\" : \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1057,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (window.confirm(\"‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠ admin ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏•‡∏¥‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∂‡∏á‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Active\\n‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Pending\")) {\n                  handleCreate();\n                }\n              },\n              disabled: submitting,\n              style: {\n                opacity: submitting ? 0.7 : 1,\n                background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\n                color: \"#fff\",\n                fontWeight: 700,\n                border: \"none\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submitting ? \"not-allowed\" : \"pointer\",\n                display: \"inline-flex\",\n                alignItems: \"center\",\n                gap: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: process.env.PUBLIC_URL + \"/UploadSimple.png\",\n                alt: \"upload\",\n                style: {\n                  width: 20,\n                  height: 20,\n                  marginRight: 6,\n                  verticalAlign: \"middle\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1095,\n                columnNumber: 19\n              }, this), submitting ? \"Uploading...\" : \"Public\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1074,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSaveDraft,\n              disabled: submittingDraft,\n              style: {\n                background: \"#e5e7eb\",\n                color: \"#111827\",\n                fontWeight: 700,\n                border: \"none\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submittingDraft ? \"not-allowed\" : \"pointer\",\n                opacity: submittingDraft ? 0.7 : 1\n              },\n              children: submittingDraft ? \"Saving...\" : \"Save draft\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1108,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (window.confirm('Discard changes and go back to Trainer page?')) {\n                  navigate('/trainer');\n                }\n              },\n              disabled: submitting,\n              style: {\n                background: \"#fff\",\n                color: \"#6b7280\",\n                fontWeight: 700,\n                border: \"1px solid #e5e7eb\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submitting ? \"not-allowed\" : \"pointer\"\n              },\n              children: \"Discard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1124,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1055,\n            columnNumber: 13\n          }, this), processingVideoKeypoints && keypointsProgress && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 20,\n              padding: \"16px 20px\",\n              background: keypointsProgress.error ? \"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)\" : keypointsProgress.completed ? \"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)\" : \"linear-gradient(135deg, #fefce8 0%, #fef3c7 100%)\",\n              border: keypointsProgress.error ? \"2px solid #f87171\" : keypointsProgress.completed ? \"2px solid #22c55e\" : \"2px solid #f59e0b\",\n              borderRadius: 12,\n              boxShadow: \"0 4px 12px rgba(0,0,0,0.1)\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: 12,\n                marginBottom: 12\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: 24,\n                  height: 24,\n                  borderRadius: \"50%\",\n                  background: keypointsProgress.error ? \"#ef4444\" : keypointsProgress.completed ? \"#22c55e\" : \"#f59e0b\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  color: \"white\",\n                  fontSize: 12,\n                  fontWeight: 700\n                },\n                children: keypointsProgress.error ? \"‚úï\" : keypointsProgress.completed ? \"‚úì\" : \"‚ö°\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1169,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 700,\n                  fontSize: 16,\n                  color: keypointsProgress.error ? \"#991b1b\" : keypointsProgress.completed ? \"#166534\" : \"#92400e\"\n                },\n                children: \"\\uD83E\\uDD16 AI Keypoints Processing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1187,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1163,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 14,\n                color: keypointsProgress.error ? \"#991b1b\" : keypointsProgress.completed ? \"#166534\" : \"#92400e\",\n                marginBottom: 8\n              },\n              children: keypointsProgress.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1200,\n              columnNumber: 17\n            }, this), !keypointsProgress.error && !keypointsProgress.completed && keypointsProgress.total > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: \"100%\",\n                height: 8,\n                background: \"#e5e7eb\",\n                borderRadius: 4,\n                overflow: \"hidden\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: `${keypointsProgress.current / keypointsProgress.total * 100}%`,\n                  height: \"100%\",\n                  background: \"linear-gradient(90deg, #f59e0b 0%, #d97706 100%)\",\n                  transition: \"width 0.3s ease\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1220,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1213,\n              columnNumber: 19\n            }, this), keypointsProgress.completed && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: \"#166534\",\n                marginTop: 8,\n                fontStyle: \"italic\"\n              },\n              children: \"\\u2728 Your video is now ready for AI-powered form analysis!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1230,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1147,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 973,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: 16,\n            minHeight: 300,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          }),\n          children: !fileURL ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"100%\",\n              height: 320,\n              borderRadius: 12,\n              background: \"#e5e7eb\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              color: \"#6b7280\"\n            },\n            children: \"\\\"No video selected\\\"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1254,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'relative',\n              width: '100%',\n              height: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              src: fileURL,\n              controls: true,\n              loop: true,\n              autoPlay: true,\n              muted: true,\n              onPlay: () => setIsVideoPlaying(true),\n              onPause: () => setIsVideoPlaying(false),\n              onEnded: () => setIsVideoPlaying(false),\n              onLoadedData: () => {\n                // Auto-play and enable keypoints when video loads\n                if (videoRef.current) {\n                  setVideoDuration(videoRef.current.duration);\n                  videoRef.current.play().catch(() => {\n                    // If autoplay fails, just continue without error\n                  });\n                }\n              },\n              onTimeUpdate: () => {\n                if (videoRef.current) {\n                  setCurrentTime(videoRef.current.currentTime);\n                }\n              },\n              style: {\n                width: '100%',\n                height: '100%',\n                maxHeight: 320,\n                objectFit: 'contain',\n                borderRadius: 12,\n                background: '#fff',\n                display: 'block'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1270,\n              columnNumber: 17\n            }, this), showKeypoints && /*#__PURE__*/_jsxDEV(KeypointOverlay, {\n              videoRef: videoRef,\n              isPlaying: isVideoPlaying,\n              onKeypointsDetected: detectedKeypoints => {\n                setKeypoints(detectedKeypoints);\n                // ‡πÄ‡∏Å‡πá‡∏ö keypoints ‡∏û‡∏£‡πâ‡∏≠‡∏° timestamp\n                if (detectedKeypoints && videoRef.current) {\n                  const timestamp = videoRef.current.currentTime;\n                  setAllKeypoints(prev => [...prev.filter(kp => Math.abs(kp.timestamp - timestamp) > 0.1),\n                  // ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á duplicate\n                  {\n                    timestamp,\n                    keypoints: detectedKeypoints\n                  }]);\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1305,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setShowKeypoints(!showKeypoints);\n                if (!showKeypoints) {\n                  setProcessingKeypoints(true);\n                  // ‡∏´‡∏¢‡∏∏‡∏î processing ‡∏´‡∏•‡∏±‡∏á 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏î‡∏π realistic)\n                  setTimeout(() => setProcessingKeypoints(false), 2000);\n                }\n              },\n              style: {\n                position: 'absolute',\n                top: 10,\n                right: 10,\n                background: showKeypoints ? '#10b981' : processingKeypoints ? '#f59e0b' : '#374151',\n                color: 'white',\n                border: 'none',\n                borderRadius: 8,\n                padding: '8px 12px',\n                fontSize: '12px',\n                cursor: 'pointer',\n                zIndex: 20\n              },\n              children: processingKeypoints ? 'Processing...' : showKeypoints ? 'Hide Keypoints' : 'Show Keypoints'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1323,\n              columnNumber: 17\n            }, this), showKeypoints && keypoints && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                top: 50,\n                right: 10,\n                background: 'rgba(0,0,0,0.7)',\n                color: 'white',\n                padding: '4px 8px',\n                borderRadius: 4,\n                fontSize: '11px',\n                zIndex: 20\n              },\n              children: [keypoints.length, \" keypoints detected\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1351,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                bottom: 50,\n                left: 10,\n                background: 'rgba(0,0,0,0.7)',\n                color: 'white',\n                padding: '4px 8px',\n                borderRadius: 4,\n                fontSize: '11px',\n                zIndex: 20\n              },\n              children: [formatTime(currentTime), \" / \", formatTime(videoDuration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1369,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1269,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 971,\n        columnNumber: 9\n      }, this), fileURL && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 24\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: 20\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 18,\n              fontWeight: 700,\n              color: \"#111827\",\n              marginBottom: 16\n            },\n            children: \"Exercise Time Segments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1393,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: \"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)\",\n              padding: 20,\n              borderRadius: 12,\n              marginBottom: 16,\n              border: \"2px solid #0ea5e9\"\n            },\n            children: [exerciseSegments.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: \"rgba(251, 191, 36, 0.1)\",\n                border: \"1px solid #f59e0b\",\n                borderRadius: 8,\n                padding: \"12px 16px\",\n                marginBottom: 16,\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: 16\n                },\n                children: \"\\u26A0\\uFE0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1417,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#92400e\",\n                  fontSize: 14,\n                  fontWeight: 500\n                },\n                children: \"\\u0E41\\u0E19\\u0E30\\u0E19\\u0E33\\u0E43\\u0E2B\\u0E49\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E17\\u0E48\\u0E32\\u0E2D\\u0E2D\\u0E01\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E01\\u0E32\\u0E22\\u0E2D\\u0E22\\u0E48\\u0E32\\u0E07\\u0E19\\u0E49\\u0E2D\\u0E22 1 \\u0E17\\u0E48\\u0E32 \\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E43\\u0E2B\\u0E49\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E2A\\u0E32\\u0E21\\u0E32\\u0E23\\u0E16\\u0E27\\u0E34\\u0E40\\u0E04\\u0E23\\u0E32\\u0E30\\u0E2B\\u0E4C keypoints \\u0E44\\u0E14\\u0E49\\u0E41\\u0E21\\u0E48\\u0E19\\u0E22\\u0E33\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1418,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1407,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 16\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: \"block\",\n                  fontWeight: 600,\n                  marginBottom: 8,\n                  color: \"#0c4a6e\"\n                },\n                children: \"\\uD83C\\uDFCB\\uFE0F Select Exercise\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1426,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  position: \"relative\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  value: newSegment.exerciseId,\n                  onChange: handleExerciseChange,\n                  disabled: loadingExercises,\n                  style: {\n                    width: \"100%\",\n                    maxWidth: \"450px\",\n                    padding: \"12px 16px\",\n                    borderRadius: 8,\n                    border: \"2px solid #0ea5e9\",\n                    outline: \"none\",\n                    fontSize: 14,\n                    fontWeight: 500,\n                    background: \"white\",\n                    cursor: loadingExercises ? \"wait\" : \"pointer\",\n                    appearance: \"none\",\n                    backgroundImage: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\")`,\n                    backgroundPosition: \"right 12px center\",\n                    backgroundRepeat: \"no-repeat\",\n                    backgroundSize: \"16px\",\n                    paddingRight: \"40px\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    style: {\n                      color: \"#6b7280\",\n                      fontStyle: \"italic\"\n                    },\n                    children: loadingExercises ? \"üîÑ Loading exercises...\" : \"-- Choose an exercise --\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1453,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                    label: \"\\uD83D\\uDCAA Upper Body\",\n                    style: {\n                      fontWeight: \"bold\",\n                      color: \"#374151\"\n                    },\n                    children: availableExercises.filter(ex => {\n                      var _ex$muscle_group, _ex$muscle_group2, _ex$muscle_group3, _ex$muscle_group4, _ex$muscle_group5;\n                      return ((_ex$muscle_group = ex.muscle_group) === null || _ex$muscle_group === void 0 ? void 0 : _ex$muscle_group.includes(\"Chest\")) || ((_ex$muscle_group2 = ex.muscle_group) === null || _ex$muscle_group2 === void 0 ? void 0 : _ex$muscle_group2.includes(\"Back\")) || ((_ex$muscle_group3 = ex.muscle_group) === null || _ex$muscle_group3 === void 0 ? void 0 : _ex$muscle_group3.includes(\"Triceps\")) || ((_ex$muscle_group4 = ex.muscle_group) === null || _ex$muscle_group4 === void 0 ? void 0 : _ex$muscle_group4.includes(\"Biceps\")) || ((_ex$muscle_group5 = ex.muscle_group) === null || _ex$muscle_group5 === void 0 ? void 0 : _ex$muscle_group5.includes(\"Shoulders\"));\n                    }).map(exercise => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: exercise.id,\n                      style: {\n                        padding: \"8px\",\n                        color: \"#111827\"\n                      },\n                      children: [exercise.name, \" (\", exercise.muscle_group, \")\"]\n                    }, exercise.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1464,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1458,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                    label: \"\\uD83E\\uDDB5 Lower Body\",\n                    style: {\n                      fontWeight: \"bold\",\n                      color: \"#374151\"\n                    },\n                    children: availableExercises.filter(ex => {\n                      var _ex$muscle_group6, _ex$muscle_group7, _ex$muscle_group8, _ex$muscle_group9;\n                      return ((_ex$muscle_group6 = ex.muscle_group) === null || _ex$muscle_group6 === void 0 ? void 0 : _ex$muscle_group6.includes(\"Legs\")) || ((_ex$muscle_group7 = ex.muscle_group) === null || _ex$muscle_group7 === void 0 ? void 0 : _ex$muscle_group7.includes(\"Glutes\")) || ((_ex$muscle_group8 = ex.muscle_group) === null || _ex$muscle_group8 === void 0 ? void 0 : _ex$muscle_group8.includes(\"Hamstrings\")) || ((_ex$muscle_group9 = ex.muscle_group) === null || _ex$muscle_group9 === void 0 ? void 0 : _ex$muscle_group9.includes(\"Calves\"));\n                    }).map(exercise => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: exercise.id,\n                      style: {\n                        padding: \"8px\",\n                        color: \"#111827\"\n                      },\n                      children: [exercise.name, \" (\", exercise.muscle_group, \")\"]\n                    }, exercise.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1480,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1475,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                    label: \"\\uD83C\\uDFAF Core & Abs\",\n                    style: {\n                      fontWeight: \"bold\",\n                      color: \"#374151\"\n                    },\n                    children: availableExercises.filter(ex => {\n                      var _ex$muscle_group0, _ex$muscle_group1;\n                      return ((_ex$muscle_group0 = ex.muscle_group) === null || _ex$muscle_group0 === void 0 ? void 0 : _ex$muscle_group0.includes(\"Core\")) || ((_ex$muscle_group1 = ex.muscle_group) === null || _ex$muscle_group1 === void 0 ? void 0 : _ex$muscle_group1.includes(\"Abs\"));\n                    }).map(exercise => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: exercise.id,\n                      style: {\n                        padding: \"8px\",\n                        color: \"#111827\"\n                      },\n                      children: [exercise.name, \" (\", exercise.muscle_group, \")\"]\n                    }, exercise.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1495,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1491,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                    label: \"\\uD83D\\uDD25 Cardio & Full Body\",\n                    style: {\n                      fontWeight: \"bold\",\n                      color: \"#374151\"\n                    },\n                    children: availableExercises.filter(ex => {\n                      var _ex$muscle_group10, _ex$muscle_group11;\n                      return ((_ex$muscle_group10 = ex.muscle_group) === null || _ex$muscle_group10 === void 0 ? void 0 : _ex$muscle_group10.includes(\"Full Body\")) || ((_ex$muscle_group11 = ex.muscle_group) === null || _ex$muscle_group11 === void 0 ? void 0 : _ex$muscle_group11.includes(\"Cardio\"));\n                    }).map(exercise => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: exercise.id,\n                      style: {\n                        padding: \"8px\",\n                        color: \"#111827\"\n                      },\n                      children: [exercise.name, \" (\", exercise.muscle_group, \")\"]\n                    }, exercise.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1510,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1506,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                    label: \"\\uD83E\\uDDD8 Flexibility & Stretch\",\n                    style: {\n                      fontWeight: \"bold\",\n                      color: \"#374151\"\n                    },\n                    children: availableExercises.filter(ex => {\n                      var _ex$muscle_group12, _ex$muscle_group13, _ex$name, _ex$name2;\n                      return ((_ex$muscle_group12 = ex.muscle_group) === null || _ex$muscle_group12 === void 0 ? void 0 : _ex$muscle_group12.includes(\"Stretch\")) || ((_ex$muscle_group13 = ex.muscle_group) === null || _ex$muscle_group13 === void 0 ? void 0 : _ex$muscle_group13.includes(\"Hips\")) || ((_ex$name = ex.name) === null || _ex$name === void 0 ? void 0 : _ex$name.toLowerCase().includes(\"stretch\")) || ((_ex$name2 = ex.name) === null || _ex$name2 === void 0 ? void 0 : _ex$name2.toLowerCase().includes(\"yoga\"));\n                    }).map(exercise => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: exercise.id,\n                      style: {\n                        padding: \"8px\",\n                        color: \"#111827\"\n                      },\n                      children: [exercise.name, \" (\", exercise.muscle_group, \")\"]\n                    }, exercise.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1526,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1521,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1430,\n                  columnNumber: 21\n                }, this), loadingExercises && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: \"absolute\",\n                    right: \"40px\",\n                    top: \"50%\",\n                    transform: \"translateY(-50%)\",\n                    width: \"16px\",\n                    height: \"16px\",\n                    border: \"2px solid #0ea5e9\",\n                    borderTop: \"2px solid transparent\",\n                    borderRadius: \"50%\",\n                    animation: \"spin 1s linear infinite\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1539,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1429,\n                columnNumber: 19\n              }, this), newSegment.exerciseId && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 8,\n                  padding: \"8px 12px\",\n                  background: \"rgba(14, 165, 233, 0.1)\",\n                  border: \"1px solid rgba(14, 165, 233, 0.3)\",\n                  borderRadius: 6,\n                  fontSize: 13,\n                  color: \"#0c4a6e\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Selected:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1565,\n                  columnNumber: 23\n                }, this), \" \", newSegment.exerciseName, ((_availableExercises$f = availableExercises.find(ex => ex.id == newSegment.exerciseId)) === null || _availableExercises$f === void 0 ? void 0 : _availableExercises$f.description) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 4,\n                    fontSize: 12,\n                    color: \"#6b7280\"\n                  },\n                  children: (_availableExercises$f2 = availableExercises.find(ex => ex.id == newSegment.exerciseId)) === null || _availableExercises$f2 === void 0 ? void 0 : _availableExercises$f2.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1567,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1556,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1425,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 1fr\",\n                gap: 20,\n                marginBottom: 16,\n                padding: 16,\n                background: \"rgba(255,255,255,0.6)\",\n                borderRadius: 8,\n                border: \"1px solid rgba(14, 165, 233, 0.3)\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: \"block\",\n                    fontWeight: 600,\n                    marginBottom: 8,\n                    fontSize: 14,\n                    color: \"#0c4a6e\"\n                  },\n                  children: \"\\u23F0 Start Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1587,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      background: newSegment.isSelectingStart ? \"#10b981\" : \"#f1f5f9\",\n                      color: newSegment.isSelectingStart ? \"white\" : \"#0c4a6e\",\n                      padding: \"12px 16px\",\n                      borderRadius: 8,\n                      fontSize: 18,\n                      fontWeight: 700,\n                      marginBottom: 8,\n                      border: newSegment.isSelectingStart ? \"2px solid #059669\" : \"2px solid #cbd5e1\"\n                    },\n                    children: formatTime(newSegment.startTime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1597,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: startTimeSelection,\n                    style: {\n                      background: newSegment.isSelectingStart ? \"linear-gradient(90deg, #10b981 0%, #059669 100%)\" : \"linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: 6,\n                      padding: \"8px 16px\",\n                      fontSize: 13,\n                      cursor: \"pointer\",\n                      fontWeight: 600,\n                      boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\n                      width: \"100%\"\n                    },\n                    children: newSegment.isSelectingStart ? \"‚úÖ Selected!\" : \"Use Current Time\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1609,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1596,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1586,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: \"block\",\n                    fontWeight: 600,\n                    marginBottom: 8,\n                    fontSize: 14,\n                    color: \"#0c4a6e\"\n                  },\n                  children: \"\\u23F0 End Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1632,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      background: newSegment.isSelectingEnd ? \"#10b981\" : \"#f1f5f9\",\n                      color: newSegment.isSelectingEnd ? \"white\" : \"#0c4a6e\",\n                      padding: \"12px 16px\",\n                      borderRadius: 8,\n                      fontSize: 18,\n                      fontWeight: 700,\n                      marginBottom: 8,\n                      border: newSegment.isSelectingEnd ? \"2px solid #059669\" : \"2px solid #cbd5e1\"\n                    },\n                    children: formatTime(newSegment.endTime)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1642,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: endTimeSelection,\n                    style: {\n                      background: newSegment.isSelectingEnd ? \"linear-gradient(90deg, #10b981 0%, #059669 100%)\" : \"linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: 6,\n                      padding: \"8px 16px\",\n                      fontSize: 13,\n                      cursor: \"pointer\",\n                      fontWeight: 600,\n                      boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\n                      width: \"100%\"\n                    },\n                    children: newSegment.isSelectingEnd ? \"‚úÖ Selected!\" : \"Use Current Time\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1654,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1641,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1631,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1576,\n              columnNumber: 17\n            }, this), newSegment.startTime < newSegment.endTime && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: \"rgba(16, 185, 129, 0.1)\",\n                border: \"1px solid #10b981\",\n                borderRadius: 6,\n                padding: \"8px 12px\",\n                marginBottom: 16,\n                textAlign: \"center\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#059669\",\n                  fontWeight: 600,\n                  fontSize: 14\n                },\n                children: [\"\\u23F1\\uFE0F Duration: \", Math.floor(newSegment.endTime - newSegment.startTime), \" seconds\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1687,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1679,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                gap: 12,\n                alignItems: \"center\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addExerciseSegment,\n                disabled: !newSegment.exerciseId || newSegment.startTime >= newSegment.endTime,\n                style: {\n                  background: !newSegment.exerciseId || newSegment.startTime >= newSegment.endTime ? \"#4196dbff\" : \"linear-gradient(90deg,#10b981 0%, #059669 100%)\",\n                  color: \"white\",\n                  border: \"none\",\n                  borderRadius: 8,\n                  padding: \"12px 24px\",\n                  fontSize: 14,\n                  fontWeight: 700,\n                  cursor: !newSegment.exerciseId || newSegment.startTime >= newSegment.endTime ? \"not-allowed\" : \"pointer\",\n                  boxShadow: \"0 2px 6px rgba(0,0,0,0.1)\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  gap: 8\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: process.env.PUBLIC_URL + \"/plus.png\",\n                  alt: \"add\",\n                  style: {\n                    width: 16,\n                    height: 16\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1716,\n                  columnNumber: 21\n                }, this), \"Add Exercise Segment\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1694,\n                columnNumber: 19\n              }, this), newSegment.exerciseName && newSegment.startTime < newSegment.endTime && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 13,\n                  color: \"#059669\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  background: \"rgba(16, 185, 129, 0.1)\",\n                  padding: \"8px 12px\",\n                  borderRadius: 6,\n                  fontWeight: 500\n                },\n                children: [\"\\u2728 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: newSegment.exerciseName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1735,\n                  columnNumber: 25\n                }, this), \"(\", formatTime(newSegment.startTime), \" - \", formatTime(newSegment.endTime), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1725,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1693,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1398,\n            columnNumber: 15\n          }, this), exerciseSegments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 700,\n                marginBottom: 12,\n                color: \"#374151\",\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: 8\n              },\n              children: [\"\\uD83D\\uDCCB Defined Segments (\", exerciseSegments.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1745,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"grid\",\n                gap: 8\n              },\n              children: exerciseSegments.map((segment, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                  background: \"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)\",\n                  border: \"2px solid #e5e7eb\",\n                  borderRadius: 10,\n                  padding: \"14px 18px\",\n                  boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 700,\n                      color: \"#111827\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      gap: 8,\n                      marginBottom: 4\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        background: \"linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)\",\n                        color: \"white\",\n                        borderRadius: \"50%\",\n                        width: 28,\n                        height: 28,\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        fontSize: 12,\n                        fontWeight: 700\n                      },\n                      children: index + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1779,\n                      columnNumber: 29\n                    }, this), segment.exerciseName, segment.muscleGroup && /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        background: \"rgba(59, 130, 246, 0.1)\",\n                        color: \"#1d4ed8\",\n                        padding: \"2px 8px\",\n                        borderRadius: 12,\n                        fontSize: 11,\n                        fontWeight: 600\n                      },\n                      children: segment.muscleGroup\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1795,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1771,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: 13,\n                      color: \"#6b7280\",\n                      marginLeft: 36\n                    },\n                    children: [\"\\u23F1\\uFE0F \", formatTime(segment.startTime), \" - \", formatTime(segment.endTime), /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginLeft: 8,\n                        background: \"rgba(16, 185, 129, 0.1)\",\n                        color: \"#059669\",\n                        padding: \"2px 6px\",\n                        borderRadius: 4,\n                        fontSize: 11,\n                        fontWeight: 600\n                      },\n                      children: [Math.floor(segment.endTime - segment.startTime), \"s duration\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1809,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1807,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1770,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeSegment(segment.id),\n                  style: {\n                    background: \"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)\",\n                    color: \"white\",\n                    border: \"none\",\n                    borderRadius: 6,\n                    padding: \"6px 12px\",\n                    fontSize: 12,\n                    cursor: \"pointer\",\n                    fontWeight: 600,\n                    boxShadow: \"0 2px 4px rgba(239, 68, 68, 0.3)\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: 6\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: process.env.PUBLIC_URL + \"/bin (1).png\",\n                    alt: \"remove\",\n                    style: {\n                      width: 14,\n                      height: 14\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1839,\n                    columnNumber: 27\n                  }, this), \"Remove\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1822,\n                  columnNumber: 25\n                }, this)]\n              }, segment.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1757,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1755,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1744,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1392,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1391,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 889,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 832,\n    columnNumber: 5\n  }, this);\n}\n_s(UploadVideo, \"6hqVgXkA5wccbaxsxplw2H+932s=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = UploadVideo;\nvar _c;\n$RefreshReg$(_c, \"UploadVideo\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","useLocation","TrainerHeader","VideoSegmentService","jsxDEV","_jsxDEV","box","extra","background","borderRadius","boxShadow","UploadVideo","_s","_location$state","_availableExercises$f","_availableExercises$f2","submittingDraft","setSubmittingDraft","videoRef","showKeypoints","setShowKeypoints","keypoints","setKeypoints","isVideoPlaying","setIsVideoPlaying","processingKeypoints","setProcessingKeypoints","allKeypoints","setAllKeypoints","videoDuration","setVideoDuration","currentTime","setCurrentTime","exerciseSegments","setExerciseSegments","newSegment","setNewSegment","exerciseId","exerciseName","startTime","endTime","isSelectingStart","isSelectingEnd","availableExercises","setAvailableExercises","loadingExercises","setLoadingExercises","videoSegmentService","videoId","setVideoId","fetchExercises","token","localStorage","getItem","res","fetch","headers","Authorization","ok","exercises","json","console","log","length","warn","id","name","muscle_group","description","error","processVideoKeypoints","setProcessingVideoKeypoints","setKeypointsProgress","status","current","total","result","keypointsProcessor","progress","processedSuccessfully","totalSegments","completed","setTimeout","message","addExerciseSegment","alert","editId","selectedExercise","find","ex","segment","Date","now","muscleGroup","prev","createSegmentWithKeypoints","parseInt","phase","newSegmentForState","exercise_id","start_time","end_time","hasKeypoints","keypoints_status","has_keypoints","keypointsFile","keypoints_file","startTimeSelection","endTimeSelection","handleExerciseChange","e","target","value","handleSaveDraft","file","formData","FormData","append","level","kcal","JSON","stringify","map","method","body","detail","data","navigate","location","fileRef","state","URLSearchParams","search","get","isEdit","setFile","fileURL","setFileURL","setName","setKcal","setLevel","preview","setPreview","submitting","setSubmitting","onPick","_fileRef$current","click","onFileChange","_e$target$files","f","files","URL","createObjectURL","onDrop","_e$dataTransfer$files","preventDefault","dataTransfer","onDragOver","_location$state2","video","_v$kcal","_v$description$match$","_v$description$match","v","title","String","difficulty","match","url","image","s3_url","test","replace","segments","Array","isArray","loadedSegments","seg","index","exercise_name","_v$kcal2","_v$description$match$2","_v$description$match2","segmentRes","segmentError","handleCreate","segmentsData","key","entries","responseData","segmentsToCreate","results","createMultipleSegments","successful","handleUpdate","metaRes","fd","fileRes","today","toLocaleDateString","day","month","year","user","userData","userObj","parse","picture","formatTime","seconds","mins","Math","floor","secs","toString","padStart","removeSegment","segmentId","filter","style","minHeight","fontFamily","children","date","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","marginTop","marginBottom","display","alignItems","onClick","gap","color","fontWeight","border","padding","fontSize","cursor","width","height","fill","xmlns","marginRight","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","textAlign","ref","type","accept","onChange","round","size","gridTemplateColumns","desc","item","idx","lineHeight","justifyContent","p","placeholder","outline","min","disabled","opacity","window","confirm","src","process","env","PUBLIC_URL","alt","verticalAlign","processingVideoKeypoints","keypointsProgress","overflow","transition","fontStyle","position","controls","loop","autoPlay","muted","onPlay","onPause","onEnded","onLoadedData","duration","play","catch","onTimeUpdate","maxHeight","objectFit","KeypointOverlay","isPlaying","onKeypointsDetected","detectedKeypoints","timestamp","kp","abs","top","right","zIndex","bottom","left","appearance","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","paddingRight","label","_ex$muscle_group","_ex$muscle_group2","_ex$muscle_group3","_ex$muscle_group4","_ex$muscle_group5","includes","exercise","_ex$muscle_group6","_ex$muscle_group7","_ex$muscle_group8","_ex$muscle_group9","_ex$muscle_group0","_ex$muscle_group1","_ex$muscle_group10","_ex$muscle_group11","_ex$muscle_group12","_ex$muscle_group13","_ex$name","_ex$name2","toLowerCase","transform","borderTop","animation","marginLeft","_c","$RefreshReg$"],"sources":["C:/Fit/frontend/src/pages/UploadVideo.js"],"sourcesContent":["// src/pages/UploadVideo.jsx\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport TrainerHeader from \"../components/TrainerHeader\";\r\nimport VideoSegmentService from \"../services/VideoSegmentService\";\r\n\r\nconst box = (extra = {}) => ({\r\n  background: \"#fff\",\r\n  borderRadius: 16,\r\n  boxShadow: \"0 2px 12px rgba(0,0,0,0.06)\",\r\n  ...extra,\r\n});\r\n\r\nexport default function UploadVideo() {\r\n  // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ loading ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏õ‡∏∏‡πà‡∏° save draft\r\n  const [submittingDraft, setSubmittingDraft] = useState(false);\r\n  \r\n  // State ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö keypoint overlay\r\n  const videoRef = useRef(null);\r\n  const [showKeypoints, setShowKeypoints] = useState(false);\r\n  const [keypoints, setKeypoints] = useState(null);\r\n  const [isVideoPlaying, setIsVideoPlaying] = useState(false);\r\n  const [processingKeypoints, setProcessingKeypoints] = useState(false);\r\n  const [allKeypoints, setAllKeypoints] = useState([]); // ‡πÄ‡∏Å‡πá‡∏ö keypoints ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\r\n  \r\n  // NEW: Time Picker States\r\n  const [videoDuration, setVideoDuration] = useState(0);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [exerciseSegments, setExerciseSegments] = useState([]);\r\n  const [newSegment, setNewSegment] = useState({\r\n    exerciseId: '',\r\n    exerciseName: '',\r\n    startTime: 0,\r\n    endTime: 0,\r\n    isSelectingStart: false,\r\n    isSelectingEnd: false\r\n  });\r\n  \r\n  // NEW: Available exercises from DB\r\n  const [availableExercises, setAvailableExercises] = useState([]);\r\n  const [loadingExercises, setLoadingExercises] = useState(false);\r\n\r\n  // NEW: Video segment service for simplified workflow\r\n  const [videoSegmentService] = useState(new VideoSegmentService());\r\n  \r\n  // NEW: ‡πÄ‡∏Å‡πá‡∏ö video ID ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å upload ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à\r\n  const [videoId, setVideoId] = useState(null);\r\n\r\n  // NEW: Fetch exercises from backend\r\n  useEffect(() => {\r\n    const fetchExercises = async () => {\r\n      setLoadingExercises(true);\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const res = await fetch(\"http://localhost:8000/exercises\", {\r\n          headers: token ? { Authorization: `Bearer ${token}` } : {}\r\n        });\r\n        \r\n        if (res.ok) {\r\n          const exercises = await res.json();\r\n          console.log(\"‚úÖ Exercises loaded from API:\", exercises.length);\r\n          setAvailableExercises(exercises);\r\n        } else {\r\n          console.warn(\"‚ö†Ô∏è API /exercises not available, using fallback data\");\r\n          // Fallback exercises ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô DB\r\n          setAvailableExercises([\r\n            // Upper Body\r\n            { id: 1, name: \"Push-up\", muscle_group: \"Chest/Triceps\", description: \"‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏î‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô\" },\r\n            { id: 2, name: \"Pull-up\", muscle_group: \"Back/Biceps\", description: \"‡∏î‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏ö‡∏≤‡∏£‡πå\" },\r\n            { id: 3, name: \"Dips\", muscle_group: \"Triceps/Chest\", description: \"‡∏î‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏≤‡∏ô‡∏ö‡∏≤‡∏£‡πå\" },\r\n            { id: 4, name: \"Shoulder Press\", muscle_group: \"Shoulders\", description: \"‡∏¢‡∏Å‡∏î‡∏±‡∏°‡πÄ‡∏ö‡∏•‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏´‡∏±‡∏ß\" },\r\n            // Lower Body\r\n            { id: 5, name: \"Squat\", muscle_group: \"Legs/Glutes\", description: \"‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏•‡∏∏‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô\" },\r\n            { id: 6, name: \"Lunge\", muscle_group: \"Legs/Glutes\", description: \"‡∏Å‡πâ‡∏≤‡∏ß‡∏Ç‡∏≤‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß\" },\r\n            { id: 7, name: \"Deadlift\", muscle_group: \"Hamstrings/Back\", description: \"‡∏Å‡πâ‡∏°‡∏¢‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô\" },\r\n            { id: 8, name: \"Calf Raise\", muscle_group: \"Calves\", description: \"‡∏¢‡∏∑‡∏ô‡πÄ‡∏Ç‡∏¢‡πà‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏ó‡πâ‡∏≤\" },  \r\n            // Core\r\n            { id: 9, name: \"Plank\", muscle_group: \"Core\", description: \"‡∏ó‡πà‡∏≤‡πÄ‡∏Å‡∏£‡πá‡∏á‡∏•‡∏≥‡∏ï‡∏±‡∏ß\" },\r\n            { id: 10, name: \"Sit-up\", muscle_group: \"Abs\", description: \"‡∏á‡∏≠‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô\" },\r\n            { id: 11, name: \"Crunch\", muscle_group: \"Abs\", description: \"‡πÄ‡∏Å‡∏£‡πá‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢\" },\r\n            { id: 12, name: \"Russian Twist\", muscle_group: \"Core\", description: \"‡∏ö‡∏¥‡∏î‡∏•‡∏≥‡∏ï‡∏±‡∏ß‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤\" },\r\n            { id: 13, name: \"Leg Raise\", muscle_group: \"Lower Abs\", description: \"‡∏¢‡∏Å‡∏Ç‡∏≤‡∏ï‡∏£‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏•‡∏á\" },\r\n            // Cardio\r\n            { id: 14, name: \"Jumping Jack\", muscle_group: \"Full Body\", description: \"‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏Å‡∏≤‡∏á‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤\" },\r\n            { id: 15, name: \"Burpee\", muscle_group: \"Full Body\", description: \"‡∏¢‡∏∑‡∏ô-‡∏ß‡∏¥‡∏î‡∏û‡∏∑‡πâ‡∏ô-‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î\" },\r\n            { id: 16, name: \"Mountain Climber\", muscle_group: \"Core/Legs\", description: \"‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πà‡∏≤‡∏ä‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô\" },\r\n            { id: 17, name: \"High Knees\", muscle_group: \"Legs/Cardio\", description: \"‡∏ß‡∏¥‡πà‡∏á‡∏¢‡∏Å‡πÄ‡∏Ç‡πà‡∏≤‡∏™‡∏π‡∏á\" },\r\n            // Flexibility\r\n            { id: 18, name: \"Stretching Hamstrings\", muscle_group: \"Hamstrings\", description: \"‡∏¢‡∏∑‡∏î‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤\" },\r\n            { id: 19, name: \"Stretching Shoulders\", muscle_group: \"Shoulders\", description: \"‡∏¢‡∏∑‡∏î‡πÑ‡∏´‡∏•‡πà\" },\r\n            { id: 20, name: \"Yoga Downward Dog\", muscle_group: \"Full Body Stretch\", description: \"‡∏ó‡πà‡∏≤‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏Å‡πâ‡∏°\" },\r\n            { id: 21, name: \"Hip Opener Stretch\", muscle_group: \"Hips\", description: \"‡∏¢‡∏∑‡∏î‡∏™‡∏∞‡πÇ‡∏û‡∏Å\" }\r\n          ]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"‚ùå Error fetching exercises:\", error);\r\n        // Fallback exercises (Popular ones)\r\n        setAvailableExercises([\r\n          { id: 1, name: \"Push-up\", muscle_group: \"Chest/Triceps\", description: \"‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏î‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å‡∏û‡∏∑‡πâ‡∏ô\" },\r\n          { id: 5, name: \"Squat\", muscle_group: \"Legs/Glutes\", description: \"‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏•‡∏∏‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô\" },\r\n          { id: 9, name: \"Plank\", muscle_group: \"Core\", description: \"‡∏ó‡πà‡∏≤‡πÄ‡∏Å‡∏£‡πá‡∏á‡∏•‡∏≥‡∏ï‡∏±‡∏ß\" },\r\n          { id: 14, name: \"Jumping Jack\", muscle_group: \"Full Body\", description: \"‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏Å‡∏≤‡∏á‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏≤\" },\r\n          { id: 15, name: \"Burpee\", muscle_group: \"Full Body\", description: \"‡∏¢‡∏∑‡∏ô-‡∏ß‡∏¥‡∏î‡∏û‡∏∑‡πâ‡∏ô-‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î\" }\r\n        ]);\r\n      } finally {\r\n        setLoadingExercises(false);\r\n      }\r\n    };\r\n\r\n    fetchExercises();\r\n  }, []);\r\n\r\n  // NEW: Function to process keypoints after video upload\r\n  const processVideoKeypoints = async (videoId) => {\r\n    try {\r\n      setProcessingVideoKeypoints(true);\r\n      setKeypointsProgress({ status: \"Starting keypoints processing...\", current: 0, total: 0 });\r\n\r\n      console.log(`üöÄ Starting keypoints processing for video ${videoId}`);\r\n\r\n      const result = await keypointsProcessor.processVideoKeypoints(videoId, (progress) => {\r\n        setKeypointsProgress(progress);\r\n        console.log(`üìä Progress: ${progress.current}/${progress.total} - ${progress.status}`);\r\n      });\r\n\r\n      console.log(\"‚úÖ Keypoints processing completed:\", result);\r\n      \r\n      setKeypointsProgress({\r\n        status: `Completed! Processed ${result.processedSuccessfully}/${result.totalSegments} segments`,\r\n        current: result.totalSegments,\r\n        total: result.totalSegments,\r\n        completed: true\r\n      });\r\n\r\n      // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏´‡πâ user ‡πÄ‡∏´‡πá‡∏ô\r\n      setTimeout(() => {\r\n        setKeypointsProgress(null);\r\n        setProcessingVideoKeypoints(false);\r\n      }, 3000);\r\n\r\n    } catch (error) {\r\n      console.error(\"‚ùå Keypoints processing failed:\", error);\r\n      setKeypointsProgress({\r\n        status: `Error: ${error.message}`,\r\n        error: true\r\n      });\r\n      \r\n      setTimeout(() => {\r\n        setKeypointsProgress(null);\r\n        setProcessingVideoKeypoints(false);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  // NEW: Add segment function with immediate keypoints processing\r\n  const addExerciseSegment = async () => {\r\n    if (!newSegment.exerciseId) {\r\n      alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢');\r\n      return;\r\n    }\r\n    if (newSegment.startTime >= newSegment.endTime) {\r\n      alert('‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏ö\\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡∏°‡πà');\r\n      return;\r\n    }\r\n    if (newSegment.endTime - newSegment.startTime < 5) {\r\n      alert('‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ');\r\n      return;\r\n    }\r\n\r\n    // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏°‡∏µ editId) ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏î‡∏¥‡∏°\r\n    if (editId) {\r\n      const selectedExercise = availableExercises.find(ex => ex.id == newSegment.exerciseId);\r\n      const segment = {\r\n        id: Date.now(),\r\n        exerciseId: newSegment.exerciseId,\r\n        exerciseName: selectedExercise?.name || 'Unknown Exercise',\r\n        muscleGroup: selectedExercise?.muscle_group || '',\r\n        startTime: newSegment.startTime,\r\n        endTime: newSegment.endTime,\r\n        keypoints: []\r\n      };\r\n      \r\n      setExerciseSegments(prev => [...prev, segment]);\r\n      setNewSegment({ \r\n        exerciseId: '', \r\n        exerciseName: '', \r\n        startTime: 0, \r\n        endTime: 0, \r\n        isSelectingStart: false, \r\n        isSelectingEnd: false \r\n      });\r\n      return;\r\n    }\r\n\r\n    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡∏°‡∏µ video ID ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡πà‡∏≤‡∏ô API\r\n    if (videoId) {\r\n      try {\r\n        setProcessingVideoKeypoints(true);\r\n        setKeypointsProgress({\r\n          status: \"Creating segment and processing keypoints...\",\r\n          current: 0,\r\n          total: 1\r\n        });\r\n\r\n        const selectedExercise = availableExercises.find(ex => ex.id == newSegment.exerciseId);\r\n        \r\n        const result = await videoSegmentService.createSegmentWithKeypoints(\r\n          videoId,\r\n          {\r\n            exerciseId: parseInt(newSegment.exerciseId),\r\n            startTime: newSegment.startTime,\r\n            endTime: newSegment.endTime\r\n          },\r\n          (progress) => {\r\n            console.log('üìä Segment creation progress:', progress);\r\n            \r\n            if (progress.phase === 'created') {\r\n              setKeypointsProgress({\r\n                status: progress.message,\r\n                current: 0,\r\n                total: 1\r\n              });\r\n            } else if (progress.phase === 'processing') {\r\n              setKeypointsProgress({\r\n                status: progress.message,\r\n                current: 0.5,\r\n                total: 1\r\n              });\r\n            } else if (progress.phase === 'completed') {\r\n              setKeypointsProgress({\r\n                status: progress.message,\r\n                current: 1,\r\n                total: 1,\r\n                completed: true\r\n              });\r\n            } else if (progress.phase === 'error') {\r\n              setKeypointsProgress({\r\n                status: progress.message,\r\n                error: true\r\n              });\r\n            }\r\n          }\r\n        );\r\n\r\n        // ‡πÄ‡∏û‡∏¥‡πà‡∏° segment ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô state\r\n        const newSegmentForState = {\r\n          id: result.segment.id,\r\n          exerciseId: result.segment.exercise_id,\r\n          exerciseName: selectedExercise?.name || 'Unknown Exercise',\r\n          muscleGroup: selectedExercise?.muscle_group || '',\r\n          startTime: result.segment.start_time,\r\n          endTime: result.segment.end_time,\r\n          keypoints: [],\r\n          hasKeypoints: result.keypoints_status.has_keypoints,\r\n          keypointsFile: result.keypoints_status.keypoints_file\r\n        };\r\n        \r\n        setExerciseSegments(prev => [...prev, newSegmentForState]);\r\n        \r\n        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï form\r\n        setNewSegment({ \r\n          exerciseId: '', \r\n          exerciseName: '', \r\n          startTime: 0, \r\n          endTime: 0, \r\n          isSelectingStart: false, \r\n          isSelectingEnd: false \r\n        });\r\n\r\n        // ‡∏ã‡πà‡∏≠‡∏ô progress ‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ\r\n        setTimeout(() => {\r\n          setKeypointsProgress(null);\r\n          setProcessingVideoKeypoints(false);\r\n        }, 3000);\r\n\r\n        console.log('‚úÖ Segment created with keypoints:', result);\r\n\r\n      } catch (error) {\r\n        console.error('‚ùå Error creating segment:', error);\r\n        setKeypointsProgress({\r\n          status: `Error: ${error.message}`,\r\n          error: true\r\n        });\r\n\r\n        setTimeout(() => {\r\n          setKeypointsProgress(null);\r\n          setProcessingVideoKeypoints(false);\r\n        }, 5000);\r\n\r\n        alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á segment: ${error.message}`);\r\n      }\r\n    } else {\r\n      // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ videoId ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏î‡∏¥‡∏° (‡πÄ‡∏Å‡πá‡∏ö local state)\r\n      const selectedExercise = availableExercises.find(ex => ex.id == newSegment.exerciseId);\r\n      const segment = {\r\n        id: Date.now(),\r\n        exerciseId: newSegment.exerciseId,\r\n        exerciseName: selectedExercise?.name || 'Unknown Exercise',\r\n        muscleGroup: selectedExercise?.muscle_group || '',\r\n        startTime: newSegment.startTime,\r\n        endTime: newSegment.endTime,\r\n        keypoints: []\r\n      };\r\n      \r\n      setExerciseSegments(prev => [...prev, segment]);\r\n      setNewSegment({ \r\n        exerciseId: '', \r\n        exerciseName: '', \r\n        startTime: 0, \r\n        endTime: 0, \r\n        isSelectingStart: false, \r\n        isSelectingEnd: false \r\n      });\r\n    }\r\n  };\r\n\r\n  // NEW: Start selecting time range\r\n  const startTimeSelection = () => {\r\n    if (videoRef.current) {\r\n      setNewSegment(prev => ({\r\n        ...prev,\r\n        startTime: videoRef.current.currentTime,\r\n        isSelectingStart: true,\r\n        isSelectingEnd: false\r\n      }));\r\n      \r\n      // Auto-highlight the start time for 2 seconds\r\n      setTimeout(() => {\r\n        setNewSegment(prev => ({ ...prev, isSelectingStart: false }));\r\n      }, 2000);\r\n    }\r\n  };\r\n\r\n  // NEW: End selecting time range\r\n  const endTimeSelection = () => {\r\n    if (videoRef.current) {\r\n      setNewSegment(prev => ({\r\n        ...prev,\r\n        endTime: videoRef.current.currentTime,\r\n        isSelectingEnd: true\r\n      }));\r\n      \r\n      // Auto-highlight the end time for 2 seconds\r\n      setTimeout(() => {\r\n        setNewSegment(prev => ({ ...prev, isSelectingEnd: false }));\r\n      }, 2000);\r\n    }\r\n  };\r\n\r\n  // NEW: Handle exercise selection\r\n  const handleExerciseChange = (e) => {\r\n    const exerciseId = e.target.value;\r\n    const selectedExercise = availableExercises.find(ex => ex.id == exerciseId);\r\n    setNewSegment(prev => ({\r\n      ...prev,\r\n      exerciseId,\r\n      exerciseName: selectedExercise?.name || ''\r\n    }));\r\n  };\r\n\r\n  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô save draft - ‡πÄ‡∏û‡∏¥‡πà‡∏° segments\r\n  const handleSaveDraft = async () => {\r\n    if (!file || !name) {\r\n      alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ token ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ (‡πÇ‡∏õ‡∏£‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Trainer)\");\r\n      return;\r\n    }\r\n    if (submittingDraft) return;\r\n    setSubmittingDraft(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"title\", name);\r\n    formData.append(\"difficulty\", level);\r\n    formData.append(\"description\", `kcal:${kcal};draft:true`);\r\n    formData.append(\"approved\", \"false\");\r\n    \r\n    // NEW: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• exercise segments ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö draft ‡∏î‡πâ‡∏ß‡∏¢\r\n    if (exerciseSegments.length > 0) {\r\n      formData.append(\"segments\", JSON.stringify(exerciseSegments.map(segment => ({\r\n        exercise_id: segment.exerciseId,\r\n        start_time: segment.startTime,\r\n        end_time: segment.endTime\r\n      }))));\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:8000/videos\", {\r\n        method: \"POST\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        body: formData,\r\n      });\r\n      if (!res.ok) {\r\n        let detail = \"\";\r\n        try {\r\n          const data = await res.json();\r\n          detail = data.detail || \"\";\r\n        } catch {}\r\n        alert(`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å draft ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${res.status}) ${detail}`);\r\n        return;\r\n      }\r\n      alert(`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å draft ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ${exerciseSegments.length > 0 ? `\\n‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ${exerciseSegments.length} ‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß` : ''}`);\r\n      navigate(\"/trainer\");\r\n    } catch (e) {\r\n      alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å draft: \" + (e?.message || e));\r\n    } finally {\r\n      setSubmittingDraft(false);\r\n    }\r\n  };\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const fileRef = useRef(null);\r\n\r\n  // NEW: ‡πÅ‡∏¢‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≤‡∏Å state ‡∏´‡∏£‡∏∑‡∏≠ query (?id=)\r\n  const editId = location.state?.videoId || new URLSearchParams(location.search).get(\"id\");\r\n  const isEdit = !!editId;\r\n\r\n  // ‡∏ü‡∏≠‡∏£‡πå‡∏°\r\n  const [file, setFile] = useState(null);\r\n  const [fileURL, setFileURL] = useState(\"\"); // ‡πÉ‡∏ä‡πâ preview (‡∏ó‡∏±‡πâ‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà/‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°)\r\n  const [name, setName] = useState(\"\");\r\n  const [kcal, setKcal] = useState(\"\");\r\n  const [level, setLevel] = useState(\"1\");\r\n  const [preview, setPreview] = useState(false);\r\n\r\n  // NEW: ‡∏Å‡∏±‡∏ô‡∏Å‡∏î‡∏ã‡πâ‡∏≥ + ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡∏≠‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const onPick = () => fileRef.current?.click();\r\n  const onFileChange = (e) => {\r\n    const f = e.target.files?.[0];\r\n    if (!f) return;\r\n    setFile(f);\r\n    setFileURL(URL.createObjectURL(f));\r\n    setPreview(true); // Auto-enable preview when file is selected\r\n    // Auto-enable keypoints when new video is loaded\r\n    setShowKeypoints(true);\r\n    setProcessingKeypoints(true);\r\n    setTimeout(() => setProcessingKeypoints(false), 2000);\r\n  };\r\n  const onDrop = (e) => {\r\n    e.preventDefault();\r\n    const f = e.dataTransfer.files?.[0];\r\n    if (!f) return;\r\n    setFile(f);\r\n    setFileURL(URL.createObjectURL(f));\r\n    setPreview(true); // Auto-enable preview when file is dropped\r\n    // Auto-enable keypoints when new video is loaded\r\n    setShowKeypoints(true);\r\n    setProcessingKeypoints(true);\r\n    setTimeout(() => setProcessingKeypoints(false), 2000);\r\n  };\r\n  const onDragOver = (e) => e.preventDefault();\r\n\r\n  // NEW: Prefill ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏≤‡∏Å state ‡∏Å‡πà‡∏≠‡∏ô, ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡πá‡∏Ñ‡πà‡∏≠‡∏¢ GET /videos/:id)\r\n  useEffect(() => {\r\n    if (!isEdit) return;\r\n\r\n    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏Å‡∏±‡∏ö state ‡∏Å‡πá‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏•‡∏¢ (‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤)\r\n    if (location.state?.video) {\r\n      const v = location.state.video;\r\n      setName(v.title || \"\");\r\n      setLevel(String(v.difficulty || v.level || \"1\"));\r\n      setKcal(\r\n        v.kcal ??\r\n          (typeof v.description === \"string\"\r\n            ? (v.description.match(/kcal:(\\d+)/)?.[1] ?? \"\")\r\n            : \"\")\r\n      );\r\n      const url =\r\n        v.image ||\r\n        (v.s3_url\r\n          ? /^https?:\\/\\//i.test(v.s3_url)\r\n            ? v.s3_url\r\n            : `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}`\r\n          : \"\");\r\n      setFileURL(url);\r\n      // Auto-enable keypoints for edit mode\r\n      if (url) {\r\n        setShowKeypoints(true);\r\n        setProcessingKeypoints(true);\r\n        setTimeout(() => setProcessingKeypoints(false), 2000);\r\n      }\r\n      \r\n      // NEW: ‡πÇ‡∏´‡∏•‡∏î segments ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)\r\n      if (v.segments && Array.isArray(v.segments)) {\r\n        const loadedSegments = v.segments.map((seg, index) => ({\r\n          id: Date.now() + index,\r\n          exerciseId: seg.exercise_id,\r\n          exerciseName: seg.exercise_name || 'Unknown Exercise',\r\n          muscleGroup: seg.muscle_group || '',\r\n          startTime: seg.start_time,\r\n          endTime: seg.end_time,\r\n          keypoints: []\r\n        }));\r\n        setExerciseSegments(loadedSegments);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô state -> ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å BE\r\n    (async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) return;\r\n        \r\n        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\r\n        const res = await fetch(`http://localhost:8000/videos/${editId}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        if (!res.ok) return;\r\n        const v = await res.json();\r\n        \r\n        setName(v.title || \"\");\r\n        setLevel(String(v.difficulty || v.level || \"1\"));\r\n        setKcal(\r\n          v.kcal ??\r\n            (typeof v.description === \"string\"\r\n              ? (v.description.match(/kcal:(\\d+)/)?.[1] ?? \"\")\r\n              : \"\")\r\n        );\r\n        const url =\r\n          v.s3_url &&\r\n          (!/^https?:\\/\\//i.test(v.s3_url)\r\n            ? `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}`\r\n            : v.s3_url);\r\n        setFileURL(url || \"\");\r\n        \r\n        if (url) {\r\n          setShowKeypoints(true);\r\n          setProcessingKeypoints(true);\r\n          setTimeout(() => setProcessingKeypoints(false), 2000);\r\n        }\r\n\r\n        // NEW: ‡∏î‡∏∂‡∏á segments ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß\r\n        try {\r\n          const segmentRes = await fetch(`http://localhost:8000/videos/${editId}/segments`, {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          });\r\n          \r\n          if (segmentRes.ok) {\r\n            const segments = await segmentRes.json();\r\n            if (Array.isArray(segments) && segments.length > 0) {\r\n              const loadedSegments = segments.map((seg, index) => ({\r\n                id: Date.now() + index,\r\n                exerciseId: seg.exercise_id,\r\n                exerciseName: seg.exercise_name || 'Unknown Exercise',\r\n                muscleGroup: seg.muscle_group || '',\r\n                startTime: seg.start_time,\r\n                endTime: seg.end_time,\r\n                keypoints: []\r\n              }));\r\n              setExerciseSegments(loadedSegments);\r\n            }\r\n          }\r\n        } catch (segmentError) {\r\n          console.warn(\"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î segments ‡πÑ‡∏î‡πâ:\", segmentError);\r\n        }\r\n      } catch {}\r\n    })();\r\n  }, [isEdit, editId, location.state]);\r\n\r\n  // CHANGED: ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà (POST /videos) + ‡πÄ‡∏ä‡πá‡∏Ñ token + ‡∏Å‡∏±‡∏ô‡∏Å‡∏î‡∏ã‡πâ‡∏≥ + ‡πÅ‡∏™‡∏î‡∏á error ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô\r\n  const handleCreate = async () => {\r\n    if (!file || !name) {\r\n      alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ token ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ (‡πÇ‡∏õ‡∏£‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Trainer)\");\r\n      return;\r\n    }\r\n    if (submitting) return;\r\n    setSubmitting(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"title\", name);\r\n    formData.append(\"difficulty\", level);\r\n    formData.append(\"description\", `kcal:${kcal};verifying:true`);\r\n    formData.append(\"approved\", \"false\");\r\n    \r\n    // NEW: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• exercise segments ‡∏û‡∏£‡πâ‡∏≠‡∏° debug\r\n    if (exerciseSegments.length > 0) {\r\n      const segmentsData = exerciseSegments.map(segment => ({\r\n        exercise_id: segment.exerciseId,\r\n        start_time: segment.startTime,\r\n        end_time: segment.endTime\r\n      }));\r\n      \r\n      console.log(\"üî• Sending segments data:\", segmentsData);\r\n      formData.append(\"segments\", JSON.stringify(segmentsData));\r\n    } else {\r\n      console.log(\"‚ö†Ô∏è No segments to send\");\r\n    }\r\n\r\n    // Debug: Log all FormData contents\r\n    console.log(\"üì§ FormData contents:\");\r\n    for (let [key, value] of formData.entries()) {\r\n      console.log(`${key}:`, value);\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:8000/videos\", {\r\n        method: \"POST\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        body: formData,\r\n      });\r\n\r\n      console.log(\"üì• Response status:\", res.status);\r\n      \r\n      if (!res.ok) {\r\n        let detail = \"\";\r\n        try {\r\n          const data = await res.json();\r\n          detail = data.detail || \"\";\r\n          console.error(\"‚ùå Response error:\", data);\r\n        } catch {}\r\n        if (res.status === 401) {\r\n          alert(`‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (401 Unauthorized)\\n${detail || \"Token ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á\"}`);\r\n        } else if (res.status === 403) {\r\n          alert(\"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (403) ‚Äî ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Trainer ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô\");\r\n        } else {\r\n          alert(`‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${res.status}) ${detail}`);\r\n        }\r\n        return;\r\n      }\r\n\r\n      const responseData = await res.json();\r\n      console.log(\"‚úÖ Upload success:\", responseData);\r\n      \r\n      // ‡πÄ‡∏Å‡πá‡∏ö video ID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á segments\r\n      if (responseData.id) {\r\n        setVideoId(responseData.id);\r\n        console.log(`üìù Video ID saved: ${responseData.id}`);\r\n      }\r\n      \r\n      // ‡∏´‡∏≤‡∏Å‡∏°‡∏µ segments ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô local state ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡πà‡∏≤‡∏ô API\r\n      if (responseData.id && exerciseSegments.length > 0) {\r\n        try {\r\n          setProcessingVideoKeypoints(true);\r\n          setKeypointsProgress({\r\n            status: \"Creating segments and processing keypoints...\",\r\n            current: 0,\r\n            total: exerciseSegments.length\r\n          });\r\n\r\n          const segmentsToCreate = exerciseSegments.map(segment => ({\r\n            exerciseId: parseInt(segment.exerciseId),\r\n            startTime: segment.startTime,\r\n            endTime: segment.endTime\r\n          }));\r\n\r\n          const results = await videoSegmentService.createMultipleSegments(\r\n            responseData.id,\r\n            segmentsToCreate,\r\n            (progress) => {\r\n              console.log('üìä Multiple segments progress:', progress);\r\n              setKeypointsProgress({\r\n                status: `Processing segments... ${progress.completed + 1}/${progress.total}`,\r\n                current: progress.completed,\r\n                total: progress.total\r\n              });\r\n            }\r\n          );\r\n\r\n          console.log('‚úÖ All segments created:', results);\r\n          \r\n          setKeypointsProgress({\r\n            status: `Completed! Created ${results.successful}/${results.total} segments with keypoints`,\r\n            current: results.total,\r\n            total: results.total,\r\n            completed: true\r\n          });\r\n\r\n          setTimeout(() => {\r\n            setKeypointsProgress(null);\r\n            setProcessingVideoKeypoints(false);\r\n          }, 3000);\r\n\r\n        } catch (error) {\r\n          console.error(\"‚ö†Ô∏è Segments creation failed:\", error);\r\n          setKeypointsProgress({\r\n            status: `Error creating segments: ${error.message}`,\r\n            error: true\r\n          });\r\n\r\n          setTimeout(() => {\r\n            setKeypointsProgress(null);\r\n            setProcessingVideoKeypoints(false);\r\n          }, 5000);\r\n        }\r\n      }\r\n      \r\n      alert(`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (verifying)... ‡∏Ñ‡∏•‡∏¥‡∏õ‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Pending\\n${exerciseSegments.length > 0 ? `‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ${exerciseSegments.length} ‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß` : ''}`);\r\n      navigate(\"/trainer\");\r\n    } catch (e) {\r\n      console.error(\"‚ùå Upload error:\", e);\r\n      alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î: \" + (e?.message || e));\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // NEW: ‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö segments\r\n  const handleUpdate = async () => {\r\n    if (!name) {\r\n      alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ token ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ (‡πÇ‡∏õ‡∏£‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Trainer)\");\r\n      return;\r\n    }\r\n    if (submitting) return;\r\n    setSubmitting(true);\r\n\r\n    // 1) ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï metadata\r\n    const metaRes = await fetch(`http://localhost:8000/videos/${editId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify({\r\n        title: name,\r\n        difficulty: level,\r\n        description: `kcal:${kcal}`,\r\n      }),\r\n    });\r\n    if (!metaRes.ok) {\r\n      let detail = \"\";\r\n      try {\r\n        const data = await metaRes.json();\r\n        detail = data.detail || \"\";\r\n      } catch {}\r\n      alert(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${metaRes.status}) ${detail}`);\r\n      setSubmitting(false);\r\n      return;\r\n    }\r\n\r\n    // 2) ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï segments (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)\r\n    if (exerciseSegments.length > 0) {\r\n      try {\r\n        const segmentRes = await fetch(`http://localhost:8000/videos/${editId}/segments`, {\r\n          method: \"PUT\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n          body: JSON.stringify({\r\n            segments: exerciseSegments.map(segment => ({\r\n              exercise_id: segment.exerciseId,\r\n              start_time: segment.startTime,\r\n              end_time: segment.endTime\r\n            }))\r\n          }),\r\n        });\r\n        \r\n        if (!segmentRes.ok) {\r\n          console.warn(\"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï segments ‡πÑ‡∏î‡πâ:\", segmentRes.status);\r\n        }\r\n      } catch (error) {\r\n        console.warn(\"Error updating segments:\", error);\r\n      }\r\n    }\r\n\r\n    // 3) ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà -> ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå\r\n    if (file) {\r\n      const fd = new FormData();\r\n      fd.append(\"file\", file);\r\n      const fileRes = await fetch(`http://localhost:8000/videos/${editId}/file`, {\r\n        method: \"PUT\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        body: fd,\r\n      });\r\n      if (!fileRes.ok) {\r\n        let detail = \"\";\r\n        try {\r\n          const data = await fileRes.json();\r\n          detail = data.detail || \"\";\r\n        } catch {}\r\n        alert(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${fileRes.status}) ${detail}`);\r\n        setSubmitting(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    alert(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢${exerciseSegments.length > 0 ? `\\n‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï ${exerciseSegments.length} ‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß` : ''}`);\r\n    setSubmitting(false);\r\n    navigate(\"/trainer\");\r\n  };\r\n\r\n  // header user\r\n  const today = new Date().toLocaleDateString(\"en-GB\", {\r\n    day: \"numeric\",\r\n    month: \"long\",\r\n    year: \"numeric\",\r\n  });\r\n  let user = { name: \"Trainer\" };\r\n  try {\r\n    const userData = localStorage.getItem(\"user\");\r\n    if (userData) {\r\n      const userObj = JSON.parse(userData);\r\n      user = {\r\n        name: userObj.name || \"Trainer\",\r\n        picture: userObj.picture || \"/user (1).png\",\r\n      };\r\n    }\r\n  } catch {}\r\n\r\n  // NEW: Time formatting helper\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  // NEW: Remove segment function\r\n  const removeSegment = (segmentId) => {\r\n    setExerciseSegments(prev => prev.filter(seg => seg.id !== segmentId));\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        minHeight: \"100vh\",\r\n        background: \"linear-gradient(135deg,#f8fafc 0%, #e2e8f0 100%)\",\r\n        fontFamily: \"Inter, system-ui, sans-serif\",\r\n      }}\r\n    >\r\n      <TrainerHeader user={user} date={today} />\r\n\r\n      {/* back button */}\r\n      <div\r\n        style={{\r\n          maxWidth: 1200,\r\n          margin: \"0 auto\",\r\n          marginTop: \"12px\",\r\n          marginBottom: \"8px\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <button\r\n          onClick={() => navigate(\"/trainer\")}\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: 8,\r\n            background: \"linear-gradient(90deg,#a855f7 0%, #ff4d8b 100%)\",\r\n            color: \"#fff\",\r\n            fontWeight: 700,\r\n            border: \"none\",\r\n            borderRadius: 999,\r\n            padding: \"8px 22px 8px 16px\",\r\n            fontSize: \"1.08rem\",\r\n            boxShadow: \"0 2px 8px #a855f733\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          <svg\r\n            width=\"20\"\r\n            height=\"20\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            style={{ marginRight: 4 }}\r\n          >\r\n            <path\r\n              d=\"M12.5 15l-5-5 5-5\"\r\n              stroke=\"#fff\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            />\r\n          </svg>\r\n          ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å\r\n        </button>\r\n      </div>\r\n\r\n      {/* Main */}\r\n      <div style={{ maxWidth: 1200, margin: \"0 auto\", padding: \"8px 16px 40px 16px\" }}>\r\n        {/* Upload area */}\r\n        <div style={box({ padding: 24, marginTop: 8 })}>\r\n          <div\r\n            onDrop={onDrop}\r\n            onDragOver={onDragOver}\r\n            style={{\r\n              border: \"2px dashed #d1d5db\",\r\n              borderRadius: 16,\r\n              padding: \"36px 20px\",\r\n              textAlign: \"center\",\r\n              color: \"#6b7280\",\r\n              background: \"#f8fafc\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                fontSize: 18,\r\n                fontWeight: 700,\r\n                color: \"#111827\",\r\n                marginBottom: 6,\r\n              }}\r\n            >\r\n              {isEdit ? \"Replace video (optional)\" : \"Select video to upload\"}\r\n            </div>\r\n            <div style={{ marginBottom: 16 }}>Or drag and drop it here</div>\r\n            <button\r\n              onClick={onPick}\r\n              style={{\r\n                background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\r\n                color: \"#fff\",\r\n                fontWeight: 700,\r\n                border: \"none\",\r\n                borderRadius: 10,\r\n                padding: \"10px 18px\",\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              Select video\r\n            </button>\r\n            <input\r\n              ref={fileRef}\r\n              type=\"file\"\r\n              accept=\"video/*\"\r\n              onChange={onFileChange}\r\n              style={{ display: \"none\" }}\r\n            />\r\n            {file && (\r\n              <div style={{ marginTop: 12, color: \"#374151\" }}>\r\n                Selected: <b>{file.name}</b> ({Math.round(file.size / 1024 / 1024)} MB)\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Info row */}\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(4,1fr)\",\r\n            gap: 16,\r\n            marginTop: 14,\r\n          }}\r\n        >\r\n          {[\r\n            { title: \"Size and duration\", desc: \"Maximum size: 30 GB, video duration: 60 minutes\" },\r\n            { title: \"File formats\", desc: \"Recommended: .mp4 (others supported)\" },\r\n            { title: \"Video resolutions\", desc: \"Better: 1080p/1440p/4K\" },\r\n            { title: \"Aspect ratios\", desc: \"Recommended: 16:9\" },\r\n          ].map((item, idx) => (\r\n            <div key={idx} style={box({ padding: \"14px 16px\" })}>\r\n              <div style={{ fontWeight: 700, color: \"#111827\", marginBottom: 6 }}>\r\n                {item.title}\r\n              </div>\r\n              <div style={{ fontSize: 13, color: \"#6b7280\", lineHeight: 1.4 }}>\r\n                {item.desc}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Details */}\r\n        <div style={{ display: \"grid\", gridTemplateColumns: \"1.1fr 1fr\", gap: 20, marginTop: 24 }}>\r\n          {/* Left form */}\r\n          <div style={box({ padding: 20 })}>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n              <div style={{ fontSize: 20, fontWeight: 800, color: \"#111827\" }}>\r\n                {isEdit ? \"Edit details\" : \"Details\"}\r\n              </div>\r\n              <button\r\n                onClick={() => setPreview((p) => !p)}\r\n                style={{\r\n                  border: \"1.5px solid #e5e7eb\",\r\n                  background: \"#fff\",\r\n                  color: \"#a855f7\",\r\n                  borderRadius: 999,\r\n                  padding: \"8px 14px\",\r\n                  fontWeight: 700,\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                Preview\r\n              </button>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 18 }}>\r\n              <label style={{ display: \"block\", fontWeight: 700, marginBottom: 6 }}>\r\n                Name *\r\n              </label>\r\n              <input\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                placeholder=\"e.g., Pushups ‚Äì Beginner Form\"\r\n                style={{\r\n                  width: \"97%\",\r\n                  padding: \"10px 12px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  outline: \"none\",\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 14 }}>\r\n              <label style={{ display: \"block\", fontWeight: 700, marginBottom: 6 }}>\r\n                Kcalories *\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                value={kcal}\r\n                onChange={(e) => setKcal(e.target.value)}\r\n                placeholder=\"e.g., 60\"\r\n                style={{\r\n                  width: 240,\r\n                  padding: \"10px 12px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  outline: \"none\",\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 14 }}>\r\n              <label style={{ display: \"block\", fontWeight: 700, marginBottom: 6 }}>\r\n                Level\r\n              </label>\r\n              <select\r\n                value={level}\r\n                onChange={(e) => setLevel(e.target.value)}\r\n                style={{\r\n                  width: 180,\r\n                  padding: \"10px 12px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  outline: \"none\",\r\n                  background: \"#fff\",\r\n                }}\r\n              >\r\n                <option value=\"1\">Level 1</option>\r\n                <option value=\"2\">Level 2</option>\r\n                <option value=\"3\">Level 3</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Action buttons */}\r\n            <div style={{ display: \"flex\", gap: 12, marginTop: 20 }}>\r\n              {isEdit ? (\r\n                <button\r\n                  onClick={handleUpdate}\r\n                  disabled={submitting}                       // NEW: ‡∏Å‡∏±‡∏ô‡∏Å‡∏î‡∏ã‡πâ‡∏≥\r\n                  style={{\r\n                    opacity: submitting ? 0.7 : 1,            // NEW: ‡∏ü‡∏µ‡∏î‡πÅ‡∏ö‡πá‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á\r\n                    background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\r\n                    color: \"#fff\",\r\n                    fontWeight: 700,\r\n                    border: \"none\",\r\n                    borderRadius: 10,\r\n                    padding: \"10px 16px\",\r\n                    cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n                  }}\r\n                >\r\n                  {submitting ? \"Updating...\" : \"Update\"}\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  onClick={() => {\r\n                    if (window.confirm(\"‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠ admin ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏•‡∏¥‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∂‡∏á‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Active\\n‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Pending\")) {\r\n                      handleCreate();\r\n                    }\r\n                  }}\r\n                  disabled={submitting}\r\n                  style={{\r\n                    opacity: submitting ? 0.7 : 1,\r\n                    background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\r\n                    color: \"#fff\",\r\n                    fontWeight: 700,\r\n                    border: \"none\",\r\n                    borderRadius: 10,\r\n                    padding: \"10px 16px\",\r\n                    cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n                    display: \"inline-flex\",\r\n                    alignItems: \"center\",\r\n                    gap: 8,\r\n                  }}\r\n                >\r\n                  <img\r\n                    src={process.env.PUBLIC_URL + \"/UploadSimple.png\"}\r\n                    alt=\"upload\"\r\n                    style={{\r\n                      width: 20,\r\n                      height: 20,\r\n                      marginRight: 6,\r\n                      verticalAlign: \"middle\",\r\n                    }}\r\n                  />\r\n                  {submitting ? \"Uploading...\" : \"Public\"}\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={handleSaveDraft}\r\n                disabled={submittingDraft}\r\n                style={{\r\n                  background: \"#e5e7eb\",\r\n                  color: \"#111827\",\r\n                  fontWeight: 700,\r\n                  border: \"none\",\r\n                  borderRadius: 10,\r\n                  padding: \"10px 16px\",\r\n                  cursor: submittingDraft ? \"not-allowed\" : \"pointer\",\r\n                  opacity: submittingDraft ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {submittingDraft ? \"Saving...\" : \"Save draft\"}\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  if (window.confirm('Discard changes and go back to Trainer page?')) {\r\n                    navigate('/trainer');\r\n                  }\r\n                }}\r\n                disabled={submitting}\r\n                style={{\r\n                  background: \"#fff\",\r\n                  color: \"#6b7280\",\r\n                  fontWeight: 700,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  borderRadius: 10,\r\n                  padding: \"10px 16px\",\r\n                  cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n                }}\r\n              >\r\n                Discard\r\n              </button>\r\n            </div>\r\n\r\n            {/* NEW: Keypoints Processing Status */}\r\n            {processingVideoKeypoints && keypointsProgress && (\r\n              <div style={{\r\n                marginTop: 20,\r\n                padding: \"16px 20px\",\r\n                background: keypointsProgress.error \r\n                  ? \"linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)\"\r\n                  : keypointsProgress.completed\r\n                  ? \"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)\"\r\n                  : \"linear-gradient(135deg, #fefce8 0%, #fef3c7 100%)\",\r\n                border: keypointsProgress.error\r\n                  ? \"2px solid #f87171\"\r\n                  : keypointsProgress.completed\r\n                  ? \"2px solid #22c55e\"\r\n                  : \"2px solid #f59e0b\",\r\n                borderRadius: 12,\r\n                boxShadow: \"0 4px 12px rgba(0,0,0,0.1)\"\r\n              }}>\r\n                <div style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  gap: 12,\r\n                  marginBottom: 12\r\n                }}>\r\n                  <div style={{\r\n                    width: 24,\r\n                    height: 24,\r\n                    borderRadius: \"50%\",\r\n                    background: keypointsProgress.error\r\n                      ? \"#ef4444\"\r\n                      : keypointsProgress.completed\r\n                      ? \"#22c55e\"\r\n                      : \"#f59e0b\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    color: \"white\",\r\n                    fontSize: 12,\r\n                    fontWeight: 700\r\n                  }}>\r\n                    {keypointsProgress.error ? \"‚úï\" : keypointsProgress.completed ? \"‚úì\" : \"‚ö°\"}\r\n                  </div>\r\n                  <div style={{\r\n                    fontWeight: 700,\r\n                    fontSize: 16,\r\n                    color: keypointsProgress.error\r\n                      ? \"#991b1b\"\r\n                      : keypointsProgress.completed\r\n                      ? \"#166534\"\r\n                      : \"#92400e\"\r\n                  }}>\r\n                    ü§ñ AI Keypoints Processing\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{\r\n                  fontSize: 14,\r\n                  color: keypointsProgress.error\r\n                    ? \"#991b1b\"\r\n                    : keypointsProgress.completed\r\n                    ? \"#166534\"\r\n                    : \"#92400e\",\r\n                  marginBottom: 8\r\n                }}>\r\n                  {keypointsProgress.status}\r\n                </div>\r\n\r\n                {!keypointsProgress.error && !keypointsProgress.completed && keypointsProgress.total > 0 && (\r\n                  <div style={{\r\n                    width: \"100%\",\r\n                    height: 8,\r\n                    background: \"#e5e7eb\",\r\n                    borderRadius: 4,\r\n                    overflow: \"hidden\"\r\n                  }}>\r\n                    <div style={{\r\n                      width: `${(keypointsProgress.current / keypointsProgress.total) * 100}%`,\r\n                      height: \"100%\",\r\n                      background: \"linear-gradient(90deg, #f59e0b 0%, #d97706 100%)\",\r\n                      transition: \"width 0.3s ease\"\r\n                    }} />\r\n                  </div>\r\n                )}\r\n\r\n                {keypointsProgress.completed && (\r\n                  <div style={{\r\n                    fontSize: 12,\r\n                    color: \"#166534\",\r\n                    marginTop: 8,\r\n                    fontStyle: \"italic\"\r\n                  }}>\r\n                    ‚ú® Your video is now ready for AI-powered form analysis!\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Right preview pane */}\r\n          <div\r\n            style={box({\r\n              padding: 16,\r\n              minHeight: 300,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            })}\r\n          >\r\n            {!fileURL ? (\r\n              <div\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: 320,\r\n                  borderRadius: 12,\r\n                  background: \"#e5e7eb\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  color: \"#6b7280\",\r\n                }}\r\n              >\r\n                \"No video selected\"\r\n              </div>\r\n            ) : (\r\n              <div style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n                <video\r\n                  ref={videoRef}\r\n                  src={fileURL}\r\n                  controls\r\n                  loop\r\n                  autoPlay\r\n                  muted\r\n                  onPlay={() => setIsVideoPlaying(true)}\r\n                  onPause={() => setIsVideoPlaying(false)}\r\n                  onEnded={() => setIsVideoPlaying(false)}\r\n                  onLoadedData={() => {\r\n                    // Auto-play and enable keypoints when video loads\r\n                    if (videoRef.current) {\r\n                      setVideoDuration(videoRef.current.duration);\r\n                      videoRef.current.play().catch(() => {\r\n                        // If autoplay fails, just continue without error\r\n                      });\r\n                    }\r\n                  }}\r\n                  onTimeUpdate={() => {\r\n                    if (videoRef.current) {\r\n                      setCurrentTime(videoRef.current.currentTime);\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    maxHeight: 320,\r\n                    objectFit: 'contain',\r\n                    borderRadius: 12,\r\n                    background: '#fff',\r\n                    display: 'block'\r\n                  }}\r\n                />\r\n                {showKeypoints && (\r\n                  <KeypointOverlay\r\n                    videoRef={videoRef}\r\n                    isPlaying={isVideoPlaying}\r\n                    onKeypointsDetected={(detectedKeypoints) => {\r\n                      setKeypoints(detectedKeypoints);\r\n                      // ‡πÄ‡∏Å‡πá‡∏ö keypoints ‡∏û‡∏£‡πâ‡∏≠‡∏° timestamp\r\n                      if (detectedKeypoints && videoRef.current) {\r\n                        const timestamp = videoRef.current.currentTime;\r\n                        setAllKeypoints(prev => [\r\n                          ...prev.filter(kp => Math.abs(kp.timestamp - timestamp) > 0.1), // ‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á duplicate\r\n                          { timestamp, keypoints: detectedKeypoints }\r\n                        ]);\r\n                      }\r\n                    }}\r\n                  />\r\n                )}\r\n                \r\n                {/* Toggle button for keypoints */}\r\n                <button\r\n                  onClick={() => {\r\n                    setShowKeypoints(!showKeypoints);\r\n                    if (!showKeypoints) {\r\n                      setProcessingKeypoints(true);\r\n                      // ‡∏´‡∏¢‡∏∏‡∏î processing ‡∏´‡∏•‡∏±‡∏á 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏î‡∏π realistic)\r\n                      setTimeout(() => setProcessingKeypoints(false), 2000);\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    top: 10,\r\n                    right: 10,\r\n                    background: showKeypoints ? '#10b981' : processingKeypoints ? '#f59e0b' : '#374151',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: 8,\r\n                    padding: '8px 12px',\r\n                    fontSize: '12px',\r\n                    cursor: 'pointer',\r\n                    zIndex: 20\r\n                  }}\r\n                >\r\n                  {processingKeypoints ? 'Processing...' : showKeypoints ? 'Hide Keypoints' : 'Show Keypoints'}\r\n                </button>\r\n                \r\n                {/* Keypoint count indicator */}\r\n                {showKeypoints && keypoints && (\r\n                  <div\r\n                    style={{\r\n                      position: 'absolute',\r\n                      top: 50,\r\n                      right: 10,\r\n                      background: 'rgba(0,0,0,0.7)',\r\n                      color: 'white',\r\n                      padding: '4px 8px',\r\n                      borderRadius: 4,\r\n                      fontSize: '11px',\r\n                      zIndex: 20\r\n                    }}\r\n                  >\r\n                    {keypoints.length} keypoints detected\r\n                  </div>\r\n                )}\r\n\r\n                {/* Current time display */}\r\n                <div\r\n                  style={{\r\n                    position: 'absolute',\r\n                    bottom: 50,\r\n                    left: 10,\r\n                    background: 'rgba(0,0,0,0.7)',\r\n                    color: 'white',\r\n                    padding: '4px 8px',\r\n                    borderRadius: 4,\r\n                    fontSize: '11px',\r\n                    zIndex: 20\r\n                  }}\r\n                >\r\n                  {formatTime(currentTime)} / {formatTime(videoDuration)}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* NEW: Time Picker Section */}\r\n        {fileURL && (\r\n          <div style={{ marginTop: 24 }}>\r\n            <div style={box({ padding: 20 })}>\r\n              <div style={{ fontSize: 18, fontWeight: 700, color: \"#111827\", marginBottom: 16 }}>\r\n                Exercise Time Segments\r\n              </div>\r\n              \r\n              {/* Add new segment form */}\r\n              <div style={{ \r\n                background: \"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)\", \r\n                padding: 20, \r\n                borderRadius: 12, \r\n                marginBottom: 16,\r\n                border: \"2px solid #0ea5e9\"\r\n              }}>\r\n                {/* Validation message */}\r\n                {exerciseSegments.length === 0 && (\r\n                  <div style={{\r\n                    background: \"rgba(251, 191, 36, 0.1)\",\r\n                    border: \"1px solid #f59e0b\",\r\n                    borderRadius: 8,\r\n                    padding: \"12px 16px\",\r\n                    marginBottom: 16,\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    gap: 8\r\n                  }}>\r\n                    <span style={{ fontSize: 16 }}>‚ö†Ô∏è</span>\r\n                    <span style={{ color: \"#92400e\", fontSize: 14, fontWeight: 500 }}>\r\n                      ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ó‡πà‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå keypoints ‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥\r\n                    </span>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Exercise Selection Dropdown */}\r\n                <div style={{ marginBottom: 16 }}>\r\n                  <label style={{ display: \"block\", fontWeight: 600, marginBottom: 8, color: \"#0c4a6e\" }}>\r\n                    üèãÔ∏è Select Exercise\r\n                  </label>\r\n                  <div style={{ position: \"relative\" }}>\r\n                    <select\r\n                      value={newSegment.exerciseId}\r\n                      onChange={handleExerciseChange}\r\n                      disabled={loadingExercises}\r\n                      style={{\r\n                        width: \"100%\",\r\n                        maxWidth: \"450px\",\r\n                        padding: \"12px 16px\",\r\n                        borderRadius: 8,\r\n                        border: \"2px solid #0ea5e9\",\r\n                        outline: \"none\",\r\n                        fontSize: 14,\r\n                        fontWeight: 500,\r\n                        background: \"white\",\r\n                        cursor: loadingExercises ? \"wait\" : \"pointer\",\r\n                        appearance: \"none\",\r\n                        backgroundImage: `url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\")`,\r\n                        backgroundPosition: \"right 12px center\",\r\n                        backgroundRepeat: \"no-repeat\",\r\n                        backgroundSize: \"16px\",\r\n                        paddingRight: \"40px\"\r\n                      }}\r\n                    >\r\n                      <option value=\"\" style={{ color: \"#6b7280\", fontStyle: \"italic\" }}>\r\n                        {loadingExercises ? \"üîÑ Loading exercises...\" : \"-- Choose an exercise --\"}\r\n                      </option>\r\n                      \r\n                      {/* Upper Body Group */}\r\n                      <optgroup label=\"üí™ Upper Body\" style={{ fontWeight: \"bold\", color: \"#374151\" }}>\r\n                        {availableExercises\r\n                          .filter(ex => ex.muscle_group?.includes(\"Chest\") || ex.muscle_group?.includes(\"Back\") || \r\n                                       ex.muscle_group?.includes(\"Triceps\") || ex.muscle_group?.includes(\"Biceps\") || \r\n                                       ex.muscle_group?.includes(\"Shoulders\"))\r\n                          .map((exercise) => (\r\n                            <option \r\n                              key={exercise.id} \r\n                              value={exercise.id}\r\n                              style={{ padding: \"8px\", color: \"#111827\" }}\r\n                            >\r\n                              {exercise.name} ({exercise.muscle_group})\r\n                            </option>\r\n                          ))}\r\n                      </optgroup>\r\n\r\n                      {/* Lower Body Group */}\r\n                      <optgroup label=\"ü¶µ Lower Body\" style={{ fontWeight: \"bold\", color: \"#374151\" }}>\r\n                        {availableExercises\r\n                          .filter(ex => ex.muscle_group?.includes(\"Legs\") || ex.muscle_group?.includes(\"Glutes\") || \r\n                                       ex.muscle_group?.includes(\"Hamstrings\") || ex.muscle_group?.includes(\"Calves\"))\r\n                          .map((exercise) => (\r\n                            <option \r\n                              key={exercise.id} \r\n                              value={exercise.id}\r\n                              style={{ padding: \"8px\", color: \"#111827\" }}\r\n                            >\r\n                              {exercise.name} ({exercise.muscle_group})\r\n                            </option>\r\n                          ))}\r\n                      </optgroup>\r\n\r\n                      {/* Core Group */}\r\n                      <optgroup label=\"üéØ Core & Abs\" style={{ fontWeight: \"bold\", color: \"#374151\" }}>\r\n                        {availableExercises\r\n                          .filter(ex => ex.muscle_group?.includes(\"Core\") || ex.muscle_group?.includes(\"Abs\"))\r\n                          .map((exercise) => (\r\n                            <option \r\n                              key={exercise.id} \r\n                              value={exercise.id}\r\n                              style={{ padding: \"8px\", color: \"#111827\" }}\r\n                            >\r\n                              {exercise.name} ({exercise.muscle_group})\r\n                            </option>\r\n                          ))}\r\n                      </optgroup>\r\n\r\n                      {/* Cardio/Full Body Group */}\r\n                      <optgroup label=\"üî• Cardio & Full Body\" style={{ fontWeight: \"bold\", color: \"#374151\" }}>\r\n                        {availableExercises\r\n                          .filter(ex => ex.muscle_group?.includes(\"Full Body\") || ex.muscle_group?.includes(\"Cardio\"))\r\n                          .map((exercise) => (\r\n                            <option \r\n                              key={exercise.id} \r\n                              value={exercise.id}\r\n                              style={{ padding: \"8px\", color: \"#111827\" }}\r\n                            >\r\n                              {exercise.name} ({exercise.muscle_group})\r\n                            </option>\r\n                          ))}\r\n                      </optgroup>\r\n\r\n                      {/* Flexibility Group */}\r\n                      <optgroup label=\"üßò Flexibility & Stretch\" style={{ fontWeight: \"bold\", color: \"#374151\" }}>\r\n                        {availableExercises\r\n                          .filter(ex => ex.muscle_group?.includes(\"Stretch\") || ex.muscle_group?.includes(\"Hips\") || \r\n                                       ex.name?.toLowerCase().includes(\"stretch\") || ex.name?.toLowerCase().includes(\"yoga\"))\r\n                          .map((exercise) => (\r\n                            <option \r\n                              key={exercise.id} \r\n                              value={exercise.id}\r\n                              style={{ padding: \"8px\", color: \"#111827\" }}\r\n                            >\r\n                              {exercise.name} ({exercise.muscle_group})\r\n                            </option>\r\n                          ))}\r\n                      </optgroup>\r\n                    </select>\r\n\r\n                    {/* Loading indicator */}\r\n                    {loadingExercises && (\r\n                      <div style={{\r\n                        position: \"absolute\",\r\n                        right: \"40px\",\r\n                        top: \"50%\",\r\n                        transform: \"translateY(-50%)\",\r\n                        width: \"16px\",\r\n                        height: \"16px\",\r\n                        border: \"2px solid #0ea5e9\",\r\n                        borderTop: \"2px solid transparent\",\r\n                        borderRadius: \"50%\",\r\n                        animation: \"spin 1s linear infinite\"\r\n                      }} />\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Exercise info display */}\r\n                  {newSegment.exerciseId && (\r\n                    <div style={{\r\n                      marginTop: 8,\r\n                      padding: \"8px 12px\",\r\n                      background: \"rgba(14, 165, 233, 0.1)\",\r\n                      border: \"1px solid rgba(14, 165, 233, 0.3)\",\r\n                      borderRadius: 6,\r\n                      fontSize: 13,\r\n                      color: \"#0c4a6e\"\r\n                    }}>\r\n                      <strong>Selected:</strong> {newSegment.exerciseName}\r\n                      {availableExercises.find(ex => ex.id == newSegment.exerciseId)?.description && (\r\n                        <div style={{ marginTop: 4, fontSize: 12, color: \"#6b7280\" }}>\r\n                          {availableExercises.find(ex => ex.id == newSegment.exerciseId)?.description}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Time Selection - ‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç */}\r\n                <div style={{ \r\n                  display: \"grid\", \r\n                  gridTemplateColumns: \"1fr 1fr\", \r\n                  gap: 20, \r\n                  marginBottom: 16,\r\n                  padding: 16,\r\n                  background: \"rgba(255,255,255,0.6)\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid rgba(14, 165, 233, 0.3)\"\r\n                }}>\r\n                  <div>\r\n                    <label style={{ \r\n                      display: \"block\", \r\n                      fontWeight: 600, \r\n                      marginBottom: 8, \r\n                      fontSize: 14, \r\n                      color: \"#0c4a6e\" \r\n                    }}>\r\n                      ‚è∞ Start Time\r\n                    </label>\r\n                    <div style={{ textAlign: \"center\" }}>\r\n                      <div style={{ \r\n                        background: newSegment.isSelectingStart ? \"#10b981\" : \"#f1f5f9\",\r\n                        color: newSegment.isSelectingStart ? \"white\" : \"#0c4a6e\",\r\n                        padding: \"12px 16px\",\r\n                        borderRadius: 8,\r\n                        fontSize: 18,\r\n                        fontWeight: 700,\r\n                        marginBottom: 8,\r\n                        border: newSegment.isSelectingStart ? \"2px solid #059669\" : \"2px solid #cbd5e1\"\r\n                      }}>\r\n                        {formatTime(newSegment.startTime)}\r\n                      </div>\r\n                      <button\r\n                        onClick={startTimeSelection}\r\n                        style={{\r\n                          background: newSegment.isSelectingStart \r\n                            ? \"linear-gradient(90deg, #10b981 0%, #059669 100%)\" \r\n                            : \"linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)\",\r\n                          color: \"white\",\r\n                          border: \"none\",\r\n                          borderRadius: 6,\r\n                          padding: \"8px 16px\",\r\n                          fontSize: 13,\r\n                          cursor: \"pointer\",\r\n                          fontWeight: 600,\r\n                          boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\r\n                          width: \"100%\"\r\n                        }}\r\n                      >\r\n                        {newSegment.isSelectingStart ? \"‚úÖ Selected!\" : \"Use Current Time\"}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label style={{ \r\n                      display: \"block\", \r\n                      fontWeight: 600, \r\n                      marginBottom: 8, \r\n                      fontSize: 14, \r\n                      color: \"#0c4a6e\" \r\n                    }}>\r\n                      ‚è∞ End Time\r\n                    </label>\r\n                    <div style={{ textAlign: \"center\" }}>\r\n                      <div style={{ \r\n                        background: newSegment.isSelectingEnd ? \"#10b981\" : \"#f1f5f9\",\r\n                        color: newSegment.isSelectingEnd ? \"white\" : \"#0c4a6e\",\r\n                        padding: \"12px 16px\",\r\n                        borderRadius: 8,\r\n                        fontSize: 18,\r\n                        fontWeight: 700,\r\n                        marginBottom: 8,\r\n                        border: newSegment.isSelectingEnd ? \"2px solid #059669\" : \"2px solid #cbd5e1\"\r\n                      }}>\r\n                        {formatTime(newSegment.endTime)}\r\n                      </div>\r\n                      <button\r\n                        onClick={endTimeSelection}\r\n                        style={{\r\n                          background: newSegment.isSelectingEnd \r\n                            ? \"linear-gradient(90deg, #10b981 0%, #059669 100%)\" \r\n                            : \"linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)\",\r\n                          color: \"white\",\r\n                          border: \"none\",\r\n                          borderRadius: 6,\r\n                          padding: \"8px 16px\",\r\n                          fontSize: 13,\r\n                          cursor: \"pointer\",\r\n                          fontWeight: 600,\r\n                          boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\",\r\n                          width: \"100%\"\r\n                        }}\r\n                      >\r\n                        {newSegment.isSelectingEnd ? \"‚úÖ Selected!\" : \"Use Current Time\"}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Duration Info */}\r\n                {newSegment.startTime < newSegment.endTime && (\r\n                  <div style={{ \r\n                    background: \"rgba(16, 185, 129, 0.1)\",\r\n                    border: \"1px solid #10b981\",\r\n                    borderRadius: 6,\r\n                    padding: \"8px 12px\",\r\n                    marginBottom: 16,\r\n                    textAlign: \"center\"\r\n                  }}>\r\n                    <span style={{ color: \"#059669\", fontWeight: 600, fontSize: 14 }}>\r\n                      ‚è±Ô∏è Duration: {Math.floor(newSegment.endTime - newSegment.startTime)} seconds\r\n                    </span>\r\n                  </div>\r\n                )}\r\n\r\n                <div style={{ display: \"flex\", gap: 12, alignItems: \"center\" }}>\r\n                  <button\r\n                    onClick={addExerciseSegment}\r\n                    disabled={!newSegment.exerciseId || newSegment.startTime >= newSegment.endTime}\r\n                    style={{\r\n                      background: !newSegment.exerciseId || newSegment.startTime >= newSegment.endTime\r\n                        ? \"#4196dbff\" \r\n                        : \"linear-gradient(90deg,#10b981 0%, #059669 100%)\",\r\n                      color: \"white\",\r\n                      border: \"none\",\r\n                      borderRadius: 8,\r\n                      padding: \"12px 24px\",\r\n                      fontSize: 14,\r\n                      fontWeight: 700,\r\n                      cursor: !newSegment.exerciseId || newSegment.startTime >= newSegment.endTime \r\n                        ? \"not-allowed\" \r\n                        : \"pointer\",\r\n                      boxShadow: \"0 2px 6px rgba(0,0,0,0.1)\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      gap: 8\r\n                    }}\r\n                  >\r\n                    <img \r\n                      src={process.env.PUBLIC_URL + \"/plus.png\"} \r\n                      alt=\"add\" \r\n                      style={{ width: 16, height: 16 }}\r\n                    />\r\n                    Add Exercise Segment\r\n                  </button>\r\n                  \r\n                  {newSegment.exerciseName && newSegment.startTime < newSegment.endTime && (\r\n                    <div style={{ \r\n                      fontSize: 13, \r\n                      color: \"#059669\", \r\n                      display: \"flex\", \r\n                      alignItems: \"center\",\r\n                      background: \"rgba(16, 185, 129, 0.1)\",\r\n                      padding: \"8px 12px\",\r\n                      borderRadius: 6,\r\n                      fontWeight: 500\r\n                    }}>\r\n                      ‚ú® <strong>{newSegment.exerciseName}</strong> \r\n                      ({formatTime(newSegment.startTime)} - {formatTime(newSegment.endTime)})\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Existing segments list */}\r\n              {exerciseSegments.length > 0 && (\r\n                <div>\r\n                  <div style={{ \r\n                    fontWeight: 700, \r\n                    marginBottom: 12, \r\n                    color: \"#374151\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    gap: 8\r\n                  }}>\r\n                    üìã Defined Segments ({exerciseSegments.length})\r\n                  </div>\r\n                  <div style={{ display: \"grid\", gap: 8 }}>\r\n                    {exerciseSegments.map((segment, index) => (\r\n                      <div\r\n                        key={segment.id}\r\n                        style={{\r\n                          display: \"flex\",\r\n                          justifyContent: \"space-between\",\r\n                          alignItems: \"center\",\r\n                          background: \"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)\",\r\n                          border: \"2px solid #e5e7eb\",\r\n                          borderRadius: 10,\r\n                          padding: \"14px 18px\",\r\n                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\"\r\n                        }}\r\n                      >\r\n                        <div>\r\n                          <div style={{ \r\n                            fontWeight: 700, \r\n                            color: \"#111827\",\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: 8,\r\n                            marginBottom: 4\r\n                          }}>\r\n                            <span style={{ \r\n                              background: \"linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)\",\r\n                              color: \"white\",\r\n                              borderRadius: \"50%\",\r\n                              width: 28,\r\n                              height: 28,\r\n                              display: \"flex\",\r\n                              alignItems: \"center\",\r\n                              justifyContent: \"center\",\r\n                              fontSize: 12,\r\n                              fontWeight: 700\r\n                            }}>\r\n                              {index + 1}\r\n                            </span>\r\n                            {segment.exerciseName}\r\n                            {segment.muscleGroup && (\r\n                              <span style={{\r\n                                background: \"rgba(59, 130, 246, 0.1)\",\r\n                                color: \"#1d4ed8\",\r\n                                padding: \"2px 8px\",\r\n                                borderRadius: 12,\r\n                                fontSize: 11,\r\n                                fontWeight: 600\r\n                              }}>\r\n                                {segment.muscleGroup}\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          <div style={{ fontSize: 13, color: \"#6b7280\", marginLeft: 36 }}>\r\n                            ‚è±Ô∏è {formatTime(segment.startTime)} - {formatTime(segment.endTime)} \r\n                            <span style={{ \r\n                              marginLeft: 8,\r\n                              background: \"rgba(16, 185, 129, 0.1)\",\r\n                              color: \"#059669\",\r\n                              padding: \"2px 6px\",\r\n                              borderRadius: 4,\r\n                              fontSize: 11,\r\n                              fontWeight: 600\r\n                            }}>\r\n                              {Math.floor(segment.endTime - segment.startTime)}s duration\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                        <button\r\n                          onClick={() => removeSegment(segment.id)}\r\n                          style={{\r\n                            background: \"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)\",\r\n                            color: \"white\",\r\n                            border: \"none\",\r\n                            borderRadius: 6,\r\n                            padding: \"6px 12px\",\r\n                            fontSize: 12,\r\n                            cursor: \"pointer\",\r\n                            fontWeight: 600,\r\n                            boxShadow: \"0 2px 4px rgba(239, 68, 68, 0.3)\",\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: 6\r\n                          }}\r\n                        >\r\n                          <img \r\n                            src={process.env.PUBLIC_URL + \"/bin (1).png\"} \r\n                            alt=\"remove\" \r\n                            style={{ width: 14, height: 14 }}\r\n                          />\r\n                          Remove\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,OAAOC,aAAa,MAAM,6BAA6B;AACvD,OAAOC,mBAAmB,MAAM,iCAAiC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElE,MAAMC,GAAG,GAAGA,CAACC,KAAK,GAAG,CAAC,CAAC,MAAM;EAC3BC,UAAU,EAAE,MAAM;EAClBC,YAAY,EAAE,EAAE;EAChBC,SAAS,EAAE,6BAA6B;EACxC,GAAGH;AACL,CAAC,CAAC;AAEF,eAAe,SAASI,WAAWA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,eAAA,EAAAC,qBAAA,EAAAC,sBAAA;EACpC;EACA,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;;EAE7D;EACA,MAAMmB,QAAQ,GAAGpB,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAM,CAACqB,aAAa,EAAEC,gBAAgB,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACsB,SAAS,EAAEC,YAAY,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACwB,cAAc,EAAEC,iBAAiB,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAAC0B,mBAAmB,EAAEC,sBAAsB,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACrE,MAAM,CAAC4B,YAAY,EAAEC,eAAe,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAEtD;EACA,MAAM,CAAC8B,aAAa,EAAEC,gBAAgB,CAAC,GAAG/B,QAAQ,CAAC,CAAC,CAAC;EACrD,MAAM,CAACgC,WAAW,EAAEC,cAAc,CAAC,GAAGjC,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACkC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGnC,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACoC,UAAU,EAAEC,aAAa,CAAC,GAAGrC,QAAQ,CAAC;IAC3CsC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,EAAE;IAChBC,SAAS,EAAE,CAAC;IACZC,OAAO,EAAE,CAAC;IACVC,gBAAgB,EAAE,KAAK;IACvBC,cAAc,EAAE;EAClB,CAAC,CAAC;;EAEF;EACA,MAAM,CAACC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG7C,QAAQ,CAAC,EAAE,CAAC;EAChE,MAAM,CAAC8C,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG/C,QAAQ,CAAC,KAAK,CAAC;;EAE/D;EACA,MAAM,CAACgD,mBAAmB,CAAC,GAAGhD,QAAQ,CAAC,IAAII,mBAAmB,CAAC,CAAC,CAAC;;EAEjE;EACA,MAAM,CAAC6C,OAAO,EAAEC,UAAU,CAAC,GAAGlD,QAAQ,CAAC,IAAI,CAAC;;EAE5C;EACAF,SAAS,CAAC,MAAM;IACd,MAAMqD,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjCJ,mBAAmB,CAAC,IAAI,CAAC;MACzB,IAAI;QACF,MAAMK,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,iCAAiC,EAAE;UACzDC,OAAO,EAAEL,KAAK,GAAG;YAAEM,aAAa,EAAE,UAAUN,KAAK;UAAG,CAAC,GAAG,CAAC;QAC3D,CAAC,CAAC;QAEF,IAAIG,GAAG,CAACI,EAAE,EAAE;UACV,MAAMC,SAAS,GAAG,MAAML,GAAG,CAACM,IAAI,CAAC,CAAC;UAClCC,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEH,SAAS,CAACI,MAAM,CAAC;UAC7DnB,qBAAqB,CAACe,SAAS,CAAC;QAClC,CAAC,MAAM;UACLE,OAAO,CAACG,IAAI,CAAC,sDAAsD,CAAC;UACpE;UACApB,qBAAqB,CAAC;UACpB;UACA;YAAEqB,EAAE,EAAE,CAAC;YAAEC,IAAI,EAAE,SAAS;YAAEC,YAAY,EAAE,eAAe;YAAEC,WAAW,EAAE;UAAuB,CAAC,EAC9F;YAAEH,EAAE,EAAE,CAAC;YAAEC,IAAI,EAAE,SAAS;YAAEC,YAAY,EAAE,aAAa;YAAEC,WAAW,EAAE;UAAoB,CAAC,EACzF;YAAEH,EAAE,EAAE,CAAC;YAAEC,IAAI,EAAE,MAAM;YAAEC,YAAY,EAAE,eAAe;YAAEC,WAAW,EAAE;UAA8B,CAAC,EAClG;YAAEH,EAAE,EAAE,CAAC;YAAEC,IAAI,EAAE,gBAAgB;YAAEC,YAAY,EAAE,WAAW;YAAEC,WAAW,EAAE;UAAmB,CAAC;UAC7F;UACA;YAAEH,EAAE,EAAE,CAAC;YAAEC,IAAI,EAAE,OAAO;YAAEC,YAAY,EAAE,aAAa;YAAEC,WAAW,EAAE;UAAmB,CAAC,EACtF;YAAEH,EAAE,EAAE,CAAC;YAAEC,IAAI,EAAE,OAAO;YAAEC,YAAY,EAAE,aAAa;YAAEC,WAAW,EAAE;UAA4B,CAAC,EAC/F;YAAEH,EAAE,EAAE,CAAC;YAAEC,IAAI,EAAE,UAAU;YAAEC,YAAY,EAAE,iBAAiB;YAAEC,WAAW,EAAE;UAAsB,CAAC,EAChG;YAAEH,EAAE,EAAE,CAAC;YAAEC,IAAI,EAAE,YAAY;YAAEC,YAAY,EAAE,QAAQ;YAAEC,WAAW,EAAE;UAAmB,CAAC;UACtF;UACA;YAAEH,EAAE,EAAE,CAAC;YAAEC,IAAI,EAAE,OAAO;YAAEC,YAAY,EAAE,MAAM;YAAEC,WAAW,EAAE;UAAgB,CAAC,EAC5E;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,QAAQ;YAAEC,YAAY,EAAE,KAAK;YAAEC,WAAW,EAAE;UAAmB,CAAC,EAChF;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,QAAQ;YAAEC,YAAY,EAAE,KAAK;YAAEC,WAAW,EAAE;UAA4B,CAAC,EACzF;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,eAAe;YAAEC,YAAY,EAAE,MAAM;YAAEC,WAAW,EAAE;UAAkB,CAAC,EACvF;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,WAAW;YAAEC,YAAY,EAAE,WAAW;YAAEC,WAAW,EAAE;UAAgB,CAAC;UACtF;UACA;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,cAAc;YAAEC,YAAY,EAAE,WAAW;YAAEC,WAAW,EAAE;UAAiB,CAAC,EAC1F;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,QAAQ;YAAEC,YAAY,EAAE,WAAW;YAAEC,WAAW,EAAE;UAAqB,CAAC,EACxF;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,kBAAkB;YAAEC,YAAY,EAAE,WAAW;YAAEC,WAAW,EAAE;UAAqB,CAAC,EAClG;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,YAAY;YAAEC,YAAY,EAAE,aAAa;YAAEC,WAAW,EAAE;UAAgB,CAAC;UACzF;UACA;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,uBAAuB;YAAEC,YAAY,EAAE,YAAY;YAAEC,WAAW,EAAE;UAAsB,CAAC,EACzG;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,sBAAsB;YAAEC,YAAY,EAAE,WAAW;YAAEC,WAAW,EAAE;UAAU,CAAC,EAC3F;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,mBAAmB;YAAEC,YAAY,EAAE,mBAAmB;YAAEC,WAAW,EAAE;UAAc,CAAC,EACpG;YAAEH,EAAE,EAAE,EAAE;YAAEC,IAAI,EAAE,oBAAoB;YAAEC,YAAY,EAAE,MAAM;YAAEC,WAAW,EAAE;UAAW,CAAC,CACtF,CAAC;QACJ;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdR,OAAO,CAACQ,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;QACnD;QACAzB,qBAAqB,CAAC,CACpB;UAAEqB,EAAE,EAAE,CAAC;UAAEC,IAAI,EAAE,SAAS;UAAEC,YAAY,EAAE,eAAe;UAAEC,WAAW,EAAE;QAAuB,CAAC,EAC9F;UAAEH,EAAE,EAAE,CAAC;UAAEC,IAAI,EAAE,OAAO;UAAEC,YAAY,EAAE,aAAa;UAAEC,WAAW,EAAE;QAAmB,CAAC,EACtF;UAAEH,EAAE,EAAE,CAAC;UAAEC,IAAI,EAAE,OAAO;UAAEC,YAAY,EAAE,MAAM;UAAEC,WAAW,EAAE;QAAgB,CAAC,EAC5E;UAAEH,EAAE,EAAE,EAAE;UAAEC,IAAI,EAAE,cAAc;UAAEC,YAAY,EAAE,WAAW;UAAEC,WAAW,EAAE;QAAiB,CAAC,EAC1F;UAAEH,EAAE,EAAE,EAAE;UAAEC,IAAI,EAAE,QAAQ;UAAEC,YAAY,EAAE,WAAW;UAAEC,WAAW,EAAE;QAAqB,CAAC,CACzF,CAAC;MACJ,CAAC,SAAS;QACRtB,mBAAmB,CAAC,KAAK,CAAC;MAC5B;IACF,CAAC;IAEDI,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMoB,qBAAqB,GAAG,MAAOtB,OAAO,IAAK;IAC/C,IAAI;MACFuB,2BAA2B,CAAC,IAAI,CAAC;MACjCC,oBAAoB,CAAC;QAAEC,MAAM,EAAE,kCAAkC;QAAEC,OAAO,EAAE,CAAC;QAAEC,KAAK,EAAE;MAAE,CAAC,CAAC;MAE1Fd,OAAO,CAACC,GAAG,CAAC,8CAA8Cd,OAAO,EAAE,CAAC;MAEpE,MAAM4B,MAAM,GAAG,MAAMC,kBAAkB,CAACP,qBAAqB,CAACtB,OAAO,EAAG8B,QAAQ,IAAK;QACnFN,oBAAoB,CAACM,QAAQ,CAAC;QAC9BjB,OAAO,CAACC,GAAG,CAAC,gBAAgBgB,QAAQ,CAACJ,OAAO,IAAII,QAAQ,CAACH,KAAK,MAAMG,QAAQ,CAACL,MAAM,EAAE,CAAC;MACxF,CAAC,CAAC;MAEFZ,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEc,MAAM,CAAC;MAExDJ,oBAAoB,CAAC;QACnBC,MAAM,EAAE,wBAAwBG,MAAM,CAACG,qBAAqB,IAAIH,MAAM,CAACI,aAAa,WAAW;QAC/FN,OAAO,EAAEE,MAAM,CAACI,aAAa;QAC7BL,KAAK,EAAEC,MAAM,CAACI,aAAa;QAC3BC,SAAS,EAAE;MACb,CAAC,CAAC;;MAEF;MACAC,UAAU,CAAC,MAAM;QACfV,oBAAoB,CAAC,IAAI,CAAC;QAC1BD,2BAA2B,CAAC,KAAK,CAAC;MACpC,CAAC,EAAE,IAAI,CAAC;IAEV,CAAC,CAAC,OAAOF,KAAK,EAAE;MACdR,OAAO,CAACQ,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtDG,oBAAoB,CAAC;QACnBC,MAAM,EAAE,UAAUJ,KAAK,CAACc,OAAO,EAAE;QACjCd,KAAK,EAAE;MACT,CAAC,CAAC;MAEFa,UAAU,CAAC,MAAM;QACfV,oBAAoB,CAAC,IAAI,CAAC;QAC1BD,2BAA2B,CAAC,KAAK,CAAC;MACpC,CAAC,EAAE,IAAI,CAAC;IACV;EACF,CAAC;;EAED;EACA,MAAMa,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrC,IAAI,CAACjD,UAAU,CAACE,UAAU,EAAE;MAC1BgD,KAAK,CAAC,0BAA0B,CAAC;MACjC;IACF;IACA,IAAIlD,UAAU,CAACI,SAAS,IAAIJ,UAAU,CAACK,OAAO,EAAE;MAC9C6C,KAAK,CAAC,iDAAiD,CAAC;MACxD;IACF;IACA,IAAIlD,UAAU,CAACK,OAAO,GAAGL,UAAU,CAACI,SAAS,GAAG,CAAC,EAAE;MACjD8C,KAAK,CAAC,gDAAgD,CAAC;MACvD;IACF;;IAEA;IACA,IAAIC,MAAM,EAAE;MACV,MAAMC,gBAAgB,GAAG5C,kBAAkB,CAAC6C,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACxB,EAAE,IAAI9B,UAAU,CAACE,UAAU,CAAC;MACtF,MAAMqD,OAAO,GAAG;QACdzB,EAAE,EAAE0B,IAAI,CAACC,GAAG,CAAC,CAAC;QACdvD,UAAU,EAAEF,UAAU,CAACE,UAAU;QACjCC,YAAY,EAAE,CAAAiD,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAErB,IAAI,KAAI,kBAAkB;QAC1D2B,WAAW,EAAE,CAAAN,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEpB,YAAY,KAAI,EAAE;QACjD5B,SAAS,EAAEJ,UAAU,CAACI,SAAS;QAC/BC,OAAO,EAAEL,UAAU,CAACK,OAAO;QAC3BnB,SAAS,EAAE;MACb,CAAC;MAEDa,mBAAmB,CAAC4D,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEJ,OAAO,CAAC,CAAC;MAC/CtD,aAAa,CAAC;QACZC,UAAU,EAAE,EAAE;QACdC,YAAY,EAAE,EAAE;QAChBC,SAAS,EAAE,CAAC;QACZC,OAAO,EAAE,CAAC;QACVC,gBAAgB,EAAE,KAAK;QACvBC,cAAc,EAAE;MAClB,CAAC,CAAC;MACF;IACF;;IAEA;IACA,IAAIM,OAAO,EAAE;MACX,IAAI;QACFuB,2BAA2B,CAAC,IAAI,CAAC;QACjCC,oBAAoB,CAAC;UACnBC,MAAM,EAAE,8CAA8C;UACtDC,OAAO,EAAE,CAAC;UACVC,KAAK,EAAE;QACT,CAAC,CAAC;QAEF,MAAMY,gBAAgB,GAAG5C,kBAAkB,CAAC6C,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACxB,EAAE,IAAI9B,UAAU,CAACE,UAAU,CAAC;QAEtF,MAAMuC,MAAM,GAAG,MAAM7B,mBAAmB,CAACgD,0BAA0B,CACjE/C,OAAO,EACP;UACEX,UAAU,EAAE2D,QAAQ,CAAC7D,UAAU,CAACE,UAAU,CAAC;UAC3CE,SAAS,EAAEJ,UAAU,CAACI,SAAS;UAC/BC,OAAO,EAAEL,UAAU,CAACK;QACtB,CAAC,EACAsC,QAAQ,IAAK;UACZjB,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEgB,QAAQ,CAAC;UAEtD,IAAIA,QAAQ,CAACmB,KAAK,KAAK,SAAS,EAAE;YAChCzB,oBAAoB,CAAC;cACnBC,MAAM,EAAEK,QAAQ,CAACK,OAAO;cACxBT,OAAO,EAAE,CAAC;cACVC,KAAK,EAAE;YACT,CAAC,CAAC;UACJ,CAAC,MAAM,IAAIG,QAAQ,CAACmB,KAAK,KAAK,YAAY,EAAE;YAC1CzB,oBAAoB,CAAC;cACnBC,MAAM,EAAEK,QAAQ,CAACK,OAAO;cACxBT,OAAO,EAAE,GAAG;cACZC,KAAK,EAAE;YACT,CAAC,CAAC;UACJ,CAAC,MAAM,IAAIG,QAAQ,CAACmB,KAAK,KAAK,WAAW,EAAE;YACzCzB,oBAAoB,CAAC;cACnBC,MAAM,EAAEK,QAAQ,CAACK,OAAO;cACxBT,OAAO,EAAE,CAAC;cACVC,KAAK,EAAE,CAAC;cACRM,SAAS,EAAE;YACb,CAAC,CAAC;UACJ,CAAC,MAAM,IAAIH,QAAQ,CAACmB,KAAK,KAAK,OAAO,EAAE;YACrCzB,oBAAoB,CAAC;cACnBC,MAAM,EAAEK,QAAQ,CAACK,OAAO;cACxBd,KAAK,EAAE;YACT,CAAC,CAAC;UACJ;QACF,CACF,CAAC;;QAED;QACA,MAAM6B,kBAAkB,GAAG;UACzBjC,EAAE,EAAEW,MAAM,CAACc,OAAO,CAACzB,EAAE;UACrB5B,UAAU,EAAEuC,MAAM,CAACc,OAAO,CAACS,WAAW;UACtC7D,YAAY,EAAE,CAAAiD,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAErB,IAAI,KAAI,kBAAkB;UAC1D2B,WAAW,EAAE,CAAAN,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEpB,YAAY,KAAI,EAAE;UACjD5B,SAAS,EAAEqC,MAAM,CAACc,OAAO,CAACU,UAAU;UACpC5D,OAAO,EAAEoC,MAAM,CAACc,OAAO,CAACW,QAAQ;UAChChF,SAAS,EAAE,EAAE;UACbiF,YAAY,EAAE1B,MAAM,CAAC2B,gBAAgB,CAACC,aAAa;UACnDC,aAAa,EAAE7B,MAAM,CAAC2B,gBAAgB,CAACG;QACzC,CAAC;QAEDxE,mBAAmB,CAAC4D,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEI,kBAAkB,CAAC,CAAC;;QAE1D;QACA9D,aAAa,CAAC;UACZC,UAAU,EAAE,EAAE;UACdC,YAAY,EAAE,EAAE;UAChBC,SAAS,EAAE,CAAC;UACZC,OAAO,EAAE,CAAC;UACVC,gBAAgB,EAAE,KAAK;UACvBC,cAAc,EAAE;QAClB,CAAC,CAAC;;QAEF;QACAwC,UAAU,CAAC,MAAM;UACfV,oBAAoB,CAAC,IAAI,CAAC;UAC1BD,2BAA2B,CAAC,KAAK,CAAC;QACpC,CAAC,EAAE,IAAI,CAAC;QAERV,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEc,MAAM,CAAC;MAE1D,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdR,OAAO,CAACQ,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACjDG,oBAAoB,CAAC;UACnBC,MAAM,EAAE,UAAUJ,KAAK,CAACc,OAAO,EAAE;UACjCd,KAAK,EAAE;QACT,CAAC,CAAC;QAEFa,UAAU,CAAC,MAAM;UACfV,oBAAoB,CAAC,IAAI,CAAC;UAC1BD,2BAA2B,CAAC,KAAK,CAAC;QACpC,CAAC,EAAE,IAAI,CAAC;QAERc,KAAK,CAAC,qCAAqChB,KAAK,CAACc,OAAO,EAAE,CAAC;MAC7D;IACF,CAAC,MAAM;MACL;MACA,MAAMI,gBAAgB,GAAG5C,kBAAkB,CAAC6C,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACxB,EAAE,IAAI9B,UAAU,CAACE,UAAU,CAAC;MACtF,MAAMqD,OAAO,GAAG;QACdzB,EAAE,EAAE0B,IAAI,CAACC,GAAG,CAAC,CAAC;QACdvD,UAAU,EAAEF,UAAU,CAACE,UAAU;QACjCC,YAAY,EAAE,CAAAiD,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAErB,IAAI,KAAI,kBAAkB;QAC1D2B,WAAW,EAAE,CAAAN,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEpB,YAAY,KAAI,EAAE;QACjD5B,SAAS,EAAEJ,UAAU,CAACI,SAAS;QAC/BC,OAAO,EAAEL,UAAU,CAACK,OAAO;QAC3BnB,SAAS,EAAE;MACb,CAAC;MAEDa,mBAAmB,CAAC4D,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEJ,OAAO,CAAC,CAAC;MAC/CtD,aAAa,CAAC;QACZC,UAAU,EAAE,EAAE;QACdC,YAAY,EAAE,EAAE;QAChBC,SAAS,EAAE,CAAC;QACZC,OAAO,EAAE,CAAC;QACVC,gBAAgB,EAAE,KAAK;QACvBC,cAAc,EAAE;MAClB,CAAC,CAAC;IACJ;EACF,CAAC;;EAED;EACA,MAAMiE,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAIzF,QAAQ,CAACwD,OAAO,EAAE;MACpBtC,aAAa,CAAC0D,IAAI,KAAK;QACrB,GAAGA,IAAI;QACPvD,SAAS,EAAErB,QAAQ,CAACwD,OAAO,CAAC3C,WAAW;QACvCU,gBAAgB,EAAE,IAAI;QACtBC,cAAc,EAAE;MAClB,CAAC,CAAC,CAAC;;MAEH;MACAwC,UAAU,CAAC,MAAM;QACf9C,aAAa,CAAC0D,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAErD,gBAAgB,EAAE;QAAM,CAAC,CAAC,CAAC;MAC/D,CAAC,EAAE,IAAI,CAAC;IACV;EACF,CAAC;;EAED;EACA,MAAMmE,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAI1F,QAAQ,CAACwD,OAAO,EAAE;MACpBtC,aAAa,CAAC0D,IAAI,KAAK;QACrB,GAAGA,IAAI;QACPtD,OAAO,EAAEtB,QAAQ,CAACwD,OAAO,CAAC3C,WAAW;QACrCW,cAAc,EAAE;MAClB,CAAC,CAAC,CAAC;;MAEH;MACAwC,UAAU,CAAC,MAAM;QACf9C,aAAa,CAAC0D,IAAI,KAAK;UAAE,GAAGA,IAAI;UAAEpD,cAAc,EAAE;QAAM,CAAC,CAAC,CAAC;MAC7D,CAAC,EAAE,IAAI,CAAC;IACV;EACF,CAAC;;EAED;EACA,MAAMmE,oBAAoB,GAAIC,CAAC,IAAK;IAClC,MAAMzE,UAAU,GAAGyE,CAAC,CAACC,MAAM,CAACC,KAAK;IACjC,MAAMzB,gBAAgB,GAAG5C,kBAAkB,CAAC6C,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACxB,EAAE,IAAI5B,UAAU,CAAC;IAC3ED,aAAa,CAAC0D,IAAI,KAAK;MACrB,GAAGA,IAAI;MACPzD,UAAU;MACVC,YAAY,EAAE,CAAAiD,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAErB,IAAI,KAAI;IAC1C,CAAC,CAAC,CAAC;EACL,CAAC;;EAED;EACA,MAAM+C,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI,CAACC,IAAI,IAAI,CAAChD,IAAI,EAAE;MAClBmB,KAAK,CAAC,iCAAiC,CAAC;MACxC;IACF;IACA,MAAMlC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACVkC,KAAK,CAAC,kEAAkE,CAAC;MACzE;IACF;IACA,IAAIrE,eAAe,EAAE;IACrBC,kBAAkB,CAAC,IAAI,CAAC;IAExB,MAAMkG,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEH,IAAI,CAAC;IAC7BC,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEnD,IAAI,CAAC;IAC9BiD,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEC,KAAK,CAAC;IACpCH,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAE,QAAQE,IAAI,aAAa,CAAC;IACzDJ,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE,OAAO,CAAC;;IAEpC;IACA,IAAIpF,gBAAgB,CAAC8B,MAAM,GAAG,CAAC,EAAE;MAC/BoD,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEG,IAAI,CAACC,SAAS,CAACxF,gBAAgB,CAACyF,GAAG,CAAChC,OAAO,KAAK;QAC1ES,WAAW,EAAET,OAAO,CAACrD,UAAU;QAC/B+D,UAAU,EAAEV,OAAO,CAACnD,SAAS;QAC7B8D,QAAQ,EAAEX,OAAO,CAAClD;MACpB,CAAC,CAAC,CAAC,CAAC,CAAC;IACP;IAEA,IAAI;MACF,MAAMc,GAAG,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAE;QACtDoE,MAAM,EAAE,MAAM;QACdnE,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG,CAAC;QAC7CyE,IAAI,EAAET;MACR,CAAC,CAAC;MACF,IAAI,CAAC7D,GAAG,CAACI,EAAE,EAAE;QACX,IAAImE,MAAM,GAAG,EAAE;QACf,IAAI;UACF,MAAMC,IAAI,GAAG,MAAMxE,GAAG,CAACM,IAAI,CAAC,CAAC;UAC7BiE,MAAM,GAAGC,IAAI,CAACD,MAAM,IAAI,EAAE;QAC5B,CAAC,CAAC,MAAM,CAAC;QACTxC,KAAK,CAAC,2BAA2B/B,GAAG,CAACmB,MAAM,KAAKoD,MAAM,EAAE,CAAC;QACzD;MACF;MACAxC,KAAK,CAAC,wBAAwBpD,gBAAgB,CAAC8B,MAAM,GAAG,CAAC,GAAG,cAAc9B,gBAAgB,CAAC8B,MAAM,qBAAqB,GAAG,EAAE,EAAE,CAAC;MAC9HgE,QAAQ,CAAC,UAAU,CAAC;IACtB,CAAC,CAAC,OAAOjB,CAAC,EAAE;MACVzB,KAAK,CAAC,mCAAmC,IAAI,CAAAyB,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAE3B,OAAO,KAAI2B,CAAC,CAAC,CAAC;IAChE,CAAC,SAAS;MACR7F,kBAAkB,CAAC,KAAK,CAAC;IAC3B;EACF,CAAC;EACD,MAAM8G,QAAQ,GAAG/H,WAAW,CAAC,CAAC;EAC9B,MAAMgI,QAAQ,GAAG/H,WAAW,CAAC,CAAC;EAC9B,MAAMgI,OAAO,GAAGnI,MAAM,CAAC,IAAI,CAAC;;EAE5B;EACA,MAAMwF,MAAM,GAAG,EAAAzE,eAAA,GAAAmH,QAAQ,CAACE,KAAK,cAAArH,eAAA,uBAAdA,eAAA,CAAgBmC,OAAO,KAAI,IAAImF,eAAe,CAACH,QAAQ,CAACI,MAAM,CAAC,CAACC,GAAG,CAAC,IAAI,CAAC;EACxF,MAAMC,MAAM,GAAG,CAAC,CAAChD,MAAM;;EAEvB;EACA,MAAM,CAAC4B,IAAI,EAAEqB,OAAO,CAAC,GAAGxI,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACyI,OAAO,EAAEC,UAAU,CAAC,GAAG1I,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC5C,MAAM,CAACmE,IAAI,EAAEwE,OAAO,CAAC,GAAG3I,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACwH,IAAI,EAAEoB,OAAO,CAAC,GAAG5I,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACuH,KAAK,EAAEsB,QAAQ,CAAC,GAAG7I,QAAQ,CAAC,GAAG,CAAC;EACvC,MAAM,CAAC8I,OAAO,EAAEC,UAAU,CAAC,GAAG/I,QAAQ,CAAC,KAAK,CAAC;;EAE7C;EACA,MAAM,CAACgJ,UAAU,EAAEC,aAAa,CAAC,GAAGjJ,QAAQ,CAAC,KAAK,CAAC;EAEnD,MAAMkJ,MAAM,GAAGA,CAAA;IAAA,IAAAC,gBAAA;IAAA,QAAAA,gBAAA,GAAMjB,OAAO,CAACvD,OAAO,cAAAwE,gBAAA,uBAAfA,gBAAA,CAAiBC,KAAK,CAAC,CAAC;EAAA;EAC7C,MAAMC,YAAY,GAAItC,CAAC,IAAK;IAAA,IAAAuC,eAAA;IAC1B,MAAMC,CAAC,IAAAD,eAAA,GAAGvC,CAAC,CAACC,MAAM,CAACwC,KAAK,cAAAF,eAAA,uBAAdA,eAAA,CAAiB,CAAC,CAAC;IAC7B,IAAI,CAACC,CAAC,EAAE;IACRf,OAAO,CAACe,CAAC,CAAC;IACVb,UAAU,CAACe,GAAG,CAACC,eAAe,CAACH,CAAC,CAAC,CAAC;IAClCR,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;IAClB;IACA1H,gBAAgB,CAAC,IAAI,CAAC;IACtBM,sBAAsB,CAAC,IAAI,CAAC;IAC5BwD,UAAU,CAAC,MAAMxD,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;EACvD,CAAC;EACD,MAAMgI,MAAM,GAAI5C,CAAC,IAAK;IAAA,IAAA6C,qBAAA;IACpB7C,CAAC,CAAC8C,cAAc,CAAC,CAAC;IAClB,MAAMN,CAAC,IAAAK,qBAAA,GAAG7C,CAAC,CAAC+C,YAAY,CAACN,KAAK,cAAAI,qBAAA,uBAApBA,qBAAA,CAAuB,CAAC,CAAC;IACnC,IAAI,CAACL,CAAC,EAAE;IACRf,OAAO,CAACe,CAAC,CAAC;IACVb,UAAU,CAACe,GAAG,CAACC,eAAe,CAACH,CAAC,CAAC,CAAC;IAClCR,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;IAClB;IACA1H,gBAAgB,CAAC,IAAI,CAAC;IACtBM,sBAAsB,CAAC,IAAI,CAAC;IAC5BwD,UAAU,CAAC,MAAMxD,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;EACvD,CAAC;EACD,MAAMoI,UAAU,GAAIhD,CAAC,IAAKA,CAAC,CAAC8C,cAAc,CAAC,CAAC;;EAE5C;EACA/J,SAAS,CAAC,MAAM;IAAA,IAAAkK,gBAAA;IACd,IAAI,CAACzB,MAAM,EAAE;;IAEb;IACA,KAAAyB,gBAAA,GAAI/B,QAAQ,CAACE,KAAK,cAAA6B,gBAAA,eAAdA,gBAAA,CAAgBC,KAAK,EAAE;MAAA,IAAAC,OAAA,EAAAC,qBAAA,EAAAC,oBAAA;MACzB,MAAMC,CAAC,GAAGpC,QAAQ,CAACE,KAAK,CAAC8B,KAAK;MAC9BtB,OAAO,CAAC0B,CAAC,CAACC,KAAK,IAAI,EAAE,CAAC;MACtBzB,QAAQ,CAAC0B,MAAM,CAACF,CAAC,CAACG,UAAU,IAAIH,CAAC,CAAC9C,KAAK,IAAI,GAAG,CAAC,CAAC;MAChDqB,OAAO,EAAAsB,OAAA,GACLG,CAAC,CAAC7C,IAAI,cAAA0C,OAAA,cAAAA,OAAA,GACH,OAAOG,CAAC,CAAChG,WAAW,KAAK,QAAQ,IAAA8F,qBAAA,IAAAC,oBAAA,GAC7BC,CAAC,CAAChG,WAAW,CAACoG,KAAK,CAAC,YAAY,CAAC,cAAAL,oBAAA,uBAAjCA,oBAAA,CAAoC,CAAC,CAAC,cAAAD,qBAAA,cAAAA,qBAAA,GAAI,EAAE,GAC7C,EACR,CAAC;MACD,MAAMO,GAAG,GACPL,CAAC,CAACM,KAAK,KACNN,CAAC,CAACO,MAAM,GACL,eAAe,CAACC,IAAI,CAACR,CAAC,CAACO,MAAM,CAAC,GAC5BP,CAAC,CAACO,MAAM,GACR,gCAAgCP,CAAC,CAACO,MAAM,CAACE,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,EAAE,GACrE,EAAE,CAAC;MACTpC,UAAU,CAACgC,GAAG,CAAC;MACf;MACA,IAAIA,GAAG,EAAE;QACPrJ,gBAAgB,CAAC,IAAI,CAAC;QACtBM,sBAAsB,CAAC,IAAI,CAAC;QAC5BwD,UAAU,CAAC,MAAMxD,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;MACvD;;MAEA;MACA,IAAI0I,CAAC,CAACU,QAAQ,IAAIC,KAAK,CAACC,OAAO,CAACZ,CAAC,CAACU,QAAQ,CAAC,EAAE;QAC3C,MAAMG,cAAc,GAAGb,CAAC,CAACU,QAAQ,CAACpD,GAAG,CAAC,CAACwD,GAAG,EAAEC,KAAK,MAAM;UACrDlH,EAAE,EAAE0B,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGuF,KAAK;UACtB9I,UAAU,EAAE6I,GAAG,CAAC/E,WAAW;UAC3B7D,YAAY,EAAE4I,GAAG,CAACE,aAAa,IAAI,kBAAkB;UACrDvF,WAAW,EAAEqF,GAAG,CAAC/G,YAAY,IAAI,EAAE;UACnC5B,SAAS,EAAE2I,GAAG,CAAC9E,UAAU;UACzB5D,OAAO,EAAE0I,GAAG,CAAC7E,QAAQ;UACrBhF,SAAS,EAAE;QACb,CAAC,CAAC,CAAC;QACHa,mBAAmB,CAAC+I,cAAc,CAAC;MACrC;MACA;IACF;;IAEA;IACA,CAAC,YAAY;MACX,IAAI;QAAA,IAAAI,QAAA,EAAAC,sBAAA,EAAAC,qBAAA;QACF,MAAMpI,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACF,KAAK,EAAE;;QAEZ;QACA,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,gCAAgC+B,MAAM,EAAE,EAAE;UAChE9B,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUN,KAAK;UAAG;QAC9C,CAAC,CAAC;QACF,IAAI,CAACG,GAAG,CAACI,EAAE,EAAE;QACb,MAAM0G,CAAC,GAAG,MAAM9G,GAAG,CAACM,IAAI,CAAC,CAAC;QAE1B8E,OAAO,CAAC0B,CAAC,CAACC,KAAK,IAAI,EAAE,CAAC;QACtBzB,QAAQ,CAAC0B,MAAM,CAACF,CAAC,CAACG,UAAU,IAAIH,CAAC,CAAC9C,KAAK,IAAI,GAAG,CAAC,CAAC;QAChDqB,OAAO,EAAA0C,QAAA,GACLjB,CAAC,CAAC7C,IAAI,cAAA8D,QAAA,cAAAA,QAAA,GACH,OAAOjB,CAAC,CAAChG,WAAW,KAAK,QAAQ,IAAAkH,sBAAA,IAAAC,qBAAA,GAC7BnB,CAAC,CAAChG,WAAW,CAACoG,KAAK,CAAC,YAAY,CAAC,cAAAe,qBAAA,uBAAjCA,qBAAA,CAAoC,CAAC,CAAC,cAAAD,sBAAA,cAAAA,sBAAA,GAAI,EAAE,GAC7C,EACR,CAAC;QACD,MAAMb,GAAG,GACPL,CAAC,CAACO,MAAM,KACP,CAAC,eAAe,CAACC,IAAI,CAACR,CAAC,CAACO,MAAM,CAAC,GAC5B,gCAAgCP,CAAC,CAACO,MAAM,CAACE,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,EAAE,GACnET,CAAC,CAACO,MAAM,CAAC;QACflC,UAAU,CAACgC,GAAG,IAAI,EAAE,CAAC;QAErB,IAAIA,GAAG,EAAE;UACPrJ,gBAAgB,CAAC,IAAI,CAAC;UACtBM,sBAAsB,CAAC,IAAI,CAAC;UAC5BwD,UAAU,CAAC,MAAMxD,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;QACvD;;QAEA;QACA,IAAI;UACF,MAAM8J,UAAU,GAAG,MAAMjI,KAAK,CAAC,gCAAgC+B,MAAM,WAAW,EAAE;YAChF9B,OAAO,EAAE;cAAEC,aAAa,EAAE,UAAUN,KAAK;YAAG;UAC9C,CAAC,CAAC;UAEF,IAAIqI,UAAU,CAAC9H,EAAE,EAAE;YACjB,MAAMoH,QAAQ,GAAG,MAAMU,UAAU,CAAC5H,IAAI,CAAC,CAAC;YACxC,IAAImH,KAAK,CAACC,OAAO,CAACF,QAAQ,CAAC,IAAIA,QAAQ,CAAC/G,MAAM,GAAG,CAAC,EAAE;cAClD,MAAMkH,cAAc,GAAGH,QAAQ,CAACpD,GAAG,CAAC,CAACwD,GAAG,EAAEC,KAAK,MAAM;gBACnDlH,EAAE,EAAE0B,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGuF,KAAK;gBACtB9I,UAAU,EAAE6I,GAAG,CAAC/E,WAAW;gBAC3B7D,YAAY,EAAE4I,GAAG,CAACE,aAAa,IAAI,kBAAkB;gBACrDvF,WAAW,EAAEqF,GAAG,CAAC/G,YAAY,IAAI,EAAE;gBACnC5B,SAAS,EAAE2I,GAAG,CAAC9E,UAAU;gBACzB5D,OAAO,EAAE0I,GAAG,CAAC7E,QAAQ;gBACrBhF,SAAS,EAAE;cACb,CAAC,CAAC,CAAC;cACHa,mBAAmB,CAAC+I,cAAc,CAAC;YACrC;UACF;QACF,CAAC,CAAC,OAAOQ,YAAY,EAAE;UACrB5H,OAAO,CAACG,IAAI,CAAC,6BAA6B,EAAEyH,YAAY,CAAC;QAC3D;MACF,CAAC,CAAC,MAAM,CAAC;IACX,CAAC,EAAE,CAAC;EACN,CAAC,EAAE,CAACnD,MAAM,EAAEhD,MAAM,EAAE0C,QAAQ,CAACE,KAAK,CAAC,CAAC;;EAEpC;EACA,MAAMwD,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACxE,IAAI,IAAI,CAAChD,IAAI,EAAE;MAClBmB,KAAK,CAAC,iCAAiC,CAAC;MACxC;IACF;IACA,MAAMlC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACVkC,KAAK,CAAC,kEAAkE,CAAC;MACzE;IACF;IACA,IAAI0D,UAAU,EAAE;IAChBC,aAAa,CAAC,IAAI,CAAC;IAEnB,MAAM7B,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEH,IAAI,CAAC;IAC7BC,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEnD,IAAI,CAAC;IAC9BiD,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEC,KAAK,CAAC;IACpCH,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAE,QAAQE,IAAI,iBAAiB,CAAC;IAC7DJ,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE,OAAO,CAAC;;IAEpC;IACA,IAAIpF,gBAAgB,CAAC8B,MAAM,GAAG,CAAC,EAAE;MAC/B,MAAM4H,YAAY,GAAG1J,gBAAgB,CAACyF,GAAG,CAAChC,OAAO,KAAK;QACpDS,WAAW,EAAET,OAAO,CAACrD,UAAU;QAC/B+D,UAAU,EAAEV,OAAO,CAACnD,SAAS;QAC7B8D,QAAQ,EAAEX,OAAO,CAAClD;MACpB,CAAC,CAAC,CAAC;MAEHqB,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE6H,YAAY,CAAC;MACtDxE,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEG,IAAI,CAACC,SAAS,CAACkE,YAAY,CAAC,CAAC;IAC3D,CAAC,MAAM;MACL9H,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;IACvC;;IAEA;IACAD,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;IACpC,KAAK,IAAI,CAAC8H,GAAG,EAAE5E,KAAK,CAAC,IAAIG,QAAQ,CAAC0E,OAAO,CAAC,CAAC,EAAE;MAC3ChI,OAAO,CAACC,GAAG,CAAC,GAAG8H,GAAG,GAAG,EAAE5E,KAAK,CAAC;IAC/B;IAEA,IAAI;MACF,MAAM1D,GAAG,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAE;QACtDoE,MAAM,EAAE,MAAM;QACdnE,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG,CAAC;QAC7CyE,IAAI,EAAET;MACR,CAAC,CAAC;MAEFtD,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAER,GAAG,CAACmB,MAAM,CAAC;MAE9C,IAAI,CAACnB,GAAG,CAACI,EAAE,EAAE;QACX,IAAImE,MAAM,GAAG,EAAE;QACf,IAAI;UACF,MAAMC,IAAI,GAAG,MAAMxE,GAAG,CAACM,IAAI,CAAC,CAAC;UAC7BiE,MAAM,GAAGC,IAAI,CAACD,MAAM,IAAI,EAAE;UAC1BhE,OAAO,CAACQ,KAAK,CAAC,mBAAmB,EAAEyD,IAAI,CAAC;QAC1C,CAAC,CAAC,MAAM,CAAC;QACT,IAAIxE,GAAG,CAACmB,MAAM,KAAK,GAAG,EAAE;UACtBY,KAAK,CAAC,wCAAwCwC,MAAM,IAAI,iCAAiC,EAAE,CAAC;QAC9F,CAAC,MAAM,IAAIvE,GAAG,CAACmB,MAAM,KAAK,GAAG,EAAE;UAC7BY,KAAK,CAAC,iDAAiD,CAAC;QAC1D,CAAC,MAAM;UACLA,KAAK,CAAC,qBAAqB/B,GAAG,CAACmB,MAAM,KAAKoD,MAAM,EAAE,CAAC;QACrD;QACA;MACF;MAEA,MAAMiE,YAAY,GAAG,MAAMxI,GAAG,CAACM,IAAI,CAAC,CAAC;MACrCC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEgI,YAAY,CAAC;;MAE9C;MACA,IAAIA,YAAY,CAAC7H,EAAE,EAAE;QACnBhB,UAAU,CAAC6I,YAAY,CAAC7H,EAAE,CAAC;QAC3BJ,OAAO,CAACC,GAAG,CAAC,sBAAsBgI,YAAY,CAAC7H,EAAE,EAAE,CAAC;MACtD;;MAEA;MACA,IAAI6H,YAAY,CAAC7H,EAAE,IAAIhC,gBAAgB,CAAC8B,MAAM,GAAG,CAAC,EAAE;QAClD,IAAI;UACFQ,2BAA2B,CAAC,IAAI,CAAC;UACjCC,oBAAoB,CAAC;YACnBC,MAAM,EAAE,+CAA+C;YACvDC,OAAO,EAAE,CAAC;YACVC,KAAK,EAAE1C,gBAAgB,CAAC8B;UAC1B,CAAC,CAAC;UAEF,MAAMgI,gBAAgB,GAAG9J,gBAAgB,CAACyF,GAAG,CAAChC,OAAO,KAAK;YACxDrD,UAAU,EAAE2D,QAAQ,CAACN,OAAO,CAACrD,UAAU,CAAC;YACxCE,SAAS,EAAEmD,OAAO,CAACnD,SAAS;YAC5BC,OAAO,EAAEkD,OAAO,CAAClD;UACnB,CAAC,CAAC,CAAC;UAEH,MAAMwJ,OAAO,GAAG,MAAMjJ,mBAAmB,CAACkJ,sBAAsB,CAC9DH,YAAY,CAAC7H,EAAE,EACf8H,gBAAgB,EACfjH,QAAQ,IAAK;YACZjB,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEgB,QAAQ,CAAC;YACvDN,oBAAoB,CAAC;cACnBC,MAAM,EAAE,0BAA0BK,QAAQ,CAACG,SAAS,GAAG,CAAC,IAAIH,QAAQ,CAACH,KAAK,EAAE;cAC5ED,OAAO,EAAEI,QAAQ,CAACG,SAAS;cAC3BN,KAAK,EAAEG,QAAQ,CAACH;YAClB,CAAC,CAAC;UACJ,CACF,CAAC;UAEDd,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEkI,OAAO,CAAC;UAE/CxH,oBAAoB,CAAC;YACnBC,MAAM,EAAE,sBAAsBuH,OAAO,CAACE,UAAU,IAAIF,OAAO,CAACrH,KAAK,0BAA0B;YAC3FD,OAAO,EAAEsH,OAAO,CAACrH,KAAK;YACtBA,KAAK,EAAEqH,OAAO,CAACrH,KAAK;YACpBM,SAAS,EAAE;UACb,CAAC,CAAC;UAEFC,UAAU,CAAC,MAAM;YACfV,oBAAoB,CAAC,IAAI,CAAC;YAC1BD,2BAA2B,CAAC,KAAK,CAAC;UACpC,CAAC,EAAE,IAAI,CAAC;QAEV,CAAC,CAAC,OAAOF,KAAK,EAAE;UACdR,OAAO,CAACQ,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;UACpDG,oBAAoB,CAAC;YACnBC,MAAM,EAAE,4BAA4BJ,KAAK,CAACc,OAAO,EAAE;YACnDd,KAAK,EAAE;UACT,CAAC,CAAC;UAEFa,UAAU,CAAC,MAAM;YACfV,oBAAoB,CAAC,IAAI,CAAC;YAC1BD,2BAA2B,CAAC,KAAK,CAAC;UACpC,CAAC,EAAE,IAAI,CAAC;QACV;MACF;MAEAc,KAAK,CAAC,2DAA2DpD,gBAAgB,CAAC8B,MAAM,GAAG,CAAC,GAAG,YAAY9B,gBAAgB,CAAC8B,MAAM,qBAAqB,GAAG,EAAE,EAAE,CAAC;MAC/JgE,QAAQ,CAAC,UAAU,CAAC;IACtB,CAAC,CAAC,OAAOjB,CAAC,EAAE;MACVjD,OAAO,CAACQ,KAAK,CAAC,iBAAiB,EAAEyC,CAAC,CAAC;MACnCzB,KAAK,CAAC,8BAA8B,IAAI,CAAAyB,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAE3B,OAAO,KAAI2B,CAAC,CAAC,CAAC;IAC3D,CAAC,SAAS;MACRkC,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC;;EAED;EACA,MAAMmD,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACjI,IAAI,EAAE;MACTmB,KAAK,CAAC,qBAAqB,CAAC;MAC5B;IACF;IACA,MAAMlC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACVkC,KAAK,CAAC,kEAAkE,CAAC;MACzE;IACF;IACA,IAAI0D,UAAU,EAAE;IAChBC,aAAa,CAAC,IAAI,CAAC;;IAEnB;IACA,MAAMoD,OAAO,GAAG,MAAM7I,KAAK,CAAC,gCAAgC+B,MAAM,EAAE,EAAE;MACpEqC,MAAM,EAAE,KAAK;MACbnE,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClCC,aAAa,EAAE,UAAUN,KAAK;MAChC,CAAC;MACDyE,IAAI,EAAEJ,IAAI,CAACC,SAAS,CAAC;QACnB4C,KAAK,EAAEnG,IAAI;QACXqG,UAAU,EAAEjD,KAAK;QACjBlD,WAAW,EAAE,QAAQmD,IAAI;MAC3B,CAAC;IACH,CAAC,CAAC;IACF,IAAI,CAAC6E,OAAO,CAAC1I,EAAE,EAAE;MACf,IAAImE,MAAM,GAAG,EAAE;MACf,IAAI;QACF,MAAMC,IAAI,GAAG,MAAMsE,OAAO,CAACxI,IAAI,CAAC,CAAC;QACjCiE,MAAM,GAAGC,IAAI,CAACD,MAAM,IAAI,EAAE;MAC5B,CAAC,CAAC,MAAM,CAAC;MACTxC,KAAK,CAAC,oBAAoB+G,OAAO,CAAC3H,MAAM,KAAKoD,MAAM,EAAE,CAAC;MACtDmB,aAAa,CAAC,KAAK,CAAC;MACpB;IACF;;IAEA;IACA,IAAI/G,gBAAgB,CAAC8B,MAAM,GAAG,CAAC,EAAE;MAC/B,IAAI;QACF,MAAMyH,UAAU,GAAG,MAAMjI,KAAK,CAAC,gCAAgC+B,MAAM,WAAW,EAAE;UAChFqC,MAAM,EAAE,KAAK;UACbnE,OAAO,EAAE;YACP,cAAc,EAAE,kBAAkB;YAClCC,aAAa,EAAE,UAAUN,KAAK;UAChC,CAAC;UACDyE,IAAI,EAAEJ,IAAI,CAACC,SAAS,CAAC;YACnBqD,QAAQ,EAAE7I,gBAAgB,CAACyF,GAAG,CAAChC,OAAO,KAAK;cACzCS,WAAW,EAAET,OAAO,CAACrD,UAAU;cAC/B+D,UAAU,EAAEV,OAAO,CAACnD,SAAS;cAC7B8D,QAAQ,EAAEX,OAAO,CAAClD;YACpB,CAAC,CAAC;UACJ,CAAC;QACH,CAAC,CAAC;QAEF,IAAI,CAACgJ,UAAU,CAAC9H,EAAE,EAAE;UAClBG,OAAO,CAACG,IAAI,CAAC,+BAA+B,EAAEwH,UAAU,CAAC/G,MAAM,CAAC;QAClE;MACF,CAAC,CAAC,OAAOJ,KAAK,EAAE;QACdR,OAAO,CAACG,IAAI,CAAC,0BAA0B,EAAEK,KAAK,CAAC;MACjD;IACF;;IAEA;IACA,IAAI6C,IAAI,EAAE;MACR,MAAMmF,EAAE,GAAG,IAAIjF,QAAQ,CAAC,CAAC;MACzBiF,EAAE,CAAChF,MAAM,CAAC,MAAM,EAAEH,IAAI,CAAC;MACvB,MAAMoF,OAAO,GAAG,MAAM/I,KAAK,CAAC,gCAAgC+B,MAAM,OAAO,EAAE;QACzEqC,MAAM,EAAE,KAAK;QACbnE,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG,CAAC;QAC7CyE,IAAI,EAAEyE;MACR,CAAC,CAAC;MACF,IAAI,CAACC,OAAO,CAAC5I,EAAE,EAAE;QACf,IAAImE,MAAM,GAAG,EAAE;QACf,IAAI;UACF,MAAMC,IAAI,GAAG,MAAMwE,OAAO,CAAC1I,IAAI,CAAC,CAAC;UACjCiE,MAAM,GAAGC,IAAI,CAACD,MAAM,IAAI,EAAE;QAC5B,CAAC,CAAC,MAAM,CAAC;QACTxC,KAAK,CAAC,wBAAwBiH,OAAO,CAAC7H,MAAM,KAAKoD,MAAM,EAAE,CAAC;QAC1DmB,aAAa,CAAC,KAAK,CAAC;QACpB;MACF;IACF;IAEA3D,KAAK,CAAC,kBAAkBpD,gBAAgB,CAAC8B,MAAM,GAAG,CAAC,GAAG,cAAc9B,gBAAgB,CAAC8B,MAAM,qBAAqB,GAAG,EAAE,EAAE,CAAC;IACxHiF,aAAa,CAAC,KAAK,CAAC;IACpBjB,QAAQ,CAAC,UAAU,CAAC;EACtB,CAAC;;EAED;EACA,MAAMwE,KAAK,GAAG,IAAI5G,IAAI,CAAC,CAAC,CAAC6G,kBAAkB,CAAC,OAAO,EAAE;IACnDC,GAAG,EAAE,SAAS;IACdC,KAAK,EAAE,MAAM;IACbC,IAAI,EAAE;EACR,CAAC,CAAC;EACF,IAAIC,IAAI,GAAG;IAAE1I,IAAI,EAAE;EAAU,CAAC;EAC9B,IAAI;IACF,MAAM2I,QAAQ,GAAGzJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC7C,IAAIwJ,QAAQ,EAAE;MACZ,MAAMC,OAAO,GAAGtF,IAAI,CAACuF,KAAK,CAACF,QAAQ,CAAC;MACpCD,IAAI,GAAG;QACL1I,IAAI,EAAE4I,OAAO,CAAC5I,IAAI,IAAI,SAAS;QAC/B8I,OAAO,EAAEF,OAAO,CAACE,OAAO,IAAI;MAC9B,CAAC;IACH;EACF,CAAC,CAAC,MAAM,CAAC;;EAET;EACA,MAAMC,UAAU,GAAIC,OAAO,IAAK;IAC9B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,GAAG,EAAE,CAAC;IACrC,MAAMI,IAAI,GAAGF,IAAI,CAACC,KAAK,CAACH,OAAO,GAAG,EAAE,CAAC;IACrC,OAAO,GAAGC,IAAI,CAACI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAIF,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EAClF,CAAC;;EAED;EACA,MAAMC,aAAa,GAAIC,SAAS,IAAK;IACnCxL,mBAAmB,CAAC4D,IAAI,IAAIA,IAAI,CAAC6H,MAAM,CAACzC,GAAG,IAAIA,GAAG,CAACjH,EAAE,KAAKyJ,SAAS,CAAC,CAAC;EACvE,CAAC;EAED,oBACErN,OAAA;IACEuN,KAAK,EAAE;MACLC,SAAS,EAAE,OAAO;MAClBrN,UAAU,EAAE,kDAAkD;MAC9DsN,UAAU,EAAE;IACd,CAAE;IAAAC,QAAA,gBAEF1N,OAAA,CAACH,aAAa;MAAC0M,IAAI,EAAEA,IAAK;MAACoB,IAAI,EAAEzB;IAAM;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAG1C/N,OAAA;MACEuN,KAAK,EAAE;QACLS,QAAQ,EAAE,IAAI;QACdC,MAAM,EAAE,QAAQ;QAChBC,SAAS,EAAE,MAAM;QACjBC,YAAY,EAAE,KAAK;QACnBC,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE;MACd,CAAE;MAAAX,QAAA,eAEF1N,OAAA;QACEsO,OAAO,EAAEA,CAAA,KAAM5G,QAAQ,CAAC,UAAU,CAAE;QACpC6F,KAAK,EAAE;UACLa,OAAO,EAAE,MAAM;UACfC,UAAU,EAAE,QAAQ;UACpBE,GAAG,EAAE,CAAC;UACNpO,UAAU,EAAE,iDAAiD;UAC7DqO,KAAK,EAAE,MAAM;UACbC,UAAU,EAAE,GAAG;UACfC,MAAM,EAAE,MAAM;UACdtO,YAAY,EAAE,GAAG;UACjBuO,OAAO,EAAE,mBAAmB;UAC5BC,QAAQ,EAAE,SAAS;UACnBvO,SAAS,EAAE,qBAAqB;UAChCwO,MAAM,EAAE;QACV,CAAE;QAAAnB,QAAA,gBAEF1N,OAAA;UACE8O,KAAK,EAAC,IAAI;UACVC,MAAM,EAAC,IAAI;UACXC,IAAI,EAAC,MAAM;UACXC,KAAK,EAAC,4BAA4B;UAClC1B,KAAK,EAAE;YAAE2B,WAAW,EAAE;UAAE,CAAE;UAAAxB,QAAA,eAE1B1N,OAAA;YACEmP,CAAC,EAAC,mBAAmB;YACrBC,MAAM,EAAC,MAAM;YACbC,WAAW,EAAC,GAAG;YACfC,aAAa,EAAC,OAAO;YACrBC,cAAc,EAAC;UAAO;YAAA3B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,4EAER;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAGN/N,OAAA;MAAKuN,KAAK,EAAE;QAAES,QAAQ,EAAE,IAAI;QAAEC,MAAM,EAAE,QAAQ;QAAEU,OAAO,EAAE;MAAqB,CAAE;MAAAjB,QAAA,gBAE9E1N,OAAA;QAAKuN,KAAK,EAAEtN,GAAG,CAAC;UAAE0O,OAAO,EAAE,EAAE;UAAET,SAAS,EAAE;QAAE,CAAC,CAAE;QAAAR,QAAA,eAC7C1N,OAAA;UACEqJ,MAAM,EAAEA,MAAO;UACfI,UAAU,EAAEA,UAAW;UACvB8D,KAAK,EAAE;YACLmB,MAAM,EAAE,oBAAoB;YAC5BtO,YAAY,EAAE,EAAE;YAChBuO,OAAO,EAAE,WAAW;YACpBa,SAAS,EAAE,QAAQ;YACnBhB,KAAK,EAAE,SAAS;YAChBrO,UAAU,EAAE;UACd,CAAE;UAAAuN,QAAA,gBAEF1N,OAAA;YACEuN,KAAK,EAAE;cACLqB,QAAQ,EAAE,EAAE;cACZH,UAAU,EAAE,GAAG;cACfD,KAAK,EAAE,SAAS;cAChBL,YAAY,EAAE;YAChB,CAAE;YAAAT,QAAA,EAEDzF,MAAM,GAAG,0BAA0B,GAAG;UAAwB;YAAA2F,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5D,CAAC,eACN/N,OAAA;YAAKuN,KAAK,EAAE;cAAEY,YAAY,EAAE;YAAG,CAAE;YAAAT,QAAA,EAAC;UAAwB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAChE/N,OAAA;YACEsO,OAAO,EAAE1F,MAAO;YAChB2E,KAAK,EAAE;cACLpN,UAAU,EAAE,iDAAiD;cAC7DqO,KAAK,EAAE,MAAM;cACbC,UAAU,EAAE,GAAG;cACfC,MAAM,EAAE,MAAM;cACdtO,YAAY,EAAE,EAAE;cAChBuO,OAAO,EAAE,WAAW;cACpBE,MAAM,EAAE;YACV,CAAE;YAAAnB,QAAA,EACH;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACT/N,OAAA;YACEyP,GAAG,EAAE7H,OAAQ;YACb8H,IAAI,EAAC,MAAM;YACXC,MAAM,EAAC,SAAS;YAChBC,QAAQ,EAAE7G,YAAa;YACvBwE,KAAK,EAAE;cAAEa,OAAO,EAAE;YAAO;UAAE;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC,EACDlH,IAAI,iBACH7G,OAAA;YAAKuN,KAAK,EAAE;cAAEW,SAAS,EAAE,EAAE;cAAEM,KAAK,EAAE;YAAU,CAAE;YAAAd,QAAA,GAAC,YACrC,eAAA1N,OAAA;cAAA0N,QAAA,EAAI7G,IAAI,CAAChD;YAAI;cAAA+J,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,MAAE,EAAChB,IAAI,CAAC8C,KAAK,CAAChJ,IAAI,CAACiJ,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,EAAC,MACrE;UAAA;YAAAlC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGN/N,OAAA;QACEuN,KAAK,EAAE;UACLa,OAAO,EAAE,MAAM;UACf2B,mBAAmB,EAAE,eAAe;UACpCxB,GAAG,EAAE,EAAE;UACPL,SAAS,EAAE;QACb,CAAE;QAAAR,QAAA,EAED,CACC;UAAE1D,KAAK,EAAE,mBAAmB;UAAEgG,IAAI,EAAE;QAAkD,CAAC,EACvF;UAAEhG,KAAK,EAAE,cAAc;UAAEgG,IAAI,EAAE;QAAuC,CAAC,EACvE;UAAEhG,KAAK,EAAE,mBAAmB;UAAEgG,IAAI,EAAE;QAAyB,CAAC,EAC9D;UAAEhG,KAAK,EAAE,eAAe;UAAEgG,IAAI,EAAE;QAAoB,CAAC,CACtD,CAAC3I,GAAG,CAAC,CAAC4I,IAAI,EAAEC,GAAG,kBACdlQ,OAAA;UAAeuN,KAAK,EAAEtN,GAAG,CAAC;YAAE0O,OAAO,EAAE;UAAY,CAAC,CAAE;UAAAjB,QAAA,gBAClD1N,OAAA;YAAKuN,KAAK,EAAE;cAAEkB,UAAU,EAAE,GAAG;cAAED,KAAK,EAAE,SAAS;cAAEL,YAAY,EAAE;YAAE,CAAE;YAAAT,QAAA,EAChEuC,IAAI,CAACjG;UAAK;YAAA4D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC,eACN/N,OAAA;YAAKuN,KAAK,EAAE;cAAEqB,QAAQ,EAAE,EAAE;cAAEJ,KAAK,EAAE,SAAS;cAAE2B,UAAU,EAAE;YAAI,CAAE;YAAAzC,QAAA,EAC7DuC,IAAI,CAACD;UAAI;YAAApC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP,CAAC;QAAA,GANEmC,GAAG;UAAAtC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAOR,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAGN/N,OAAA;QAAKuN,KAAK,EAAE;UAAEa,OAAO,EAAE,MAAM;UAAE2B,mBAAmB,EAAE,WAAW;UAAExB,GAAG,EAAE,EAAE;UAAEL,SAAS,EAAE;QAAG,CAAE;QAAAR,QAAA,gBAExF1N,OAAA;UAAKuN,KAAK,EAAEtN,GAAG,CAAC;YAAE0O,OAAO,EAAE;UAAG,CAAC,CAAE;UAAAjB,QAAA,gBAC/B1N,OAAA;YAAKuN,KAAK,EAAE;cAAEa,OAAO,EAAE,MAAM;cAAEgC,cAAc,EAAE,eAAe;cAAE/B,UAAU,EAAE;YAAS,CAAE;YAAAX,QAAA,gBACrF1N,OAAA;cAAKuN,KAAK,EAAE;gBAAEqB,QAAQ,EAAE,EAAE;gBAAEH,UAAU,EAAE,GAAG;gBAAED,KAAK,EAAE;cAAU,CAAE;cAAAd,QAAA,EAC7DzF,MAAM,GAAG,cAAc,GAAG;YAAS;cAAA2F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjC,CAAC,eACN/N,OAAA;cACEsO,OAAO,EAAEA,CAAA,KAAM7F,UAAU,CAAE4H,CAAC,IAAK,CAACA,CAAC,CAAE;cACrC9C,KAAK,EAAE;gBACLmB,MAAM,EAAE,qBAAqB;gBAC7BvO,UAAU,EAAE,MAAM;gBAClBqO,KAAK,EAAE,SAAS;gBAChBpO,YAAY,EAAE,GAAG;gBACjBuO,OAAO,EAAE,UAAU;gBACnBF,UAAU,EAAE,GAAG;gBACfI,MAAM,EAAE;cACV,CAAE;cAAAnB,QAAA,EACH;YAED;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAEN/N,OAAA;YAAKuN,KAAK,EAAE;cAAEW,SAAS,EAAE;YAAG,CAAE;YAAAR,QAAA,gBAC5B1N,OAAA;cAAOuN,KAAK,EAAE;gBAAEa,OAAO,EAAE,OAAO;gBAAEK,UAAU,EAAE,GAAG;gBAAEN,YAAY,EAAE;cAAE,CAAE;cAAAT,QAAA,EAAC;YAEtE;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR/N,OAAA;cACE2G,KAAK,EAAE9C,IAAK;cACZ+L,QAAQ,EAAGnJ,CAAC,IAAK4B,OAAO,CAAC5B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;cACzC2J,WAAW,EAAC,oCAA+B;cAC3C/C,KAAK,EAAE;gBACLuB,KAAK,EAAE,KAAK;gBACZH,OAAO,EAAE,WAAW;gBACpBvO,YAAY,EAAE,CAAC;gBACfsO,MAAM,EAAE,mBAAmB;gBAC3B6B,OAAO,EAAE;cACX;YAAE;cAAA3C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eAEN/N,OAAA;YAAKuN,KAAK,EAAE;cAAEW,SAAS,EAAE;YAAG,CAAE;YAAAR,QAAA,gBAC5B1N,OAAA;cAAOuN,KAAK,EAAE;gBAAEa,OAAO,EAAE,OAAO;gBAAEK,UAAU,EAAE,GAAG;gBAAEN,YAAY,EAAE;cAAE,CAAE;cAAAT,QAAA,EAAC;YAEtE;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR/N,OAAA;cACE0P,IAAI,EAAC,QAAQ;cACbc,GAAG,EAAC,GAAG;cACP7J,KAAK,EAAEO,IAAK;cACZ0I,QAAQ,EAAGnJ,CAAC,IAAK6B,OAAO,CAAC7B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;cACzC2J,WAAW,EAAC,UAAU;cACtB/C,KAAK,EAAE;gBACLuB,KAAK,EAAE,GAAG;gBACVH,OAAO,EAAE,WAAW;gBACpBvO,YAAY,EAAE,CAAC;gBACfsO,MAAM,EAAE,mBAAmB;gBAC3B6B,OAAO,EAAE;cACX;YAAE;cAAA3C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eAEN/N,OAAA;YAAKuN,KAAK,EAAE;cAAEW,SAAS,EAAE;YAAG,CAAE;YAAAR,QAAA,gBAC5B1N,OAAA;cAAOuN,KAAK,EAAE;gBAAEa,OAAO,EAAE,OAAO;gBAAEK,UAAU,EAAE,GAAG;gBAAEN,YAAY,EAAE;cAAE,CAAE;cAAAT,QAAA,EAAC;YAEtE;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR/N,OAAA;cACE2G,KAAK,EAAEM,KAAM;cACb2I,QAAQ,EAAGnJ,CAAC,IAAK8B,QAAQ,CAAC9B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;cAC1C4G,KAAK,EAAE;gBACLuB,KAAK,EAAE,GAAG;gBACVH,OAAO,EAAE,WAAW;gBACpBvO,YAAY,EAAE,CAAC;gBACfsO,MAAM,EAAE,mBAAmB;gBAC3B6B,OAAO,EAAE,MAAM;gBACfpQ,UAAU,EAAE;cACd,CAAE;cAAAuN,QAAA,gBAEF1N,OAAA;gBAAQ2G,KAAK,EAAC,GAAG;gBAAA+G,QAAA,EAAC;cAAO;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAClC/N,OAAA;gBAAQ2G,KAAK,EAAC,GAAG;gBAAA+G,QAAA,EAAC;cAAO;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAClC/N,OAAA;gBAAQ2G,KAAK,EAAC,GAAG;gBAAA+G,QAAA,EAAC;cAAO;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAGN/N,OAAA;YAAKuN,KAAK,EAAE;cAAEa,OAAO,EAAE,MAAM;cAAEG,GAAG,EAAE,EAAE;cAAEL,SAAS,EAAE;YAAG,CAAE;YAAAR,QAAA,GACrDzF,MAAM,gBACLjI,OAAA;cACEsO,OAAO,EAAExC,YAAa;cACtB2E,QAAQ,EAAE/H,UAAW,CAAuB;cAAA;cAC5C6E,KAAK,EAAE;gBACLmD,OAAO,EAAEhI,UAAU,GAAG,GAAG,GAAG,CAAC;gBAAa;gBAC1CvI,UAAU,EAAE,iDAAiD;gBAC7DqO,KAAK,EAAE,MAAM;gBACbC,UAAU,EAAE,GAAG;gBACfC,MAAM,EAAE,MAAM;gBACdtO,YAAY,EAAE,EAAE;gBAChBuO,OAAO,EAAE,WAAW;gBACpBE,MAAM,EAAEnG,UAAU,GAAG,aAAa,GAAG;cACvC,CAAE;cAAAgF,QAAA,EAEDhF,UAAU,GAAG,aAAa,GAAG;YAAQ;cAAAkF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChC,CAAC,gBAET/N,OAAA;cACEsO,OAAO,EAAEA,CAAA,KAAM;gBACb,IAAIqC,MAAM,CAACC,OAAO,CAAC,wFAAwF,CAAC,EAAE;kBAC5GvF,YAAY,CAAC,CAAC;gBAChB;cACF,CAAE;cACFoF,QAAQ,EAAE/H,UAAW;cACrB6E,KAAK,EAAE;gBACLmD,OAAO,EAAEhI,UAAU,GAAG,GAAG,GAAG,CAAC;gBAC7BvI,UAAU,EAAE,iDAAiD;gBAC7DqO,KAAK,EAAE,MAAM;gBACbC,UAAU,EAAE,GAAG;gBACfC,MAAM,EAAE,MAAM;gBACdtO,YAAY,EAAE,EAAE;gBAChBuO,OAAO,EAAE,WAAW;gBACpBE,MAAM,EAAEnG,UAAU,GAAG,aAAa,GAAG,SAAS;gBAC9C0F,OAAO,EAAE,aAAa;gBACtBC,UAAU,EAAE,QAAQ;gBACpBE,GAAG,EAAE;cACP,CAAE;cAAAb,QAAA,gBAEF1N,OAAA;gBACE6Q,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,mBAAoB;gBAClDC,GAAG,EAAC,QAAQ;gBACZ1D,KAAK,EAAE;kBACLuB,KAAK,EAAE,EAAE;kBACTC,MAAM,EAAE,EAAE;kBACVG,WAAW,EAAE,CAAC;kBACdgC,aAAa,EAAE;gBACjB;cAAE;gBAAAtD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,EACDrF,UAAU,GAAG,cAAc,GAAG,QAAQ;YAAA;cAAAkF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjC,CACT,eACD/N,OAAA;cACEsO,OAAO,EAAE1H,eAAgB;cACzB6J,QAAQ,EAAE9P,eAAgB;cAC1B4M,KAAK,EAAE;gBACLpN,UAAU,EAAE,SAAS;gBACrBqO,KAAK,EAAE,SAAS;gBAChBC,UAAU,EAAE,GAAG;gBACfC,MAAM,EAAE,MAAM;gBACdtO,YAAY,EAAE,EAAE;gBAChBuO,OAAO,EAAE,WAAW;gBACpBE,MAAM,EAAElO,eAAe,GAAG,aAAa,GAAG,SAAS;gBACnD+P,OAAO,EAAE/P,eAAe,GAAG,GAAG,GAAG;cACnC,CAAE;cAAA+M,QAAA,EAED/M,eAAe,GAAG,WAAW,GAAG;YAAY;cAAAiN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvC,CAAC,eACT/N,OAAA;cACEsO,OAAO,EAAEA,CAAA,KAAM;gBACb,IAAIqC,MAAM,CAACC,OAAO,CAAC,8CAA8C,CAAC,EAAE;kBAClElJ,QAAQ,CAAC,UAAU,CAAC;gBACtB;cACF,CAAE;cACF+I,QAAQ,EAAE/H,UAAW;cACrB6E,KAAK,EAAE;gBACLpN,UAAU,EAAE,MAAM;gBAClBqO,KAAK,EAAE,SAAS;gBAChBC,UAAU,EAAE,GAAG;gBACfC,MAAM,EAAE,mBAAmB;gBAC3BtO,YAAY,EAAE,EAAE;gBAChBuO,OAAO,EAAE,WAAW;gBACpBE,MAAM,EAAEnG,UAAU,GAAG,aAAa,GAAG;cACvC,CAAE;cAAAgF,QAAA,EACH;YAED;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,EAGLoD,wBAAwB,IAAIC,iBAAiB,iBAC5CpR,OAAA;YAAKuN,KAAK,EAAE;cACVW,SAAS,EAAE,EAAE;cACbS,OAAO,EAAE,WAAW;cACpBxO,UAAU,EAAEiR,iBAAiB,CAACpN,KAAK,GAC/B,mDAAmD,GACnDoN,iBAAiB,CAACxM,SAAS,GAC3B,mDAAmD,GACnD,mDAAmD;cACvD8J,MAAM,EAAE0C,iBAAiB,CAACpN,KAAK,GAC3B,mBAAmB,GACnBoN,iBAAiB,CAACxM,SAAS,GAC3B,mBAAmB,GACnB,mBAAmB;cACvBxE,YAAY,EAAE,EAAE;cAChBC,SAAS,EAAE;YACb,CAAE;YAAAqN,QAAA,gBACA1N,OAAA;cAAKuN,KAAK,EAAE;gBACVa,OAAO,EAAE,MAAM;gBACfC,UAAU,EAAE,QAAQ;gBACpBE,GAAG,EAAE,EAAE;gBACPJ,YAAY,EAAE;cAChB,CAAE;cAAAT,QAAA,gBACA1N,OAAA;gBAAKuN,KAAK,EAAE;kBACVuB,KAAK,EAAE,EAAE;kBACTC,MAAM,EAAE,EAAE;kBACV3O,YAAY,EAAE,KAAK;kBACnBD,UAAU,EAAEiR,iBAAiB,CAACpN,KAAK,GAC/B,SAAS,GACToN,iBAAiB,CAACxM,SAAS,GAC3B,SAAS,GACT,SAAS;kBACbwJ,OAAO,EAAE,MAAM;kBACfC,UAAU,EAAE,QAAQ;kBACpB+B,cAAc,EAAE,QAAQ;kBACxB5B,KAAK,EAAE,OAAO;kBACdI,QAAQ,EAAE,EAAE;kBACZH,UAAU,EAAE;gBACd,CAAE;gBAAAf,QAAA,EACC0D,iBAAiB,CAACpN,KAAK,GAAG,GAAG,GAAGoN,iBAAiB,CAACxM,SAAS,GAAG,GAAG,GAAG;cAAG;gBAAAgJ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrE,CAAC,eACN/N,OAAA;gBAAKuN,KAAK,EAAE;kBACVkB,UAAU,EAAE,GAAG;kBACfG,QAAQ,EAAE,EAAE;kBACZJ,KAAK,EAAE4C,iBAAiB,CAACpN,KAAK,GAC1B,SAAS,GACToN,iBAAiB,CAACxM,SAAS,GAC3B,SAAS,GACT;gBACN,CAAE;gBAAA8I,QAAA,EAAC;cAEH;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAEN/N,OAAA;cAAKuN,KAAK,EAAE;gBACVqB,QAAQ,EAAE,EAAE;gBACZJ,KAAK,EAAE4C,iBAAiB,CAACpN,KAAK,GAC1B,SAAS,GACToN,iBAAiB,CAACxM,SAAS,GAC3B,SAAS,GACT,SAAS;gBACbuJ,YAAY,EAAE;cAChB,CAAE;cAAAT,QAAA,EACC0D,iBAAiB,CAAChN;YAAM;cAAAwJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtB,CAAC,EAEL,CAACqD,iBAAiB,CAACpN,KAAK,IAAI,CAACoN,iBAAiB,CAACxM,SAAS,IAAIwM,iBAAiB,CAAC9M,KAAK,GAAG,CAAC,iBACtFtE,OAAA;cAAKuN,KAAK,EAAE;gBACVuB,KAAK,EAAE,MAAM;gBACbC,MAAM,EAAE,CAAC;gBACT5O,UAAU,EAAE,SAAS;gBACrBC,YAAY,EAAE,CAAC;gBACfiR,QAAQ,EAAE;cACZ,CAAE;cAAA3D,QAAA,eACA1N,OAAA;gBAAKuN,KAAK,EAAE;kBACVuB,KAAK,EAAE,GAAIsC,iBAAiB,CAAC/M,OAAO,GAAG+M,iBAAiB,CAAC9M,KAAK,GAAI,GAAG,GAAG;kBACxEyK,MAAM,EAAE,MAAM;kBACd5O,UAAU,EAAE,kDAAkD;kBAC9DmR,UAAU,EAAE;gBACd;cAAE;gBAAA1D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACF,CACN,EAEAqD,iBAAiB,CAACxM,SAAS,iBAC1B5E,OAAA;cAAKuN,KAAK,EAAE;gBACVqB,QAAQ,EAAE,EAAE;gBACZJ,KAAK,EAAE,SAAS;gBAChBN,SAAS,EAAE,CAAC;gBACZqD,SAAS,EAAE;cACb,CAAE;cAAA7D,QAAA,EAAC;YAEH;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eAGN/N,OAAA;UACEuN,KAAK,EAAEtN,GAAG,CAAC;YACT0O,OAAO,EAAE,EAAE;YACXnB,SAAS,EAAE,GAAG;YACdY,OAAO,EAAE,MAAM;YACfC,UAAU,EAAE,QAAQ;YACpB+B,cAAc,EAAE;UAClB,CAAC,CAAE;UAAA1C,QAAA,EAEF,CAACvF,OAAO,gBACPnI,OAAA;YACEuN,KAAK,EAAE;cACLuB,KAAK,EAAE,MAAM;cACbC,MAAM,EAAE,GAAG;cACX3O,YAAY,EAAE,EAAE;cAChBD,UAAU,EAAE,SAAS;cACrBiO,OAAO,EAAE,MAAM;cACfC,UAAU,EAAE,QAAQ;cACpB+B,cAAc,EAAE,QAAQ;cACxB5B,KAAK,EAAE;YACT,CAAE;YAAAd,QAAA,EACH;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,gBAEN/N,OAAA;YAAKuN,KAAK,EAAE;cAAEiE,QAAQ,EAAE,UAAU;cAAE1C,KAAK,EAAE,MAAM;cAAEC,MAAM,EAAE;YAAO,CAAE;YAAArB,QAAA,gBAClE1N,OAAA;cACEyP,GAAG,EAAE5O,QAAS;cACdgQ,GAAG,EAAE1I,OAAQ;cACbsJ,QAAQ;cACRC,IAAI;cACJC,QAAQ;cACRC,KAAK;cACLC,MAAM,EAAEA,CAAA,KAAM1Q,iBAAiB,CAAC,IAAI,CAAE;cACtC2Q,OAAO,EAAEA,CAAA,KAAM3Q,iBAAiB,CAAC,KAAK,CAAE;cACxC4Q,OAAO,EAAEA,CAAA,KAAM5Q,iBAAiB,CAAC,KAAK,CAAE;cACxC6Q,YAAY,EAAEA,CAAA,KAAM;gBAClB;gBACA,IAAInR,QAAQ,CAACwD,OAAO,EAAE;kBACpB5C,gBAAgB,CAACZ,QAAQ,CAACwD,OAAO,CAAC4N,QAAQ,CAAC;kBAC3CpR,QAAQ,CAACwD,OAAO,CAAC6N,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;oBAClC;kBAAA,CACD,CAAC;gBACJ;cACF,CAAE;cACFC,YAAY,EAAEA,CAAA,KAAM;gBAClB,IAAIvR,QAAQ,CAACwD,OAAO,EAAE;kBACpB1C,cAAc,CAACd,QAAQ,CAACwD,OAAO,CAAC3C,WAAW,CAAC;gBAC9C;cACF,CAAE;cACF6L,KAAK,EAAE;gBACLuB,KAAK,EAAE,MAAM;gBACbC,MAAM,EAAE,MAAM;gBACdsD,SAAS,EAAE,GAAG;gBACdC,SAAS,EAAE,SAAS;gBACpBlS,YAAY,EAAE,EAAE;gBAChBD,UAAU,EAAE,MAAM;gBAClBiO,OAAO,EAAE;cACX;YAAE;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,EACDjN,aAAa,iBACZd,OAAA,CAACuS,eAAe;cACd1R,QAAQ,EAAEA,QAAS;cACnB2R,SAAS,EAAEtR,cAAe;cAC1BuR,mBAAmB,EAAGC,iBAAiB,IAAK;gBAC1CzR,YAAY,CAACyR,iBAAiB,CAAC;gBAC/B;gBACA,IAAIA,iBAAiB,IAAI7R,QAAQ,CAACwD,OAAO,EAAE;kBACzC,MAAMsO,SAAS,GAAG9R,QAAQ,CAACwD,OAAO,CAAC3C,WAAW;kBAC9CH,eAAe,CAACkE,IAAI,IAAI,CACtB,GAAGA,IAAI,CAAC6H,MAAM,CAACsF,EAAE,IAAI7F,IAAI,CAAC8F,GAAG,CAACD,EAAE,CAACD,SAAS,GAAGA,SAAS,CAAC,GAAG,GAAG,CAAC;kBAAE;kBAChE;oBAAEA,SAAS;oBAAE3R,SAAS,EAAE0R;kBAAkB,CAAC,CAC5C,CAAC;gBACJ;cACF;YAAE;cAAA9E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CACF,eAGD/N,OAAA;cACEsO,OAAO,EAAEA,CAAA,KAAM;gBACbvN,gBAAgB,CAAC,CAACD,aAAa,CAAC;gBAChC,IAAI,CAACA,aAAa,EAAE;kBAClBO,sBAAsB,CAAC,IAAI,CAAC;kBAC5B;kBACAwD,UAAU,CAAC,MAAMxD,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;gBACvD;cACF,CAAE;cACFkM,KAAK,EAAE;gBACLiE,QAAQ,EAAE,UAAU;gBACpBsB,GAAG,EAAE,EAAE;gBACPC,KAAK,EAAE,EAAE;gBACT5S,UAAU,EAAEW,aAAa,GAAG,SAAS,GAAGM,mBAAmB,GAAG,SAAS,GAAG,SAAS;gBACnFoN,KAAK,EAAE,OAAO;gBACdE,MAAM,EAAE,MAAM;gBACdtO,YAAY,EAAE,CAAC;gBACfuO,OAAO,EAAE,UAAU;gBACnBC,QAAQ,EAAE,MAAM;gBAChBC,MAAM,EAAE,SAAS;gBACjBmE,MAAM,EAAE;cACV,CAAE;cAAAtF,QAAA,EAEDtM,mBAAmB,GAAG,eAAe,GAAGN,aAAa,GAAG,gBAAgB,GAAG;YAAgB;cAAA8M,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtF,CAAC,EAGRjN,aAAa,IAAIE,SAAS,iBACzBhB,OAAA;cACEuN,KAAK,EAAE;gBACLiE,QAAQ,EAAE,UAAU;gBACpBsB,GAAG,EAAE,EAAE;gBACPC,KAAK,EAAE,EAAE;gBACT5S,UAAU,EAAE,iBAAiB;gBAC7BqO,KAAK,EAAE,OAAO;gBACdG,OAAO,EAAE,SAAS;gBAClBvO,YAAY,EAAE,CAAC;gBACfwO,QAAQ,EAAE,MAAM;gBAChBoE,MAAM,EAAE;cACV,CAAE;cAAAtF,QAAA,GAED1M,SAAS,CAAC0C,MAAM,EAAC,qBACpB;YAAA;cAAAkK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CACN,eAGD/N,OAAA;cACEuN,KAAK,EAAE;gBACLiE,QAAQ,EAAE,UAAU;gBACpByB,MAAM,EAAE,EAAE;gBACVC,IAAI,EAAE,EAAE;gBACR/S,UAAU,EAAE,iBAAiB;gBAC7BqO,KAAK,EAAE,OAAO;gBACdG,OAAO,EAAE,SAAS;gBAClBvO,YAAY,EAAE,CAAC;gBACfwO,QAAQ,EAAE,MAAM;gBAChBoE,MAAM,EAAE;cACV,CAAE;cAAAtF,QAAA,GAEDd,UAAU,CAAClL,WAAW,CAAC,EAAC,KAAG,EAACkL,UAAU,CAACpL,aAAa,CAAC;YAAA;cAAAoM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QACN;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAGL5F,OAAO,iBACNnI,OAAA;QAAKuN,KAAK,EAAE;UAAEW,SAAS,EAAE;QAAG,CAAE;QAAAR,QAAA,eAC5B1N,OAAA;UAAKuN,KAAK,EAAEtN,GAAG,CAAC;YAAE0O,OAAO,EAAE;UAAG,CAAC,CAAE;UAAAjB,QAAA,gBAC/B1N,OAAA;YAAKuN,KAAK,EAAE;cAAEqB,QAAQ,EAAE,EAAE;cAAEH,UAAU,EAAE,GAAG;cAAED,KAAK,EAAE,SAAS;cAAEL,YAAY,EAAE;YAAG,CAAE;YAAAT,QAAA,EAAC;UAEnF;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAGN/N,OAAA;YAAKuN,KAAK,EAAE;cACVpN,UAAU,EAAE,mDAAmD;cAC/DwO,OAAO,EAAE,EAAE;cACXvO,YAAY,EAAE,EAAE;cAChB+N,YAAY,EAAE,EAAE;cAChBO,MAAM,EAAE;YACV,CAAE;YAAAhB,QAAA,GAEC9L,gBAAgB,CAAC8B,MAAM,KAAK,CAAC,iBAC5B1D,OAAA;cAAKuN,KAAK,EAAE;gBACVpN,UAAU,EAAE,yBAAyB;gBACrCuO,MAAM,EAAE,mBAAmB;gBAC3BtO,YAAY,EAAE,CAAC;gBACfuO,OAAO,EAAE,WAAW;gBACpBR,YAAY,EAAE,EAAE;gBAChBC,OAAO,EAAE,MAAM;gBACfC,UAAU,EAAE,QAAQ;gBACpBE,GAAG,EAAE;cACP,CAAE;cAAAb,QAAA,gBACA1N,OAAA;gBAAMuN,KAAK,EAAE;kBAAEqB,QAAQ,EAAE;gBAAG,CAAE;gBAAAlB,QAAA,EAAC;cAAE;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACxC/N,OAAA;gBAAMuN,KAAK,EAAE;kBAAEiB,KAAK,EAAE,SAAS;kBAAEI,QAAQ,EAAE,EAAE;kBAAEH,UAAU,EAAE;gBAAI,CAAE;gBAAAf,QAAA,EAAC;cAElE;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CACN,eAGD/N,OAAA;cAAKuN,KAAK,EAAE;gBAAEY,YAAY,EAAE;cAAG,CAAE;cAAAT,QAAA,gBAC/B1N,OAAA;gBAAOuN,KAAK,EAAE;kBAAEa,OAAO,EAAE,OAAO;kBAAEK,UAAU,EAAE,GAAG;kBAAEN,YAAY,EAAE,CAAC;kBAAEK,KAAK,EAAE;gBAAU,CAAE;gBAAAd,QAAA,EAAC;cAExF;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACR/N,OAAA;gBAAKuN,KAAK,EAAE;kBAAEiE,QAAQ,EAAE;gBAAW,CAAE;gBAAA9D,QAAA,gBACnC1N,OAAA;kBACE2G,KAAK,EAAE7E,UAAU,CAACE,UAAW;kBAC7B4N,QAAQ,EAAEpJ,oBAAqB;kBAC/BiK,QAAQ,EAAEjO,gBAAiB;kBAC3B+K,KAAK,EAAE;oBACLuB,KAAK,EAAE,MAAM;oBACbd,QAAQ,EAAE,OAAO;oBACjBW,OAAO,EAAE,WAAW;oBACpBvO,YAAY,EAAE,CAAC;oBACfsO,MAAM,EAAE,mBAAmB;oBAC3B6B,OAAO,EAAE,MAAM;oBACf3B,QAAQ,EAAE,EAAE;oBACZH,UAAU,EAAE,GAAG;oBACftO,UAAU,EAAE,OAAO;oBACnB0O,MAAM,EAAErM,gBAAgB,GAAG,MAAM,GAAG,SAAS;oBAC7C2Q,UAAU,EAAE,MAAM;oBAClBC,eAAe,EAAE,mOAAmO;oBACpPC,kBAAkB,EAAE,mBAAmB;oBACvCC,gBAAgB,EAAE,WAAW;oBAC7BC,cAAc,EAAE,MAAM;oBACtBC,YAAY,EAAE;kBAChB,CAAE;kBAAA9F,QAAA,gBAEF1N,OAAA;oBAAQ2G,KAAK,EAAC,EAAE;oBAAC4G,KAAK,EAAE;sBAAEiB,KAAK,EAAE,SAAS;sBAAE+C,SAAS,EAAE;oBAAS,CAAE;oBAAA7D,QAAA,EAC/DlL,gBAAgB,GAAG,yBAAyB,GAAG;kBAA0B;oBAAAoL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpE,CAAC,eAGT/N,OAAA;oBAAUyT,KAAK,EAAC,yBAAe;oBAAClG,KAAK,EAAE;sBAAEkB,UAAU,EAAE,MAAM;sBAAED,KAAK,EAAE;oBAAU,CAAE;oBAAAd,QAAA,EAC7EpL,kBAAkB,CAChBgL,MAAM,CAAClI,EAAE;sBAAA,IAAAsO,gBAAA,EAAAC,iBAAA,EAAAC,iBAAA,EAAAC,iBAAA,EAAAC,iBAAA;sBAAA,OAAI,EAAAJ,gBAAA,GAAAtO,EAAE,CAACtB,YAAY,cAAA4P,gBAAA,uBAAfA,gBAAA,CAAiBK,QAAQ,CAAC,OAAO,CAAC,OAAAJ,iBAAA,GAAIvO,EAAE,CAACtB,YAAY,cAAA6P,iBAAA,uBAAfA,iBAAA,CAAiBI,QAAQ,CAAC,MAAM,CAAC,OAAAH,iBAAA,GACxExO,EAAE,CAACtB,YAAY,cAAA8P,iBAAA,uBAAfA,iBAAA,CAAiBG,QAAQ,CAAC,SAAS,CAAC,OAAAF,iBAAA,GAAIzO,EAAE,CAACtB,YAAY,cAAA+P,iBAAA,uBAAfA,iBAAA,CAAiBE,QAAQ,CAAC,QAAQ,CAAC,OAAAD,iBAAA,GAC3E1O,EAAE,CAACtB,YAAY,cAAAgQ,iBAAA,uBAAfA,iBAAA,CAAiBC,QAAQ,CAAC,WAAW,CAAC;oBAAA,EAAC,CACnD1M,GAAG,CAAE2M,QAAQ,iBACZhU,OAAA;sBAEE2G,KAAK,EAAEqN,QAAQ,CAACpQ,EAAG;sBACnB2J,KAAK,EAAE;wBAAEoB,OAAO,EAAE,KAAK;wBAAEH,KAAK,EAAE;sBAAU,CAAE;sBAAAd,QAAA,GAE3CsG,QAAQ,CAACnQ,IAAI,EAAC,IAAE,EAACmQ,QAAQ,CAAClQ,YAAY,EAAC,GAC1C;oBAAA,GALOkQ,QAAQ,CAACpQ,EAAE;sBAAAgK,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAKV,CACT;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACI,CAAC,eAGX/N,OAAA;oBAAUyT,KAAK,EAAC,yBAAe;oBAAClG,KAAK,EAAE;sBAAEkB,UAAU,EAAE,MAAM;sBAAED,KAAK,EAAE;oBAAU,CAAE;oBAAAd,QAAA,EAC7EpL,kBAAkB,CAChBgL,MAAM,CAAClI,EAAE;sBAAA,IAAA6O,iBAAA,EAAAC,iBAAA,EAAAC,iBAAA,EAAAC,iBAAA;sBAAA,OAAI,EAAAH,iBAAA,GAAA7O,EAAE,CAACtB,YAAY,cAAAmQ,iBAAA,uBAAfA,iBAAA,CAAiBF,QAAQ,CAAC,MAAM,CAAC,OAAAG,iBAAA,GAAI9O,EAAE,CAACtB,YAAY,cAAAoQ,iBAAA,uBAAfA,iBAAA,CAAiBH,QAAQ,CAAC,QAAQ,CAAC,OAAAI,iBAAA,GACzE/O,EAAE,CAACtB,YAAY,cAAAqQ,iBAAA,uBAAfA,iBAAA,CAAiBJ,QAAQ,CAAC,YAAY,CAAC,OAAAK,iBAAA,GAAIhP,EAAE,CAACtB,YAAY,cAAAsQ,iBAAA,uBAAfA,iBAAA,CAAiBL,QAAQ,CAAC,QAAQ,CAAC;oBAAA,EAAC,CAC3F1M,GAAG,CAAE2M,QAAQ,iBACZhU,OAAA;sBAEE2G,KAAK,EAAEqN,QAAQ,CAACpQ,EAAG;sBACnB2J,KAAK,EAAE;wBAAEoB,OAAO,EAAE,KAAK;wBAAEH,KAAK,EAAE;sBAAU,CAAE;sBAAAd,QAAA,GAE3CsG,QAAQ,CAACnQ,IAAI,EAAC,IAAE,EAACmQ,QAAQ,CAAClQ,YAAY,EAAC,GAC1C;oBAAA,GALOkQ,QAAQ,CAACpQ,EAAE;sBAAAgK,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAKV,CACT;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACI,CAAC,eAGX/N,OAAA;oBAAUyT,KAAK,EAAC,yBAAe;oBAAClG,KAAK,EAAE;sBAAEkB,UAAU,EAAE,MAAM;sBAAED,KAAK,EAAE;oBAAU,CAAE;oBAAAd,QAAA,EAC7EpL,kBAAkB,CAChBgL,MAAM,CAAClI,EAAE;sBAAA,IAAAiP,iBAAA,EAAAC,iBAAA;sBAAA,OAAI,EAAAD,iBAAA,GAAAjP,EAAE,CAACtB,YAAY,cAAAuQ,iBAAA,uBAAfA,iBAAA,CAAiBN,QAAQ,CAAC,MAAM,CAAC,OAAAO,iBAAA,GAAIlP,EAAE,CAACtB,YAAY,cAAAwQ,iBAAA,uBAAfA,iBAAA,CAAiBP,QAAQ,CAAC,KAAK,CAAC;oBAAA,EAAC,CACnF1M,GAAG,CAAE2M,QAAQ,iBACZhU,OAAA;sBAEE2G,KAAK,EAAEqN,QAAQ,CAACpQ,EAAG;sBACnB2J,KAAK,EAAE;wBAAEoB,OAAO,EAAE,KAAK;wBAAEH,KAAK,EAAE;sBAAU,CAAE;sBAAAd,QAAA,GAE3CsG,QAAQ,CAACnQ,IAAI,EAAC,IAAE,EAACmQ,QAAQ,CAAClQ,YAAY,EAAC,GAC1C;oBAAA,GALOkQ,QAAQ,CAACpQ,EAAE;sBAAAgK,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAKV,CACT;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACI,CAAC,eAGX/N,OAAA;oBAAUyT,KAAK,EAAC,iCAAuB;oBAAClG,KAAK,EAAE;sBAAEkB,UAAU,EAAE,MAAM;sBAAED,KAAK,EAAE;oBAAU,CAAE;oBAAAd,QAAA,EACrFpL,kBAAkB,CAChBgL,MAAM,CAAClI,EAAE;sBAAA,IAAAmP,kBAAA,EAAAC,kBAAA;sBAAA,OAAI,EAAAD,kBAAA,GAAAnP,EAAE,CAACtB,YAAY,cAAAyQ,kBAAA,uBAAfA,kBAAA,CAAiBR,QAAQ,CAAC,WAAW,CAAC,OAAAS,kBAAA,GAAIpP,EAAE,CAACtB,YAAY,cAAA0Q,kBAAA,uBAAfA,kBAAA,CAAiBT,QAAQ,CAAC,QAAQ,CAAC;oBAAA,EAAC,CAC3F1M,GAAG,CAAE2M,QAAQ,iBACZhU,OAAA;sBAEE2G,KAAK,EAAEqN,QAAQ,CAACpQ,EAAG;sBACnB2J,KAAK,EAAE;wBAAEoB,OAAO,EAAE,KAAK;wBAAEH,KAAK,EAAE;sBAAU,CAAE;sBAAAd,QAAA,GAE3CsG,QAAQ,CAACnQ,IAAI,EAAC,IAAE,EAACmQ,QAAQ,CAAClQ,YAAY,EAAC,GAC1C;oBAAA,GALOkQ,QAAQ,CAACpQ,EAAE;sBAAAgK,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAKV,CACT;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACI,CAAC,eAGX/N,OAAA;oBAAUyT,KAAK,EAAC,oCAA0B;oBAAClG,KAAK,EAAE;sBAAEkB,UAAU,EAAE,MAAM;sBAAED,KAAK,EAAE;oBAAU,CAAE;oBAAAd,QAAA,EACxFpL,kBAAkB,CAChBgL,MAAM,CAAClI,EAAE;sBAAA,IAAAqP,kBAAA,EAAAC,kBAAA,EAAAC,QAAA,EAAAC,SAAA;sBAAA,OAAI,EAAAH,kBAAA,GAAArP,EAAE,CAACtB,YAAY,cAAA2Q,kBAAA,uBAAfA,kBAAA,CAAiBV,QAAQ,CAAC,SAAS,CAAC,OAAAW,kBAAA,GAAItP,EAAE,CAACtB,YAAY,cAAA4Q,kBAAA,uBAAfA,kBAAA,CAAiBX,QAAQ,CAAC,MAAM,CAAC,OAAAY,QAAA,GAC1EvP,EAAE,CAACvB,IAAI,cAAA8Q,QAAA,uBAAPA,QAAA,CAASE,WAAW,CAAC,CAAC,CAACd,QAAQ,CAAC,SAAS,CAAC,OAAAa,SAAA,GAAIxP,EAAE,CAACvB,IAAI,cAAA+Q,SAAA,uBAAPA,SAAA,CAASC,WAAW,CAAC,CAAC,CAACd,QAAQ,CAAC,MAAM,CAAC;oBAAA,EAAC,CAClG1M,GAAG,CAAE2M,QAAQ,iBACZhU,OAAA;sBAEE2G,KAAK,EAAEqN,QAAQ,CAACpQ,EAAG;sBACnB2J,KAAK,EAAE;wBAAEoB,OAAO,EAAE,KAAK;wBAAEH,KAAK,EAAE;sBAAU,CAAE;sBAAAd,QAAA,GAE3CsG,QAAQ,CAACnQ,IAAI,EAAC,IAAE,EAACmQ,QAAQ,CAAClQ,YAAY,EAAC,GAC1C;oBAAA,GALOkQ,QAAQ,CAACpQ,EAAE;sBAAAgK,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAKV,CACT;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACI,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL,CAAC,EAGRvL,gBAAgB,iBACfxC,OAAA;kBAAKuN,KAAK,EAAE;oBACViE,QAAQ,EAAE,UAAU;oBACpBuB,KAAK,EAAE,MAAM;oBACbD,GAAG,EAAE,KAAK;oBACVgC,SAAS,EAAE,kBAAkB;oBAC7BhG,KAAK,EAAE,MAAM;oBACbC,MAAM,EAAE,MAAM;oBACdL,MAAM,EAAE,mBAAmB;oBAC3BqG,SAAS,EAAE,uBAAuB;oBAClC3U,YAAY,EAAE,KAAK;oBACnB4U,SAAS,EAAE;kBACb;gBAAE;kBAAApH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CACL;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,EAGLjM,UAAU,CAACE,UAAU,iBACpBhC,OAAA;gBAAKuN,KAAK,EAAE;kBACVW,SAAS,EAAE,CAAC;kBACZS,OAAO,EAAE,UAAU;kBACnBxO,UAAU,EAAE,yBAAyB;kBACrCuO,MAAM,EAAE,mCAAmC;kBAC3CtO,YAAY,EAAE,CAAC;kBACfwO,QAAQ,EAAE,EAAE;kBACZJ,KAAK,EAAE;gBACT,CAAE;gBAAAd,QAAA,gBACA1N,OAAA;kBAAA0N,QAAA,EAAQ;gBAAS;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,KAAC,EAACjM,UAAU,CAACG,YAAY,EAClD,EAAAxB,qBAAA,GAAA6B,kBAAkB,CAAC6C,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACxB,EAAE,IAAI9B,UAAU,CAACE,UAAU,CAAC,cAAAvB,qBAAA,uBAA7DA,qBAAA,CAA+DsD,WAAW,kBACzE/D,OAAA;kBAAKuN,KAAK,EAAE;oBAAEW,SAAS,EAAE,CAAC;oBAAEU,QAAQ,EAAE,EAAE;oBAAEJ,KAAK,EAAE;kBAAU,CAAE;kBAAAd,QAAA,GAAAhN,sBAAA,GAC1D4B,kBAAkB,CAAC6C,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACxB,EAAE,IAAI9B,UAAU,CAACE,UAAU,CAAC,cAAAtB,sBAAA,uBAA7DA,sBAAA,CAA+DqD;gBAAW;kBAAA6J,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACxE,CACN;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CACN;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC,eAGN/N,OAAA;cAAKuN,KAAK,EAAE;gBACVa,OAAO,EAAE,MAAM;gBACf2B,mBAAmB,EAAE,SAAS;gBAC9BxB,GAAG,EAAE,EAAE;gBACPJ,YAAY,EAAE,EAAE;gBAChBQ,OAAO,EAAE,EAAE;gBACXxO,UAAU,EAAE,uBAAuB;gBACnCC,YAAY,EAAE,CAAC;gBACfsO,MAAM,EAAE;cACV,CAAE;cAAAhB,QAAA,gBACA1N,OAAA;gBAAA0N,QAAA,gBACE1N,OAAA;kBAAOuN,KAAK,EAAE;oBACZa,OAAO,EAAE,OAAO;oBAChBK,UAAU,EAAE,GAAG;oBACfN,YAAY,EAAE,CAAC;oBACfS,QAAQ,EAAE,EAAE;oBACZJ,KAAK,EAAE;kBACT,CAAE;kBAAAd,QAAA,EAAC;gBAEH;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACR/N,OAAA;kBAAKuN,KAAK,EAAE;oBAAEiC,SAAS,EAAE;kBAAS,CAAE;kBAAA9B,QAAA,gBAClC1N,OAAA;oBAAKuN,KAAK,EAAE;sBACVpN,UAAU,EAAE2B,UAAU,CAACM,gBAAgB,GAAG,SAAS,GAAG,SAAS;sBAC/DoM,KAAK,EAAE1M,UAAU,CAACM,gBAAgB,GAAG,OAAO,GAAG,SAAS;sBACxDuM,OAAO,EAAE,WAAW;sBACpBvO,YAAY,EAAE,CAAC;sBACfwO,QAAQ,EAAE,EAAE;sBACZH,UAAU,EAAE,GAAG;sBACfN,YAAY,EAAE,CAAC;sBACfO,MAAM,EAAE5M,UAAU,CAACM,gBAAgB,GAAG,mBAAmB,GAAG;oBAC9D,CAAE;oBAAAsL,QAAA,EACCd,UAAU,CAAC9K,UAAU,CAACI,SAAS;kBAAC;oBAAA0L,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC9B,CAAC,eACN/N,OAAA;oBACEsO,OAAO,EAAEhI,kBAAmB;oBAC5BiH,KAAK,EAAE;sBACLpN,UAAU,EAAE2B,UAAU,CAACM,gBAAgB,GACnC,kDAAkD,GAClD,kDAAkD;sBACtDoM,KAAK,EAAE,OAAO;sBACdE,MAAM,EAAE,MAAM;sBACdtO,YAAY,EAAE,CAAC;sBACfuO,OAAO,EAAE,UAAU;sBACnBC,QAAQ,EAAE,EAAE;sBACZC,MAAM,EAAE,SAAS;sBACjBJ,UAAU,EAAE,GAAG;sBACfpO,SAAS,EAAE,2BAA2B;sBACtCyO,KAAK,EAAE;oBACT,CAAE;oBAAApB,QAAA,EAED5L,UAAU,CAACM,gBAAgB,GAAG,aAAa,GAAG;kBAAkB;oBAAAwL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC3D,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eAEN/N,OAAA;gBAAA0N,QAAA,gBACE1N,OAAA;kBAAOuN,KAAK,EAAE;oBACZa,OAAO,EAAE,OAAO;oBAChBK,UAAU,EAAE,GAAG;oBACfN,YAAY,EAAE,CAAC;oBACfS,QAAQ,EAAE,EAAE;oBACZJ,KAAK,EAAE;kBACT,CAAE;kBAAAd,QAAA,EAAC;gBAEH;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACR/N,OAAA;kBAAKuN,KAAK,EAAE;oBAAEiC,SAAS,EAAE;kBAAS,CAAE;kBAAA9B,QAAA,gBAClC1N,OAAA;oBAAKuN,KAAK,EAAE;sBACVpN,UAAU,EAAE2B,UAAU,CAACO,cAAc,GAAG,SAAS,GAAG,SAAS;sBAC7DmM,KAAK,EAAE1M,UAAU,CAACO,cAAc,GAAG,OAAO,GAAG,SAAS;sBACtDsM,OAAO,EAAE,WAAW;sBACpBvO,YAAY,EAAE,CAAC;sBACfwO,QAAQ,EAAE,EAAE;sBACZH,UAAU,EAAE,GAAG;sBACfN,YAAY,EAAE,CAAC;sBACfO,MAAM,EAAE5M,UAAU,CAACO,cAAc,GAAG,mBAAmB,GAAG;oBAC5D,CAAE;oBAAAqL,QAAA,EACCd,UAAU,CAAC9K,UAAU,CAACK,OAAO;kBAAC;oBAAAyL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC5B,CAAC,eACN/N,OAAA;oBACEsO,OAAO,EAAE/H,gBAAiB;oBAC1BgH,KAAK,EAAE;sBACLpN,UAAU,EAAE2B,UAAU,CAACO,cAAc,GACjC,kDAAkD,GAClD,kDAAkD;sBACtDmM,KAAK,EAAE,OAAO;sBACdE,MAAM,EAAE,MAAM;sBACdtO,YAAY,EAAE,CAAC;sBACfuO,OAAO,EAAE,UAAU;sBACnBC,QAAQ,EAAE,EAAE;sBACZC,MAAM,EAAE,SAAS;sBACjBJ,UAAU,EAAE,GAAG;sBACfpO,SAAS,EAAE,2BAA2B;sBACtCyO,KAAK,EAAE;oBACT,CAAE;oBAAApB,QAAA,EAED5L,UAAU,CAACO,cAAc,GAAG,aAAa,GAAG;kBAAkB;oBAAAuL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACzD,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,EAGLjM,UAAU,CAACI,SAAS,GAAGJ,UAAU,CAACK,OAAO,iBACxCnC,OAAA;cAAKuN,KAAK,EAAE;gBACVpN,UAAU,EAAE,yBAAyB;gBACrCuO,MAAM,EAAE,mBAAmB;gBAC3BtO,YAAY,EAAE,CAAC;gBACfuO,OAAO,EAAE,UAAU;gBACnBR,YAAY,EAAE,EAAE;gBAChBqB,SAAS,EAAE;cACb,CAAE;cAAA9B,QAAA,eACA1N,OAAA;gBAAMuN,KAAK,EAAE;kBAAEiB,KAAK,EAAE,SAAS;kBAAEC,UAAU,EAAE,GAAG;kBAAEG,QAAQ,EAAE;gBAAG,CAAE;gBAAAlB,QAAA,GAAC,yBACnD,EAACX,IAAI,CAACC,KAAK,CAAClL,UAAU,CAACK,OAAO,GAAGL,UAAU,CAACI,SAAS,CAAC,EAAC,UACtE;cAAA;gBAAA0L,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CACN,eAED/N,OAAA;cAAKuN,KAAK,EAAE;gBAAEa,OAAO,EAAE,MAAM;gBAAEG,GAAG,EAAE,EAAE;gBAAEF,UAAU,EAAE;cAAS,CAAE;cAAAX,QAAA,gBAC7D1N,OAAA;gBACEsO,OAAO,EAAEvJ,kBAAmB;gBAC5B0L,QAAQ,EAAE,CAAC3O,UAAU,CAACE,UAAU,IAAIF,UAAU,CAACI,SAAS,IAAIJ,UAAU,CAACK,OAAQ;gBAC/EoL,KAAK,EAAE;kBACLpN,UAAU,EAAE,CAAC2B,UAAU,CAACE,UAAU,IAAIF,UAAU,CAACI,SAAS,IAAIJ,UAAU,CAACK,OAAO,GAC5E,WAAW,GACX,iDAAiD;kBACrDqM,KAAK,EAAE,OAAO;kBACdE,MAAM,EAAE,MAAM;kBACdtO,YAAY,EAAE,CAAC;kBACfuO,OAAO,EAAE,WAAW;kBACpBC,QAAQ,EAAE,EAAE;kBACZH,UAAU,EAAE,GAAG;kBACfI,MAAM,EAAE,CAAC/M,UAAU,CAACE,UAAU,IAAIF,UAAU,CAACI,SAAS,IAAIJ,UAAU,CAACK,OAAO,GACxE,aAAa,GACb,SAAS;kBACb9B,SAAS,EAAE,2BAA2B;kBACtC+N,OAAO,EAAE,MAAM;kBACfC,UAAU,EAAE,QAAQ;kBACpBE,GAAG,EAAE;gBACP,CAAE;gBAAAb,QAAA,gBAEF1N,OAAA;kBACE6Q,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,WAAY;kBAC1CC,GAAG,EAAC,KAAK;kBACT1D,KAAK,EAAE;oBAAEuB,KAAK,EAAE,EAAE;oBAAEC,MAAM,EAAE;kBAAG;gBAAE;kBAAAnB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAClC,CAAC,wBAEJ;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,EAERjM,UAAU,CAACG,YAAY,IAAIH,UAAU,CAACI,SAAS,GAAGJ,UAAU,CAACK,OAAO,iBACnEnC,OAAA;gBAAKuN,KAAK,EAAE;kBACVqB,QAAQ,EAAE,EAAE;kBACZJ,KAAK,EAAE,SAAS;kBAChBJ,OAAO,EAAE,MAAM;kBACfC,UAAU,EAAE,QAAQ;kBACpBlO,UAAU,EAAE,yBAAyB;kBACrCwO,OAAO,EAAE,UAAU;kBACnBvO,YAAY,EAAE,CAAC;kBACfqO,UAAU,EAAE;gBACd,CAAE;gBAAAf,QAAA,GAAC,SACC,eAAA1N,OAAA;kBAAA0N,QAAA,EAAS5L,UAAU,CAACG;gBAAY;kBAAA2L,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAS,CAAC,KAC3C,EAACnB,UAAU,CAAC9K,UAAU,CAACI,SAAS,CAAC,EAAC,KAAG,EAAC0K,UAAU,CAAC9K,UAAU,CAACK,OAAO,CAAC,EAAC,GACxE;cAAA;gBAAAyL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CACN;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EAGLnM,gBAAgB,CAAC8B,MAAM,GAAG,CAAC,iBAC1B1D,OAAA;YAAA0N,QAAA,gBACE1N,OAAA;cAAKuN,KAAK,EAAE;gBACVkB,UAAU,EAAE,GAAG;gBACfN,YAAY,EAAE,EAAE;gBAChBK,KAAK,EAAE,SAAS;gBAChBJ,OAAO,EAAE,MAAM;gBACfC,UAAU,EAAE,QAAQ;gBACpBE,GAAG,EAAE;cACP,CAAE;cAAAb,QAAA,GAAC,iCACoB,EAAC9L,gBAAgB,CAAC8B,MAAM,EAAC,GAChD;YAAA;cAAAkK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACN/N,OAAA;cAAKuN,KAAK,EAAE;gBAAEa,OAAO,EAAE,MAAM;gBAAEG,GAAG,EAAE;cAAE,CAAE;cAAAb,QAAA,EACrC9L,gBAAgB,CAACyF,GAAG,CAAC,CAAChC,OAAO,EAAEyF,KAAK,kBACnC9K,OAAA;gBAEEuN,KAAK,EAAE;kBACLa,OAAO,EAAE,MAAM;kBACfgC,cAAc,EAAE,eAAe;kBAC/B/B,UAAU,EAAE,QAAQ;kBACpBlO,UAAU,EAAE,mDAAmD;kBAC/DuO,MAAM,EAAE,mBAAmB;kBAC3BtO,YAAY,EAAE,EAAE;kBAChBuO,OAAO,EAAE,WAAW;kBACpBtO,SAAS,EAAE;gBACb,CAAE;gBAAAqN,QAAA,gBAEF1N,OAAA;kBAAA0N,QAAA,gBACE1N,OAAA;oBAAKuN,KAAK,EAAE;sBACVkB,UAAU,EAAE,GAAG;sBACfD,KAAK,EAAE,SAAS;sBAChBJ,OAAO,EAAE,MAAM;sBACfC,UAAU,EAAE,QAAQ;sBACpBE,GAAG,EAAE,CAAC;sBACNJ,YAAY,EAAE;oBAChB,CAAE;oBAAAT,QAAA,gBACA1N,OAAA;sBAAMuN,KAAK,EAAE;wBACXpN,UAAU,EAAE,kDAAkD;wBAC9DqO,KAAK,EAAE,OAAO;wBACdpO,YAAY,EAAE,KAAK;wBACnB0O,KAAK,EAAE,EAAE;wBACTC,MAAM,EAAE,EAAE;wBACVX,OAAO,EAAE,MAAM;wBACfC,UAAU,EAAE,QAAQ;wBACpB+B,cAAc,EAAE,QAAQ;wBACxBxB,QAAQ,EAAE,EAAE;wBACZH,UAAU,EAAE;sBACd,CAAE;sBAAAf,QAAA,EACC5C,KAAK,GAAG;oBAAC;sBAAA8C,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACN,CAAC,EACN1I,OAAO,CAACpD,YAAY,EACpBoD,OAAO,CAACG,WAAW,iBAClBxF,OAAA;sBAAMuN,KAAK,EAAE;wBACXpN,UAAU,EAAE,yBAAyB;wBACrCqO,KAAK,EAAE,SAAS;wBAChBG,OAAO,EAAE,SAAS;wBAClBvO,YAAY,EAAE,EAAE;wBAChBwO,QAAQ,EAAE,EAAE;wBACZH,UAAU,EAAE;sBACd,CAAE;sBAAAf,QAAA,EACCrI,OAAO,CAACG;oBAAW;sBAAAoI,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAChB,CACP;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,eACN/N,OAAA;oBAAKuN,KAAK,EAAE;sBAAEqB,QAAQ,EAAE,EAAE;sBAAEJ,KAAK,EAAE,SAAS;sBAAEyG,UAAU,EAAE;oBAAG,CAAE;oBAAAvH,QAAA,GAAC,eAC3D,EAACd,UAAU,CAACvH,OAAO,CAACnD,SAAS,CAAC,EAAC,KAAG,EAAC0K,UAAU,CAACvH,OAAO,CAAClD,OAAO,CAAC,eACjEnC,OAAA;sBAAMuN,KAAK,EAAE;wBACX0H,UAAU,EAAE,CAAC;wBACb9U,UAAU,EAAE,yBAAyB;wBACrCqO,KAAK,EAAE,SAAS;wBAChBG,OAAO,EAAE,SAAS;wBAClBvO,YAAY,EAAE,CAAC;wBACfwO,QAAQ,EAAE,EAAE;wBACZH,UAAU,EAAE;sBACd,CAAE;sBAAAf,QAAA,GACCX,IAAI,CAACC,KAAK,CAAC3H,OAAO,CAAClD,OAAO,GAAGkD,OAAO,CAACnD,SAAS,CAAC,EAAC,YACnD;oBAAA;sBAAA0L,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACN/N,OAAA;kBACEsO,OAAO,EAAEA,CAAA,KAAMlB,aAAa,CAAC/H,OAAO,CAACzB,EAAE,CAAE;kBACzC2J,KAAK,EAAE;oBACLpN,UAAU,EAAE,kDAAkD;oBAC9DqO,KAAK,EAAE,OAAO;oBACdE,MAAM,EAAE,MAAM;oBACdtO,YAAY,EAAE,CAAC;oBACfuO,OAAO,EAAE,UAAU;oBACnBC,QAAQ,EAAE,EAAE;oBACZC,MAAM,EAAE,SAAS;oBACjBJ,UAAU,EAAE,GAAG;oBACfpO,SAAS,EAAE,kCAAkC;oBAC7C+N,OAAO,EAAE,MAAM;oBACfC,UAAU,EAAE,QAAQ;oBACpBE,GAAG,EAAE;kBACP,CAAE;kBAAAb,QAAA,gBAEF1N,OAAA;oBACE6Q,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,cAAe;oBAC7CC,GAAG,EAAC,QAAQ;oBACZ1D,KAAK,EAAE;sBAAEuB,KAAK,EAAE,EAAE;sBAAEC,MAAM,EAAE;oBAAG;kBAAE;oBAAAnB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAClC,CAAC,UAEJ;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA,GAvFJ1I,OAAO,CAACzB,EAAE;gBAAAgK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAwFZ,CACN;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACxN,EAAA,CAlzDuBD,WAAW;EAAA,QAgZhBX,WAAW,EACXC,WAAW;AAAA;AAAAsV,EAAA,GAjZN5U,WAAW;AAAA,IAAA4U,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}