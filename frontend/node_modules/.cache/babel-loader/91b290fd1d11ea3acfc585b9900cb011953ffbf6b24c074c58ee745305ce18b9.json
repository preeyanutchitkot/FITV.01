{"ast":null,"code":"/**\r\n * üéØ PoseComparator - AI-powered Pose Comparison System\r\n * ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢\r\n * \r\n * Features:\r\n * - Cosine Similarity Algorithm\r\n * - Angle-based Joint Analysis  \r\n * - Real-time Accuracy Scoring\r\n * - Body Part Specific Feedback\r\n */\n\nexport class PoseComparator {\n  constructor() {\n    // MediaPipe Pose landmark indices for key body parts\n    this.POSE_LANDMARKS = {\n      // Face landmarks\n      NOSE: 0,\n      LEFT_EYE_INNER: 1,\n      LEFT_EYE: 2,\n      LEFT_EYE_OUTER: 3,\n      RIGHT_EYE_INNER: 4,\n      RIGHT_EYE: 5,\n      RIGHT_EYE_OUTER: 6,\n      LEFT_EAR: 7,\n      RIGHT_EAR: 8,\n      LEFT_MOUTH: 9,\n      RIGHT_MOUTH: 10,\n      // Upper body landmarks\n      LEFT_SHOULDER: 11,\n      RIGHT_SHOULDER: 12,\n      LEFT_ELBOW: 13,\n      RIGHT_ELBOW: 14,\n      LEFT_WRIST: 15,\n      RIGHT_WRIST: 16,\n      LEFT_PINKY: 17,\n      RIGHT_PINKY: 18,\n      LEFT_INDEX: 19,\n      RIGHT_INDEX: 20,\n      LEFT_THUMB: 21,\n      RIGHT_THUMB: 22,\n      // Lower body landmarks\n      LEFT_HIP: 23,\n      RIGHT_HIP: 24,\n      LEFT_KNEE: 25,\n      RIGHT_KNEE: 26,\n      LEFT_ANKLE: 27,\n      RIGHT_ANKLE: 28,\n      LEFT_HEEL: 29,\n      RIGHT_HEEL: 30,\n      LEFT_FOOT_INDEX: 31,\n      RIGHT_FOOT_INDEX: 32\n    };\n\n    // Joint groups for angle-based analysis\n    this.JOINT_GROUPS = {\n      LEFT_ARM: [this.POSE_LANDMARKS.LEFT_SHOULDER, this.POSE_LANDMARKS.LEFT_ELBOW, this.POSE_LANDMARKS.LEFT_WRIST],\n      RIGHT_ARM: [this.POSE_LANDMARKS.RIGHT_SHOULDER, this.POSE_LANDMARKS.RIGHT_ELBOW, this.POSE_LANDMARKS.RIGHT_WRIST],\n      LEFT_LEG: [this.POSE_LANDMARKS.LEFT_HIP, this.POSE_LANDMARKS.LEFT_KNEE, this.POSE_LANDMARKS.LEFT_ANKLE],\n      RIGHT_LEG: [this.POSE_LANDMARKS.RIGHT_HIP, this.POSE_LANDMARKS.RIGHT_KNEE, this.POSE_LANDMARKS.RIGHT_ANKLE],\n      TORSO: [this.POSE_LANDMARKS.LEFT_SHOULDER, this.POSE_LANDMARKS.LEFT_HIP, this.POSE_LANDMARKS.RIGHT_HIP, this.POSE_LANDMARKS.RIGHT_SHOULDER]\n    };\n\n    // Weight importance for different body parts\n    this.BODY_PART_WEIGHTS = {\n      // Core body alignment (highest priority)\n      [this.POSE_LANDMARKS.LEFT_SHOULDER]: 2.0,\n      [this.POSE_LANDMARKS.RIGHT_SHOULDER]: 2.0,\n      [this.POSE_LANDMARKS.LEFT_HIP]: 2.0,\n      [this.POSE_LANDMARKS.RIGHT_HIP]: 2.0,\n      // Arms (important for upper body exercises)\n      [this.POSE_LANDMARKS.LEFT_ELBOW]: 1.5,\n      [this.POSE_LANDMARKS.RIGHT_ELBOW]: 1.5,\n      [this.POSE_LANDMARKS.LEFT_WRIST]: 1.3,\n      [this.POSE_LANDMARKS.RIGHT_WRIST]: 1.3,\n      // Legs (important for lower body exercises)\n      [this.POSE_LANDMARKS.LEFT_KNEE]: 1.5,\n      [this.POSE_LANDMARKS.RIGHT_KNEE]: 1.5,\n      [this.POSE_LANDMARKS.LEFT_ANKLE]: 1.2,\n      [this.POSE_LANDMARKS.RIGHT_ANKLE]: 1.2,\n      // Face and extremities (lower priority)\n      [this.POSE_LANDMARKS.NOSE]: 0.5,\n      [this.POSE_LANDMARKS.LEFT_EAR]: 0.3,\n      [this.POSE_LANDMARKS.RIGHT_EAR]: 0.3\n    };\n\n    // Minimum visibility threshold\n    this.MIN_VISIBILITY = 0.5;\n  }\n\n  /**\r\n   * üéØ Main comparison function - returns accuracy percentage\r\n   * @param {Array} trainerPose - Reference pose keypoints from trainer\r\n   * @param {Array} traineePose - User's pose keypoints\r\n   * @returns {Object} - { accuracy: number, feedback: string, bodyPartScores: object }\r\n   */\n  comparePoses(trainerPose, traineePose) {\n    if (!this.isValidPose(trainerPose) || !this.isValidPose(traineePose)) {\n      return {\n        accuracy: 0,\n        feedback: \"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ó‡πà‡∏≤‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á\",\n        bodyPartScores: {}\n      };\n    }\n\n    // Method 1: Position-based similarity (30% weight)\n    const positionScore = this.calculatePositionSimilarity(trainerPose, traineePose);\n\n    // Method 2: Angle-based similarity (70% weight)\n    const angleScore = this.calculateAngleSimilarity(trainerPose, traineePose);\n\n    // Combined accuracy score\n    const accuracy = Math.round(positionScore * 0.3 + angleScore * 0.7);\n\n    // Generate feedback\n    const feedback = this.generateFeedback(accuracy, trainerPose, traineePose);\n\n    // Calculate body part specific scores\n    const bodyPartScores = this.calculateBodyPartScores(trainerPose, traineePose);\n    return {\n      accuracy: Math.max(0, Math.min(100, accuracy)),\n      feedback,\n      bodyPartScores\n    };\n  }\n\n  /**\r\n   * üìê Calculate angle between three points (P1-P2-P3)\r\n   */\n  calculateAngle(p1, p2, p3) {\n    const a = Math.hypot(p2.x - p3.x, p2.y - p3.y);\n    const b = Math.hypot(p1.x - p3.x, p1.y - p3.y);\n    const c = Math.hypot(p1.x - p2.x, p1.y - p2.y);\n\n    // Use cosine rule to find angle at p2\n    const angle = Math.acos(Math.max(-1, Math.min(1, (b * b + c * c - a * a) / (2 * b * c))));\n    return angle * (180 / Math.PI); // Convert to degrees\n  }\n\n  /**\r\n   * üéØ Position-based similarity using weighted Euclidean distance\r\n   */\n  calculatePositionSimilarity(trainerPose, traineePose) {\n    let totalScore = 0;\n    let totalWeight = 0;\n    for (let i = 0; i < Math.min(trainerPose.length, traineePose.length); i++) {\n      const trainerPoint = trainerPose[i];\n      const traineePoint = traineePose[i];\n      if ((trainerPoint === null || trainerPoint === void 0 ? void 0 : trainerPoint.visibility) > this.MIN_VISIBILITY && (traineePoint === null || traineePoint === void 0 ? void 0 : traineePoint.visibility) > this.MIN_VISIBILITY) {\n        // Calculate normalized distance\n        const distance = Math.hypot(trainerPoint.x - traineePoint.x, trainerPoint.y - traineePoint.y);\n\n        // Convert distance to similarity (0-1 scale)\n        const similarity = Math.max(0, 1 - distance * 1.5);\n\n        // Apply body part weight\n        const weight = this.BODY_PART_WEIGHTS[i] || 1.0;\n        totalScore += similarity * weight;\n        totalWeight += weight;\n      }\n    }\n    return totalWeight > 0 ? totalScore / totalWeight * 100 : 0;\n  }\n\n  /**\r\n   * üìê Angle-based similarity - more accurate for pose matching\r\n   */\n  calculateAngleSimilarity(trainerPose, traineePose) {\n    let totalScore = 0;\n    let validJoints = 0;\n\n    // Check each joint group\n    Object.entries(this.JOINT_GROUPS).forEach(([jointName, indices]) => {\n      if (indices.length === 3) {\n        const [p1Idx, p2Idx, p3Idx] = indices;\n\n        // Get trainer joint points\n        const trainerP1 = trainerPose[p1Idx];\n        const trainerP2 = trainerPose[p2Idx];\n        const trainerP3 = trainerPose[p3Idx];\n\n        // Get trainee joint points\n        const traineeP1 = traineePose[p1Idx];\n        const traineeP2 = traineePose[p2Idx];\n        const traineeP3 = traineePose[p3Idx];\n\n        // Check if all points are visible\n        if (this.arePointsVisible([trainerP1, trainerP2, trainerP3]) && this.arePointsVisible([traineeP1, traineeP2, traineeP3])) {\n          // Calculate angles\n          const trainerAngle = this.calculateAngle(trainerP1, trainerP2, trainerP3);\n          const traineeAngle = this.calculateAngle(traineeP1, traineeP2, traineeP3);\n\n          // Calculate angle difference (smaller = better)\n          const angleDiff = Math.abs(trainerAngle - traineeAngle);\n\n          // Convert to similarity score (0-100)\n          const similarity = Math.max(0, 100 - angleDiff * 0.8);\n\n          // Weight based on joint importance\n          const weight = this.getJointWeight(jointName);\n          totalScore += similarity * weight;\n          validJoints += weight;\n        }\n      }\n    });\n    return validJoints > 0 ? totalScore / validJoints : 0;\n  }\n\n  /**\r\n   * üíØ Calculate scores for individual body parts\r\n   */\n  calculateBodyPartScores(trainerPose, traineePose) {\n    const scores = {};\n    Object.entries(this.JOINT_GROUPS).forEach(([jointName, indices]) => {\n      if (indices.length >= 3) {\n        const [p1Idx, p2Idx, p3Idx] = indices;\n        const trainerPoints = [trainerPose[p1Idx], trainerPose[p2Idx], trainerPose[p3Idx]];\n        const traineePoints = [traineePose[p1Idx], traineePose[p2Idx], traineePose[p3Idx]];\n        if (this.arePointsVisible(trainerPoints) && this.arePointsVisible(traineePoints)) {\n          const trainerAngle = this.calculateAngle(...trainerPoints);\n          const traineeAngle = this.calculateAngle(...traineePoints);\n          const angleDiff = Math.abs(trainerAngle - traineeAngle);\n          scores[jointName] = Math.max(0, 100 - angleDiff * 0.8);\n        } else {\n          scores[jointName] = 0;\n        }\n      }\n    });\n    return scores;\n  }\n\n  /**\r\n   * üí¨ Generate contextual feedback based on accuracy and body parts\r\n   */\n  generateFeedback(accuracy, trainerPose, traineePose) {\n    const bodyPartScores = this.calculateBodyPartScores(trainerPose, traineePose);\n\n    // Find lowest scoring body part\n    const lowestScore = Math.min(...Object.values(bodyPartScores));\n    const lowestBodyPart = Object.keys(bodyPartScores).find(part => bodyPartScores[part] === lowestScore);\n    if (accuracy >= 90) {\n      return \"üéâ ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏°‡∏≤‡∏Å\";\n    } else if (accuracy >= 80) {\n      return \"üëç ‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß\";\n    } else if (accuracy >= 70) {\n      return \"‚ö° ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢\";\n    } else if (accuracy >= 60) {\n      return `‚ö†Ô∏è ‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤${this.getBodyPartNameThai(lowestBodyPart)}‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä`;\n    } else if (accuracy >= 40) {\n      return \"üîÑ ‡∏•‡∏≠‡∏á‡∏î‡∏π‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏ä‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°\";\n    } else {\n      return \"üéØ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà - ‡∏î‡∏π‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏ä‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î\";\n    }\n  }\n\n  /**\r\n   * üèãÔ∏è Get weight for different joint groups\r\n   */\n  getJointWeight(jointName) {\n    const weights = {\n      'LEFT_ARM': 1.2,\n      'RIGHT_ARM': 1.2,\n      'LEFT_LEG': 1.5,\n      'RIGHT_LEG': 1.5,\n      'TORSO': 2.0\n    };\n    return weights[jointName] || 1.0;\n  }\n\n  /**\r\n   * üáπüá≠ Convert body part names to Thai\r\n   */\n  getBodyPartNameThai(bodyPart) {\n    const translations = {\n      'LEFT_ARM': '‡πÅ‡∏Ç‡∏ô‡∏ã‡πâ‡∏≤‡∏¢',\n      'RIGHT_ARM': '‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏ß‡∏≤',\n      'LEFT_LEG': '‡∏Ç‡∏≤‡∏ã‡πâ‡∏≤‡∏¢',\n      'RIGHT_LEG': '‡∏Ç‡∏≤‡∏Ç‡∏ß‡∏≤',\n      'TORSO': '‡∏•‡∏≥‡∏ï‡∏±‡∏ß'\n    };\n    return translations[bodyPart] || '‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á';\n  }\n\n  /**\r\n   * ‚úÖ Check if pose data is valid\r\n   */\n  isValidPose(pose) {\n    return pose && Array.isArray(pose) && pose.length >= 33 && pose.some(point => (point === null || point === void 0 ? void 0 : point.visibility) > this.MIN_VISIBILITY);\n  }\n\n  /**\r\n   * üëÅÔ∏è Check if all points in array are visible\r\n   */\n  arePointsVisible(points) {\n    return points.every(point => point && typeof point.visibility === 'number' && point.visibility > this.MIN_VISIBILITY);\n  }\n\n  /**\r\n   * üé® Get color for accuracy score visualization\r\n   */\n  getAccuracyColor(accuracy) {\n    if (accuracy >= 85) return '#22c55e'; // Green\n    if (accuracy >= 70) return '#eab308'; // Yellow\n    if (accuracy >= 50) return '#f97316'; // Orange\n    return '#ef4444'; // Red\n  }\n\n  /**\r\n   * üìä Get detailed analysis report\r\n   */\n  getDetailedAnalysis(trainerPose, traineePose) {\n    const result = this.comparePoses(trainerPose, traineePose);\n    return {\n      ...result,\n      totalKeypoints: Math.min((trainerPose === null || trainerPose === void 0 ? void 0 : trainerPose.length) || 0, (traineePose === null || traineePose === void 0 ? void 0 : traineePose.length) || 0),\n      visibleKeypoints: {\n        trainer: (trainerPose === null || trainerPose === void 0 ? void 0 : trainerPose.filter(p => (p === null || p === void 0 ? void 0 : p.visibility) > this.MIN_VISIBILITY).length) || 0,\n        trainee: (traineePose === null || traineePose === void 0 ? void 0 : traineePose.filter(p => (p === null || p === void 0 ? void 0 : p.visibility) > this.MIN_VISIBILITY).length) || 0\n      },\n      confidence: this.calculateConfidence(trainerPose, traineePose),\n      recommendations: this.getRecommendations(result.bodyPartScores)\n    };\n  }\n\n  /**\r\n   * üéØ Calculate confidence level of the comparison\r\n   */\n  calculateConfidence(trainerPose, traineePose) {\n    if (!this.isValidPose(trainerPose) || !this.isValidPose(traineePose)) {\n      return 0;\n    }\n    const trainerVisible = trainerPose.filter(p => (p === null || p === void 0 ? void 0 : p.visibility) > this.MIN_VISIBILITY).length;\n    const traineeVisible = traineePose.filter(p => (p === null || p === void 0 ? void 0 : p.visibility) > this.MIN_VISIBILITY).length;\n    const avgVisible = (trainerVisible + traineeVisible) / 2;\n    const maxPossible = 33; // Total MediaPipe landmarks\n\n    return Math.round(avgVisible / maxPossible * 100);\n  }\n\n  /**\r\n   * üí° Generate specific recommendations based on body part scores\r\n   */\n  getRecommendations(bodyPartScores) {\n    const recommendations = [];\n    Object.entries(bodyPartScores).forEach(([part, score]) => {\n      if (score < 70) {\n        recommendations.push({\n          bodyPart: this.getBodyPartNameThai(part),\n          issue: `${this.getBodyPartNameThai(part)}‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏ä`,\n          suggestion: this.getSpecificSuggestion(part)\n        });\n      }\n    });\n    return recommendations.slice(0, 3); // Top 3 recommendations\n  }\n\n  /**\r\n   * üìù Get specific suggestions for body parts\r\n   */\n  getSpecificSuggestion(bodyPart) {\n    const suggestions = {\n      'LEFT_ARM': '‡∏¢‡∏Å‡πÅ‡∏Ç‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä',\n      'RIGHT_ARM': '‡∏¢‡∏Å‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏ß‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä',\n      'LEFT_LEG': '‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏Ç‡∏≤‡∏ã‡πâ‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä',\n      'RIGHT_LEG': '‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏Ç‡∏≤‡∏Ç‡∏ß‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä',\n      'TORSO': '‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏•‡∏≥‡∏ï‡∏±‡∏ß'\n    };\n    return suggestions[bodyPart] || '‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä';\n  }\n}\n\n// Export singleton instance\nexport const poseComparator = new PoseComparator();\nexport default PoseComparator;","map":{"version":3,"names":["PoseComparator","constructor","POSE_LANDMARKS","NOSE","LEFT_EYE_INNER","LEFT_EYE","LEFT_EYE_OUTER","RIGHT_EYE_INNER","RIGHT_EYE","RIGHT_EYE_OUTER","LEFT_EAR","RIGHT_EAR","LEFT_MOUTH","RIGHT_MOUTH","LEFT_SHOULDER","RIGHT_SHOULDER","LEFT_ELBOW","RIGHT_ELBOW","LEFT_WRIST","RIGHT_WRIST","LEFT_PINKY","RIGHT_PINKY","LEFT_INDEX","RIGHT_INDEX","LEFT_THUMB","RIGHT_THUMB","LEFT_HIP","RIGHT_HIP","LEFT_KNEE","RIGHT_KNEE","LEFT_ANKLE","RIGHT_ANKLE","LEFT_HEEL","RIGHT_HEEL","LEFT_FOOT_INDEX","RIGHT_FOOT_INDEX","JOINT_GROUPS","LEFT_ARM","RIGHT_ARM","LEFT_LEG","RIGHT_LEG","TORSO","BODY_PART_WEIGHTS","MIN_VISIBILITY","comparePoses","trainerPose","traineePose","isValidPose","accuracy","feedback","bodyPartScores","positionScore","calculatePositionSimilarity","angleScore","calculateAngleSimilarity","Math","round","generateFeedback","calculateBodyPartScores","max","min","calculateAngle","p1","p2","p3","a","hypot","x","y","b","c","angle","acos","PI","totalScore","totalWeight","i","length","trainerPoint","traineePoint","visibility","distance","similarity","weight","validJoints","Object","entries","forEach","jointName","indices","p1Idx","p2Idx","p3Idx","trainerP1","trainerP2","trainerP3","traineeP1","traineeP2","traineeP3","arePointsVisible","trainerAngle","traineeAngle","angleDiff","abs","getJointWeight","scores","trainerPoints","traineePoints","lowestScore","values","lowestBodyPart","keys","find","part","getBodyPartNameThai","weights","bodyPart","translations","pose","Array","isArray","some","point","points","every","getAccuracyColor","getDetailedAnalysis","result","totalKeypoints","visibleKeypoints","trainer","filter","p","trainee","confidence","calculateConfidence","recommendations","getRecommendations","trainerVisible","traineeVisible","avgVisible","maxPossible","score","push","issue","suggestion","getSpecificSuggestion","slice","suggestions","poseComparator"],"sources":["C:/Fit/frontend/src/utils/PoseComparator.js"],"sourcesContent":["/**\r\n * üéØ PoseComparator - AI-powered Pose Comparison System\r\n * ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢\r\n * \r\n * Features:\r\n * - Cosine Similarity Algorithm\r\n * - Angle-based Joint Analysis  \r\n * - Real-time Accuracy Scoring\r\n * - Body Part Specific Feedback\r\n */\r\n\r\nexport class PoseComparator {\r\n  constructor() {\r\n    // MediaPipe Pose landmark indices for key body parts\r\n    this.POSE_LANDMARKS = {\r\n      // Face landmarks\r\n      NOSE: 0,\r\n      LEFT_EYE_INNER: 1, LEFT_EYE: 2, LEFT_EYE_OUTER: 3,\r\n      RIGHT_EYE_INNER: 4, RIGHT_EYE: 5, RIGHT_EYE_OUTER: 6,\r\n      LEFT_EAR: 7, RIGHT_EAR: 8,\r\n      LEFT_MOUTH: 9, RIGHT_MOUTH: 10,\r\n      \r\n      // Upper body landmarks\r\n      LEFT_SHOULDER: 11, RIGHT_SHOULDER: 12,\r\n      LEFT_ELBOW: 13, RIGHT_ELBOW: 14,\r\n      LEFT_WRIST: 15, RIGHT_WRIST: 16,\r\n      LEFT_PINKY: 17, RIGHT_PINKY: 18,\r\n      LEFT_INDEX: 19, RIGHT_INDEX: 20,\r\n      LEFT_THUMB: 21, RIGHT_THUMB: 22,\r\n      \r\n      // Lower body landmarks\r\n      LEFT_HIP: 23, RIGHT_HIP: 24,\r\n      LEFT_KNEE: 25, RIGHT_KNEE: 26,\r\n      LEFT_ANKLE: 27, RIGHT_ANKLE: 28,\r\n      LEFT_HEEL: 29, RIGHT_HEEL: 30,\r\n      LEFT_FOOT_INDEX: 31, RIGHT_FOOT_INDEX: 32\r\n    };\r\n\r\n    // Joint groups for angle-based analysis\r\n    this.JOINT_GROUPS = {\r\n      LEFT_ARM: [this.POSE_LANDMARKS.LEFT_SHOULDER, this.POSE_LANDMARKS.LEFT_ELBOW, this.POSE_LANDMARKS.LEFT_WRIST],\r\n      RIGHT_ARM: [this.POSE_LANDMARKS.RIGHT_SHOULDER, this.POSE_LANDMARKS.RIGHT_ELBOW, this.POSE_LANDMARKS.RIGHT_WRIST],\r\n      LEFT_LEG: [this.POSE_LANDMARKS.LEFT_HIP, this.POSE_LANDMARKS.LEFT_KNEE, this.POSE_LANDMARKS.LEFT_ANKLE],\r\n      RIGHT_LEG: [this.POSE_LANDMARKS.RIGHT_HIP, this.POSE_LANDMARKS.RIGHT_KNEE, this.POSE_LANDMARKS.RIGHT_ANKLE],\r\n      TORSO: [this.POSE_LANDMARKS.LEFT_SHOULDER, this.POSE_LANDMARKS.LEFT_HIP, this.POSE_LANDMARKS.RIGHT_HIP, this.POSE_LANDMARKS.RIGHT_SHOULDER]\r\n    };\r\n\r\n    // Weight importance for different body parts\r\n    this.BODY_PART_WEIGHTS = {\r\n      // Core body alignment (highest priority)\r\n      [this.POSE_LANDMARKS.LEFT_SHOULDER]: 2.0,\r\n      [this.POSE_LANDMARKS.RIGHT_SHOULDER]: 2.0,\r\n      [this.POSE_LANDMARKS.LEFT_HIP]: 2.0,\r\n      [this.POSE_LANDMARKS.RIGHT_HIP]: 2.0,\r\n      \r\n      // Arms (important for upper body exercises)\r\n      [this.POSE_LANDMARKS.LEFT_ELBOW]: 1.5,\r\n      [this.POSE_LANDMARKS.RIGHT_ELBOW]: 1.5,\r\n      [this.POSE_LANDMARKS.LEFT_WRIST]: 1.3,\r\n      [this.POSE_LANDMARKS.RIGHT_WRIST]: 1.3,\r\n      \r\n      // Legs (important for lower body exercises)\r\n      [this.POSE_LANDMARKS.LEFT_KNEE]: 1.5,\r\n      [this.POSE_LANDMARKS.RIGHT_KNEE]: 1.5,\r\n      [this.POSE_LANDMARKS.LEFT_ANKLE]: 1.2,\r\n      [this.POSE_LANDMARKS.RIGHT_ANKLE]: 1.2,\r\n      \r\n      // Face and extremities (lower priority)\r\n      [this.POSE_LANDMARKS.NOSE]: 0.5,\r\n      [this.POSE_LANDMARKS.LEFT_EAR]: 0.3,\r\n      [this.POSE_LANDMARKS.RIGHT_EAR]: 0.3,\r\n    };\r\n\r\n    // Minimum visibility threshold\r\n    this.MIN_VISIBILITY = 0.5;\r\n  }\r\n\r\n  /**\r\n   * üéØ Main comparison function - returns accuracy percentage\r\n   * @param {Array} trainerPose - Reference pose keypoints from trainer\r\n   * @param {Array} traineePose - User's pose keypoints\r\n   * @returns {Object} - { accuracy: number, feedback: string, bodyPartScores: object }\r\n   */\r\n  comparePoses(trainerPose, traineePose) {\r\n    if (!this.isValidPose(trainerPose) || !this.isValidPose(traineePose)) {\r\n      return {\r\n        accuracy: 0,\r\n        feedback: \"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ó‡πà‡∏≤‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á\",\r\n        bodyPartScores: {}\r\n      };\r\n    }\r\n\r\n    // Method 1: Position-based similarity (30% weight)\r\n    const positionScore = this.calculatePositionSimilarity(trainerPose, traineePose);\r\n    \r\n    // Method 2: Angle-based similarity (70% weight)\r\n    const angleScore = this.calculateAngleSimilarity(trainerPose, traineePose);\r\n    \r\n    // Combined accuracy score\r\n    const accuracy = Math.round((positionScore * 0.3) + (angleScore * 0.7));\r\n    \r\n    // Generate feedback\r\n    const feedback = this.generateFeedback(accuracy, trainerPose, traineePose);\r\n    \r\n    // Calculate body part specific scores\r\n    const bodyPartScores = this.calculateBodyPartScores(trainerPose, traineePose);\r\n\r\n    return {\r\n      accuracy: Math.max(0, Math.min(100, accuracy)),\r\n      feedback,\r\n      bodyPartScores\r\n    };\r\n  }\r\n\r\n  /**\r\n   * üìê Calculate angle between three points (P1-P2-P3)\r\n   */\r\n  calculateAngle(p1, p2, p3) {\r\n    const a = Math.hypot(p2.x - p3.x, p2.y - p3.y);\r\n    const b = Math.hypot(p1.x - p3.x, p1.y - p3.y);\r\n    const c = Math.hypot(p1.x - p2.x, p1.y - p2.y);\r\n    \r\n    // Use cosine rule to find angle at p2\r\n    const angle = Math.acos(\r\n      Math.max(-1, Math.min(1, (b * b + c * c - a * a) / (2 * b * c)))\r\n    );\r\n    \r\n    return angle * (180 / Math.PI); // Convert to degrees\r\n  }\r\n\r\n  /**\r\n   * üéØ Position-based similarity using weighted Euclidean distance\r\n   */\r\n  calculatePositionSimilarity(trainerPose, traineePose) {\r\n    let totalScore = 0;\r\n    let totalWeight = 0;\r\n\r\n    for (let i = 0; i < Math.min(trainerPose.length, traineePose.length); i++) {\r\n      const trainerPoint = trainerPose[i];\r\n      const traineePoint = traineePose[i];\r\n      \r\n      if (trainerPoint?.visibility > this.MIN_VISIBILITY && \r\n          traineePoint?.visibility > this.MIN_VISIBILITY) {\r\n        \r\n        // Calculate normalized distance\r\n        const distance = Math.hypot(\r\n          trainerPoint.x - traineePoint.x,\r\n          trainerPoint.y - traineePoint.y\r\n        );\r\n        \r\n        // Convert distance to similarity (0-1 scale)\r\n        const similarity = Math.max(0, 1 - (distance * 1.5));\r\n        \r\n        // Apply body part weight\r\n        const weight = this.BODY_PART_WEIGHTS[i] || 1.0;\r\n        \r\n        totalScore += similarity * weight;\r\n        totalWeight += weight;\r\n      }\r\n    }\r\n\r\n    return totalWeight > 0 ? (totalScore / totalWeight) * 100 : 0;\r\n  }\r\n\r\n  /**\r\n   * üìê Angle-based similarity - more accurate for pose matching\r\n   */\r\n  calculateAngleSimilarity(trainerPose, traineePose) {\r\n    let totalScore = 0;\r\n    let validJoints = 0;\r\n\r\n    // Check each joint group\r\n    Object.entries(this.JOINT_GROUPS).forEach(([jointName, indices]) => {\r\n      if (indices.length === 3) {\r\n        const [p1Idx, p2Idx, p3Idx] = indices;\r\n        \r\n        // Get trainer joint points\r\n        const trainerP1 = trainerPose[p1Idx];\r\n        const trainerP2 = trainerPose[p2Idx];\r\n        const trainerP3 = trainerPose[p3Idx];\r\n        \r\n        // Get trainee joint points\r\n        const traineeP1 = traineePose[p1Idx];\r\n        const traineeP2 = traineePose[p2Idx];\r\n        const traineeP3 = traineePose[p3Idx];\r\n        \r\n        // Check if all points are visible\r\n        if (this.arePointsVisible([trainerP1, trainerP2, trainerP3]) &&\r\n            this.arePointsVisible([traineeP1, traineeP2, traineeP3])) {\r\n          \r\n          // Calculate angles\r\n          const trainerAngle = this.calculateAngle(trainerP1, trainerP2, trainerP3);\r\n          const traineeAngle = this.calculateAngle(traineeP1, traineeP2, traineeP3);\r\n          \r\n          // Calculate angle difference (smaller = better)\r\n          const angleDiff = Math.abs(trainerAngle - traineeAngle);\r\n          \r\n          // Convert to similarity score (0-100)\r\n          const similarity = Math.max(0, 100 - (angleDiff * 0.8));\r\n          \r\n          // Weight based on joint importance\r\n          const weight = this.getJointWeight(jointName);\r\n          \r\n          totalScore += similarity * weight;\r\n          validJoints += weight;\r\n        }\r\n      }\r\n    });\r\n\r\n    return validJoints > 0 ? totalScore / validJoints : 0;\r\n  }\r\n\r\n  /**\r\n   * üíØ Calculate scores for individual body parts\r\n   */\r\n  calculateBodyPartScores(trainerPose, traineePose) {\r\n    const scores = {};\r\n\r\n    Object.entries(this.JOINT_GROUPS).forEach(([jointName, indices]) => {\r\n      if (indices.length >= 3) {\r\n        const [p1Idx, p2Idx, p3Idx] = indices;\r\n        \r\n        const trainerPoints = [trainerPose[p1Idx], trainerPose[p2Idx], trainerPose[p3Idx]];\r\n        const traineePoints = [traineePose[p1Idx], traineePose[p2Idx], traineePose[p3Idx]];\r\n        \r\n        if (this.arePointsVisible(trainerPoints) && this.arePointsVisible(traineePoints)) {\r\n          const trainerAngle = this.calculateAngle(...trainerPoints);\r\n          const traineeAngle = this.calculateAngle(...traineePoints);\r\n          const angleDiff = Math.abs(trainerAngle - traineeAngle);\r\n          \r\n          scores[jointName] = Math.max(0, 100 - (angleDiff * 0.8));\r\n        } else {\r\n          scores[jointName] = 0;\r\n        }\r\n      }\r\n    });\r\n\r\n    return scores;\r\n  }\r\n\r\n  /**\r\n   * üí¨ Generate contextual feedback based on accuracy and body parts\r\n   */\r\n  generateFeedback(accuracy, trainerPose, traineePose) {\r\n    const bodyPartScores = this.calculateBodyPartScores(trainerPose, traineePose);\r\n    \r\n    // Find lowest scoring body part\r\n    const lowestScore = Math.min(...Object.values(bodyPartScores));\r\n    const lowestBodyPart = Object.keys(bodyPartScores).find(\r\n      part => bodyPartScores[part] === lowestScore\r\n    );\r\n\r\n    if (accuracy >= 90) {\r\n      return \"üéâ ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏°‡∏≤‡∏Å\";\r\n    } else if (accuracy >= 80) {\r\n      return \"üëç ‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß\";\r\n    } else if (accuracy >= 70) {\r\n      return \"‚ö° ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢\";\r\n    } else if (accuracy >= 60) {\r\n      return `‚ö†Ô∏è ‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤${this.getBodyPartNameThai(lowestBodyPart)}‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä`;\r\n    } else if (accuracy >= 40) {\r\n      return \"üîÑ ‡∏•‡∏≠‡∏á‡∏î‡∏π‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏ä‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°\";\r\n    } else {\r\n      return \"üéØ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà - ‡∏î‡∏π‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏ä‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î\";\r\n    }\r\n  }\r\n\r\n  /**\r\n   * üèãÔ∏è Get weight for different joint groups\r\n   */\r\n  getJointWeight(jointName) {\r\n    const weights = {\r\n      'LEFT_ARM': 1.2,\r\n      'RIGHT_ARM': 1.2,\r\n      'LEFT_LEG': 1.5,\r\n      'RIGHT_LEG': 1.5,\r\n      'TORSO': 2.0\r\n    };\r\n    return weights[jointName] || 1.0;\r\n  }\r\n\r\n  /**\r\n   * üáπüá≠ Convert body part names to Thai\r\n   */\r\n  getBodyPartNameThai(bodyPart) {\r\n    const translations = {\r\n      'LEFT_ARM': '‡πÅ‡∏Ç‡∏ô‡∏ã‡πâ‡∏≤‡∏¢',\r\n      'RIGHT_ARM': '‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏ß‡∏≤', \r\n      'LEFT_LEG': '‡∏Ç‡∏≤‡∏ã‡πâ‡∏≤‡∏¢',\r\n      'RIGHT_LEG': '‡∏Ç‡∏≤‡∏Ç‡∏ß‡∏≤',\r\n      'TORSO': '‡∏•‡∏≥‡∏ï‡∏±‡∏ß'\r\n    };\r\n    return translations[bodyPart] || '‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á';\r\n  }\r\n\r\n  /**\r\n   * ‚úÖ Check if pose data is valid\r\n   */\r\n  isValidPose(pose) {\r\n    return pose && \r\n           Array.isArray(pose) && \r\n           pose.length >= 33 && \r\n           pose.some(point => point?.visibility > this.MIN_VISIBILITY);\r\n  }\r\n\r\n  /**\r\n   * üëÅÔ∏è Check if all points in array are visible\r\n   */\r\n  arePointsVisible(points) {\r\n    return points.every(point => \r\n      point && \r\n      typeof point.visibility === 'number' && \r\n      point.visibility > this.MIN_VISIBILITY\r\n    );\r\n  }\r\n\r\n  /**\r\n   * üé® Get color for accuracy score visualization\r\n   */\r\n  getAccuracyColor(accuracy) {\r\n    if (accuracy >= 85) return '#22c55e'; // Green\r\n    if (accuracy >= 70) return '#eab308'; // Yellow\r\n    if (accuracy >= 50) return '#f97316'; // Orange\r\n    return '#ef4444'; // Red\r\n  }\r\n\r\n  /**\r\n   * üìä Get detailed analysis report\r\n   */\r\n  getDetailedAnalysis(trainerPose, traineePose) {\r\n    const result = this.comparePoses(trainerPose, traineePose);\r\n    \r\n    return {\r\n      ...result,\r\n      totalKeypoints: Math.min(trainerPose?.length || 0, traineePose?.length || 0),\r\n      visibleKeypoints: {\r\n        trainer: trainerPose?.filter(p => p?.visibility > this.MIN_VISIBILITY).length || 0,\r\n        trainee: traineePose?.filter(p => p?.visibility > this.MIN_VISIBILITY).length || 0\r\n      },\r\n      confidence: this.calculateConfidence(trainerPose, traineePose),\r\n      recommendations: this.getRecommendations(result.bodyPartScores)\r\n    };\r\n  }\r\n\r\n  /**\r\n   * üéØ Calculate confidence level of the comparison\r\n   */\r\n  calculateConfidence(trainerPose, traineePose) {\r\n    if (!this.isValidPose(trainerPose) || !this.isValidPose(traineePose)) {\r\n      return 0;\r\n    }\r\n\r\n    const trainerVisible = trainerPose.filter(p => p?.visibility > this.MIN_VISIBILITY).length;\r\n    const traineeVisible = traineePose.filter(p => p?.visibility > this.MIN_VISIBILITY).length;\r\n    \r\n    const avgVisible = (trainerVisible + traineeVisible) / 2;\r\n    const maxPossible = 33; // Total MediaPipe landmarks\r\n    \r\n    return Math.round((avgVisible / maxPossible) * 100);\r\n  }\r\n\r\n  /**\r\n   * üí° Generate specific recommendations based on body part scores\r\n   */\r\n  getRecommendations(bodyPartScores) {\r\n    const recommendations = [];\r\n    \r\n    Object.entries(bodyPartScores).forEach(([part, score]) => {\r\n      if (score < 70) {\r\n        recommendations.push({\r\n          bodyPart: this.getBodyPartNameThai(part),\r\n          issue: `${this.getBodyPartNameThai(part)}‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏ä`,\r\n          suggestion: this.getSpecificSuggestion(part)\r\n        });\r\n      }\r\n    });\r\n\r\n    return recommendations.slice(0, 3); // Top 3 recommendations\r\n  }\r\n\r\n  /**\r\n   * üìù Get specific suggestions for body parts\r\n   */\r\n  getSpecificSuggestion(bodyPart) {\r\n    const suggestions = {\r\n      'LEFT_ARM': '‡∏¢‡∏Å‡πÅ‡∏Ç‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä',\r\n      'RIGHT_ARM': '‡∏¢‡∏Å‡πÅ‡∏Ç‡∏ô‡∏Ç‡∏ß‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä',\r\n      'LEFT_LEG': '‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏Ç‡∏≤‡∏ã‡πâ‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä',\r\n      'RIGHT_LEG': '‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏Ç‡∏≤‡∏Ç‡∏ß‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä',\r\n      'TORSO': '‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡∏•‡∏≥‡∏ï‡∏±‡∏ß'\r\n    };\r\n    return suggestions[bodyPart] || '‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏ä';\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const poseComparator = new PoseComparator();\r\nexport default PoseComparator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}