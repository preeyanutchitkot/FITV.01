{"ast":null,"code":"var _jsxFileName = \"C:\\\\Fit\\\\frontend\\\\src\\\\pages\\\\UploadVideo.js\",\n  _s = $RefreshSig$();\n// src/pages/UploadVideo.jsx\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport TrainerHeader from \"../components/TrainerHeader\";\nimport KeypointOverlay from \"../components/KeypointOverlay\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst box = (extra = {}) => ({\n  background: \"#fff\",\n  borderRadius: 16,\n  boxShadow: \"0 2px 12px rgba(0,0,0,0.06)\",\n  ...extra\n});\nexport default function UploadVideo() {\n  _s();\n  var _location$state;\n  // สถานะ loading เฉพาะปุ่ม save draft\n  const [submittingDraft, setSubmittingDraft] = useState(false);\n\n  // State สำหรับ keypoint overlay\n  const videoRef = useRef(null);\n  const [showKeypoints, setShowKeypoints] = useState(false);\n  const [keypoints, setKeypoints] = useState(null);\n  const [isVideoPlaying, setIsVideoPlaying] = useState(false);\n  const [processingKeypoints, setProcessingKeypoints] = useState(false);\n  const [allKeypoints, setAllKeypoints] = useState([]); // เก็บ keypoints ทั้งหมดของวิดีโอ\n\n  // NEW: Time Picker States\n  const [videoDuration, setVideoDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [exerciseSegments, setExerciseSegments] = useState([]);\n  const [newSegment, setNewSegment] = useState({\n    name: '',\n    startTime: 0,\n    endTime: 0,\n    isSelecting: false\n  });\n\n  // NEW: Time formatting helper\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // NEW: Add segment function\n  const addExerciseSegment = () => {\n    if (!newSegment.name.trim()) {\n      alert('กรุณาใส่ชื่อท่าออกกำลังกาย');\n      return;\n    }\n    if (newSegment.startTime >= newSegment.endTime) {\n      alert('เวลาเริ่มต้องน้อยกว่าเวลาจบ');\n      return;\n    }\n    const segment = {\n      id: Date.now(),\n      name: newSegment.name,\n      startTime: newSegment.startTime,\n      endTime: newSegment.endTime,\n      keypoints: []\n    };\n    setExerciseSegments(prev => [...prev, segment]);\n    setNewSegment({\n      name: '',\n      startTime: 0,\n      endTime: 0,\n      isSelecting: false\n    });\n  };\n\n  // NEW: Remove segment function\n  const removeSegment = segmentId => {\n    setExerciseSegments(prev => prev.filter(seg => seg.id !== segmentId));\n  };\n\n  // NEW: Start selecting time range\n  const startTimeSelection = () => {\n    if (videoRef.current) {\n      setNewSegment(prev => ({\n        ...prev,\n        startTime: videoRef.current.currentTime,\n        isSelecting: true\n      }));\n    }\n  };\n\n  // NEW: End selecting time range\n  const endTimeSelection = () => {\n    if (videoRef.current) {\n      setNewSegment(prev => ({\n        ...prev,\n        endTime: videoRef.current.currentTime,\n        isSelecting: false\n      }));\n    }\n  };\n\n  // ฟังก์ชัน save draft (POST /videos แต่ description มี draft:true)\n  const handleSaveDraft = async () => {\n    if (!file || !name) {\n      alert(\"กรุณาเลือกไฟล์และกรอกชื่อวิดีโอ\");\n      return;\n    }\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\n      return;\n    }\n    if (submittingDraft) return;\n    setSubmittingDraft(true);\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"title\", name);\n    formData.append(\"difficulty\", level);\n    // description: kcal:xx;draft:true\n    formData.append(\"description\", `kcal:${kcal};draft:true`);\n    formData.append(\"approved\", \"false\");\n    try {\n      const res = await fetch(\"http://localhost:8000/videos\", {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        body: formData\n      });\n      if (!res.ok) {\n        let detail = \"\";\n        try {\n          const data = await res.json();\n          detail = data.detail || \"\";\n        } catch {}\n        alert(`บันทึก draft ไม่สำเร็จ (${res.status}) ${detail}`);\n        return;\n      }\n      alert(\"บันทึก draft สำเร็จ! \");\n      navigate(\"/trainer\");\n    } catch (e) {\n      alert(\"เกิดข้อผิดพลาดในการบันทึก draft: \" + ((e === null || e === void 0 ? void 0 : e.message) || e));\n    } finally {\n      setSubmittingDraft(false);\n    }\n  };\n  const navigate = useNavigate();\n  const location = useLocation();\n  const fileRef = useRef(null);\n\n  // NEW: แยกโหมดแก้ไขจาก state หรือ query (?id=)\n  const editId = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.videoId) || new URLSearchParams(location.search).get(\"id\");\n  const isEdit = !!editId;\n\n  // ฟอร์ม\n  const [file, setFile] = useState(null);\n  const [fileURL, setFileURL] = useState(\"\"); // ใช้ preview (ทั้งไฟล์ใหม่/ของเดิม)\n  const [name, setName] = useState(\"\");\n  const [kcal, setKcal] = useState(\"\");\n  const [level, setLevel] = useState(\"1\");\n  const [preview, setPreview] = useState(false);\n\n  // NEW: กันกดซ้ำ + แสดงสถานะตอนกำลังส่ง\n  const [submitting, setSubmitting] = useState(false);\n  const onPick = () => {\n    var _fileRef$current;\n    return (_fileRef$current = fileRef.current) === null || _fileRef$current === void 0 ? void 0 : _fileRef$current.click();\n  };\n  const onFileChange = e => {\n    var _e$target$files;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!f) return;\n    setFile(f);\n    setFileURL(URL.createObjectURL(f));\n    setPreview(true); // Auto-enable preview when file is selected\n    // Auto-enable keypoints when new video is loaded\n    setShowKeypoints(true);\n    setProcessingKeypoints(true);\n    setTimeout(() => setProcessingKeypoints(false), 2000);\n  };\n  const onDrop = e => {\n    var _e$dataTransfer$files;\n    e.preventDefault();\n    const f = (_e$dataTransfer$files = e.dataTransfer.files) === null || _e$dataTransfer$files === void 0 ? void 0 : _e$dataTransfer$files[0];\n    if (!f) return;\n    setFile(f);\n    setFileURL(URL.createObjectURL(f));\n    setPreview(true); // Auto-enable preview when file is dropped\n    // Auto-enable keypoints when new video is loaded\n    setShowKeypoints(true);\n    setProcessingKeypoints(true);\n    setTimeout(() => setProcessingKeypoints(false), 2000);\n  };\n  const onDragOver = e => e.preventDefault();\n\n  // NEW: Prefill เมื่อเป็นโหมดแก้ไข (อ่านจาก state ก่อน, ไม่มีก็ค่อย GET /videos/:id)\n  useEffect(() => {\n    var _location$state2;\n    if (!isEdit) return;\n\n    // ถ้ามีข้อมูลมากับ state ก็เติมเลย (เร็วกว่า)\n    if ((_location$state2 = location.state) !== null && _location$state2 !== void 0 && _location$state2.video) {\n      var _v$kcal, _v$description$match$, _v$description$match;\n      const v = location.state.video;\n      setName(v.title || \"\");\n      setLevel(String(v.difficulty || v.level || \"1\"));\n      setKcal((_v$kcal = v.kcal) !== null && _v$kcal !== void 0 ? _v$kcal : typeof v.description === \"string\" ? (_v$description$match$ = (_v$description$match = v.description.match(/kcal:(\\d+)/)) === null || _v$description$match === void 0 ? void 0 : _v$description$match[1]) !== null && _v$description$match$ !== void 0 ? _v$description$match$ : \"\" : \"\");\n      const url = v.image || (v.s3_url ? /^https?:\\/\\//i.test(v.s3_url) ? v.s3_url : `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}` : \"\");\n      setFileURL(url);\n      // Auto-enable keypoints for edit mode\n      if (url) {\n        setShowKeypoints(true);\n        setProcessingKeypoints(true);\n        setTimeout(() => setProcessingKeypoints(false), 2000);\n      }\n      return;\n    }\n\n    // ไม่มีใน state -> ดึงจาก BE\n    (async () => {\n      try {\n        var _v$kcal2, _v$description$match$2, _v$description$match2;\n        const token = localStorage.getItem(\"token\");\n        if (!token) return; // ไม่ล็อกอินจะดึงไม่ได้\n        const res = await fetch(`http://localhost:8000/videos/${editId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (!res.ok) return;\n        const v = await res.json();\n        setName(v.title || \"\");\n        setLevel(String(v.difficulty || v.level || \"1\"));\n        setKcal((_v$kcal2 = v.kcal) !== null && _v$kcal2 !== void 0 ? _v$kcal2 : typeof v.description === \"string\" ? (_v$description$match$2 = (_v$description$match2 = v.description.match(/kcal:(\\d+)/)) === null || _v$description$match2 === void 0 ? void 0 : _v$description$match2[1]) !== null && _v$description$match$2 !== void 0 ? _v$description$match$2 : \"\" : \"\");\n        const url = v.s3_url && (!/^https?:\\/\\//i.test(v.s3_url) ? `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}` : v.s3_url);\n        setFileURL(url || \"\");\n        // Auto-enable keypoints for edit mode\n        if (url) {\n          setShowKeypoints(true);\n          setProcessingKeypoints(true);\n          setTimeout(() => setProcessingKeypoints(false), 2000);\n        }\n      } catch {}\n    })();\n  }, [isEdit, editId, location.state]);\n\n  // CHANGED: อัปโหลดใหม่ (POST /videos) + เช็ค token + กันกดซ้ำ + แสดง error ชัดเจน\n  const handleCreate = async () => {\n    if (!file || !name) {\n      alert(\"กรุณาเลือกไฟล์และกรอกชื่อวิดีโอ\");\n      return;\n    }\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\n      return;\n    }\n    if (submitting) return;\n    setSubmitting(true);\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"title\", name);\n    formData.append(\"difficulty\", level);\n    formData.append(\"description\", `kcal:${kcal};verifying:true`);\n    formData.append(\"approved\", \"false\");\n    try {\n      const res = await fetch(\"http://localhost:8000/videos\", {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        body: formData\n      });\n      if (!res.ok) {\n        let detail = \"\";\n        try {\n          const data = await res.json();\n          detail = data.detail || \"\";\n        } catch {}\n        if (res.status === 401) {\n          alert(`อัพโหลดไม่สำเร็จ (401 Unauthorized)\\n${detail || \"Token ไม่ถูกต้องหรือไม่มีการส่ง\"}`);\n        } else if (res.status === 403) {\n          alert(\"อัพโหลดไม่สำเร็จ (403) — เฉพาะ Trainer เท่านั้น\");\n        } else {\n          alert(`อัพโหลดไม่สำเร็จ (${res.status}) ${detail}`);\n        }\n        return;\n      }\n      alert(\"กำลังตรวจสอบ (verifying)... คลิปจะเข้าสู่สถานะ Pending\");\n      navigate(\"/trainer\");\n    } catch (e) {\n      alert(\"เกิดข้อผิดพลาดในการอัพโหลด: \" + ((e === null || e === void 0 ? void 0 : e.message) || e));\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // NEW: โหมดแก้ไข (PUT /videos/:id + ออปชัน PUT /videos/:id/file ถ้าเลือกไฟล์ใหม่)\n  const handleUpdate = async () => {\n    if (!name) {\n      alert(\"กรุณากรอกชื่อวิดีโอ\");\n      return;\n    }\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\n      return;\n    }\n    if (submitting) return;\n    setSubmitting(true);\n\n    // 1) อัปเดต metadata\n    const metaRes = await fetch(`http://localhost:8000/videos/${editId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}` // NEW: ส่ง Bearer token\n      },\n      body: JSON.stringify({\n        title: name,\n        difficulty: level,\n        // ถ้า BE ใช้ int: Number(level)\n        description: `kcal:${kcal}`\n      })\n    });\n    if (!metaRes.ok) {\n      let detail = \"\";\n      try {\n        const data = await metaRes.json();\n        detail = data.detail || \"\";\n      } catch {}\n      alert(`อัปเดตไม่สำเร็จ (${metaRes.status}) ${detail}`);\n      setSubmitting(false);\n      return;\n    }\n\n    // 2) ถ้าเลือกไฟล์ใหม่ -> อัปเดตไฟล์\n    if (file) {\n      const fd = new FormData();\n      fd.append(\"file\", file);\n      const fileRes = await fetch(`http://localhost:8000/videos/${editId}/file`, {\n        method: \"PUT\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        // NEW: ส่ง Bearer token\n        body: fd\n      });\n      if (!fileRes.ok) {\n        let detail = \"\";\n        try {\n          const data = await fileRes.json();\n          detail = data.detail || \"\";\n        } catch {}\n        alert(`อัปเดตไฟล์ไม่สำเร็จ (${fileRes.status}) ${detail}`);\n        setSubmitting(false);\n        return;\n      }\n    }\n    alert(\"อัปเดตเรียบร้อย\");\n    setSubmitting(false);\n    navigate(\"/trainer\");\n  };\n\n  // header user\n  const today = new Date().toLocaleDateString(\"en-GB\", {\n    day: \"numeric\",\n    month: \"long\",\n    year: \"numeric\"\n  });\n  let user = {\n    name: \"Trainer\"\n  };\n  try {\n    const userData = localStorage.getItem(\"user\");\n    if (userData) {\n      const userObj = JSON.parse(userData);\n      user = {\n        name: userObj.name || \"Trainer\",\n        picture: userObj.picture || \"/user (1).png\"\n      };\n    }\n  } catch {}\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: \"100vh\",\n      background: \"linear-gradient(135deg,#f8fafc 0%, #e2e8f0 100%)\",\n      fontFamily: \"Inter, system-ui, sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(TrainerHeader, {\n      user: user,\n      date: today\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: 1200,\n        margin: \"0 auto\",\n        marginTop: \"12px\",\n        marginBottom: \"8px\",\n        display: \"flex\",\n        alignItems: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/trainer\"),\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: 8,\n          background: \"linear-gradient(90deg,#a855f7 0%, #ff4d8b 100%)\",\n          color: \"#fff\",\n          fontWeight: 700,\n          border: \"none\",\n          borderRadius: 999,\n          padding: \"8px 22px 8px 16px\",\n          fontSize: \"1.08rem\",\n          boxShadow: \"0 2px 8px #a855f733\",\n          cursor: \"pointer\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"20\",\n          height: \"20\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          style: {\n            marginRight: 4\n          },\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12.5 15l-5-5 5-5\",\n            stroke: \"#fff\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), \"\\u0E01\\u0E25\\u0E31\\u0E1A\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: 1200,\n        margin: \"0 auto\",\n        padding: \"8px 16px 40px 16px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: box({\n          padding: 24,\n          marginTop: 8\n        }),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          onDrop: onDrop,\n          onDragOver: onDragOver,\n          style: {\n            border: \"2px dashed #d1d5db\",\n            borderRadius: 16,\n            padding: \"36px 20px\",\n            textAlign: \"center\",\n            color: \"#6b7280\",\n            background: \"#f8fafc\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 18,\n              fontWeight: 700,\n              color: \"#111827\",\n              marginBottom: 6\n            },\n            children: isEdit ? \"Replace video (optional)\" : \"Select video to upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 16\n            },\n            children: \"Or drag and drop it here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onPick,\n            style: {\n              background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\n              color: \"#fff\",\n              fontWeight: 700,\n              border: \"none\",\n              borderRadius: 10,\n              padding: \"10px 18px\",\n              cursor: \"pointer\"\n            },\n            children: \"Select video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileRef,\n            type: \"file\",\n            accept: \"video/*\",\n            onChange: onFileChange,\n            style: {\n              display: \"none\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this), file && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 12,\n              color: \"#374151\"\n            },\n            children: [\"Selected: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: file.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 27\n            }, this), \" (\", Math.round(file.size / 1024 / 1024), \" MB)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"repeat(4,1fr)\",\n          gap: 16,\n          marginTop: 14\n        },\n        children: [{\n          title: \"Size and duration\",\n          desc: \"Maximum size: 30 GB, video duration: 60 minutes\"\n        }, {\n          title: \"File formats\",\n          desc: \"Recommended: .mp4 (others supported)\"\n        }, {\n          title: \"Video resolutions\",\n          desc: \"Better: 1080p/1440p/4K\"\n        }, {\n          title: \"Aspect ratios\",\n          desc: \"Recommended: 16:9\"\n        }].map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: \"14px 16px\"\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700,\n              color: \"#111827\",\n              marginBottom: 6\n            },\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 13,\n              color: \"#6b7280\",\n              lineHeight: 1.4\n            },\n            children: item.desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 15\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"grid\",\n          gridTemplateColumns: \"1.1fr 1fr\",\n          gap: 20,\n          marginTop: 24\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: 20\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 20,\n                fontWeight: 800,\n                color: \"#111827\"\n              },\n              children: isEdit ? \"Edit details\" : \"Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPreview(p => !p),\n              style: {\n                border: \"1.5px solid #e5e7eb\",\n                background: \"#fff\",\n                color: \"#a855f7\",\n                borderRadius: 999,\n                padding: \"8px 14px\",\n                fontWeight: 700,\n                cursor: \"pointer\"\n              },\n              children: \"Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 18\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: name,\n              onChange: e => setName(e.target.value),\n              placeholder: \"e.g., Pushups \\u2013 Beginner Form\",\n              style: {\n                width: \"97%\",\n                padding: \"10px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #e5e7eb\",\n                outline: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 14\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Kcalories *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"0\",\n              value: kcal,\n              onChange: e => setKcal(e.target.value),\n              placeholder: \"e.g., 60\",\n              style: {\n                width: 240,\n                padding: \"10px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #e5e7eb\",\n                outline: \"none\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 14\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: \"block\",\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Level\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: level,\n              onChange: e => setLevel(e.target.value),\n              style: {\n                width: 180,\n                padding: \"10px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #e5e7eb\",\n                outline: \"none\",\n                background: \"#fff\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"Level 1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"Level 2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"Level 3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 603,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              gap: 12,\n              marginTop: 20\n            },\n            children: [isEdit ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleUpdate,\n              disabled: submitting // NEW: กันกดซ้ำ\n              ,\n              style: {\n                opacity: submitting ? 0.7 : 1,\n                // NEW: ฟีดแบ็กกำลังส่ง\n                background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\n                color: \"#fff\",\n                fontWeight: 700,\n                border: \"none\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submitting ? \"not-allowed\" : \"pointer\"\n              },\n              children: submitting ? \"Updating...\" : \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (window.confirm(\"ต้องรอ admin อนุมัติคลิปก่อนจึงจะเป็น Active\\nกดยืนยันเพื่อส่งคลิปเข้าสู่สถานะ Pending\")) {\n                  handleCreate();\n                }\n              },\n              disabled: submitting,\n              style: {\n                opacity: submitting ? 0.7 : 1,\n                background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\n                color: \"#fff\",\n                fontWeight: 700,\n                border: \"none\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submitting ? \"not-allowed\" : \"pointer\",\n                display: \"inline-flex\",\n                alignItems: \"center\",\n                gap: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: process.env.PUBLIC_URL + \"/UploadSimple.png\",\n                alt: \"upload\",\n                style: {\n                  width: 20,\n                  height: 20,\n                  marginRight: 6,\n                  verticalAlign: \"middle\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 19\n              }, this), submitting ? \"Uploading...\" : \"Public\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 627,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSaveDraft,\n              disabled: submittingDraft,\n              style: {\n                background: \"#e5e7eb\",\n                color: \"#111827\",\n                fontWeight: 700,\n                border: \"none\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submittingDraft ? \"not-allowed\" : \"pointer\",\n                opacity: submittingDraft ? 0.7 : 1\n              },\n              children: submittingDraft ? \"Saving...\" : \"Save draft\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (window.confirm('Discard changes and go back to Trainer page?')) {\n                  navigate('/trainer');\n                }\n              },\n              disabled: submitting,\n              style: {\n                background: \"#fff\",\n                color: \"#6b7280\",\n                fontWeight: 700,\n                border: \"1px solid #e5e7eb\",\n                borderRadius: 10,\n                padding: \"10px 16px\",\n                cursor: submitting ? \"not-allowed\" : \"pointer\"\n              },\n              children: \"Discard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: 16,\n            minHeight: 300,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          }),\n          children: !fileURL ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"100%\",\n              height: 320,\n              borderRadius: 12,\n              background: \"#e5e7eb\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              color: \"#6b7280\"\n            },\n            children: \"\\\"No video selected\\\"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 710,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'relative',\n              width: '100%',\n              height: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              src: fileURL,\n              controls: true,\n              loop: true,\n              autoPlay: true,\n              muted: true,\n              onPlay: () => setIsVideoPlaying(true),\n              onPause: () => setIsVideoPlaying(false),\n              onEnded: () => setIsVideoPlaying(false),\n              onLoadedData: () => {\n                // Auto-play and enable keypoints when video loads\n                if (videoRef.current) {\n                  setVideoDuration(videoRef.current.duration);\n                  videoRef.current.play().catch(() => {\n                    // If autoplay fails, just continue without error\n                  });\n                }\n              },\n              onTimeUpdate: () => {\n                if (videoRef.current) {\n                  setCurrentTime(videoRef.current.currentTime);\n                }\n              },\n              style: {\n                width: '100%',\n                height: '100%',\n                maxHeight: 320,\n                objectFit: 'contain',\n                borderRadius: 12,\n                background: '#fff',\n                display: 'block'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 17\n            }, this), showKeypoints && /*#__PURE__*/_jsxDEV(KeypointOverlay, {\n              videoRef: videoRef,\n              isPlaying: isVideoPlaying,\n              onKeypointsDetected: detectedKeypoints => {\n                setKeypoints(detectedKeypoints);\n                // เก็บ keypoints พร้อม timestamp\n                if (detectedKeypoints && videoRef.current) {\n                  const timestamp = videoRef.current.currentTime;\n                  setAllKeypoints(prev => [...prev.filter(kp => Math.abs(kp.timestamp - timestamp) > 0.1),\n                  // หลีกเลี่ยง duplicate\n                  {\n                    timestamp,\n                    keypoints: detectedKeypoints\n                  }]);\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setShowKeypoints(!showKeypoints);\n                if (!showKeypoints) {\n                  setProcessingKeypoints(true);\n                  // หยุด processing หลัง 2 วินาที (เพื่อให้ดู realistic)\n                  setTimeout(() => setProcessingKeypoints(false), 2000);\n                }\n              },\n              style: {\n                position: 'absolute',\n                top: 10,\n                right: 10,\n                background: showKeypoints ? '#10b981' : processingKeypoints ? '#f59e0b' : '#374151',\n                color: 'white',\n                border: 'none',\n                borderRadius: 8,\n                padding: '8px 12px',\n                fontSize: '12px',\n                cursor: 'pointer',\n                zIndex: 20\n              },\n              children: processingKeypoints ? 'Processing...' : showKeypoints ? 'Hide Keypoints' : 'Show Keypoints'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 779,\n              columnNumber: 17\n            }, this), showKeypoints && keypoints && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                top: 50,\n                right: 10,\n                background: 'rgba(0,0,0,0.7)',\n                color: 'white',\n                padding: '4px 8px',\n                borderRadius: 4,\n                fontSize: '11px',\n                zIndex: 20\n              },\n              children: [keypoints.length, \" keypoints detected\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 807,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                bottom: 50,\n                left: 10,\n                background: 'rgba(0,0,0,0.7)',\n                color: 'white',\n                padding: '4px 8px',\n                borderRadius: 4,\n                fontSize: '11px',\n                zIndex: 20\n              },\n              children: [formatTime(currentTime), \" / \", formatTime(videoDuration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }, this), fileURL && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 24\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: box({\n            padding: 20\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 18,\n              fontWeight: 700,\n              color: \"#111827\",\n              marginBottom: 16\n            },\n            children: \"Exercise Time Segments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 849,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: \"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)\",\n              padding: 20,\n              borderRadius: 12,\n              marginBottom: 16,\n              border: \"2px solid #0ea5e9\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 12\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: \"block\",\n                  fontWeight: 600,\n                  marginBottom: 6,\n                  color: \"#0c4a6e\"\n                },\n                children: \"Exercise Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 863,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                value: newSegment.name,\n                onChange: e => setNewSegment(prev => ({\n                  ...prev,\n                  name: e.target.value\n                })),\n                placeholder: \"e.g., Push-ups, Squats, Plank, Burpees\",\n                style: {\n                  width: \"350px\",\n                  padding: \"10px 14px\",\n                  borderRadius: 8,\n                  border: \"2px solid #0ea5e9\",\n                  outline: \"none\",\n                  fontSize: 14,\n                  fontWeight: 500\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 867,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 862,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                gap: 20,\n                alignItems: \"end\",\n                marginBottom: 16\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: \"block\",\n                    fontWeight: 600,\n                    marginBottom: 6,\n                    fontSize: 14,\n                    color: \"#0c4a6e\"\n                  },\n                  children: \"Start Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 885,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: 8\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: \"0\",\n                    max: Math.floor(videoDuration),\n                    value: Math.floor(newSegment.startTime),\n                    onChange: e => setNewSegment(prev => ({\n                      ...prev,\n                      startTime: parseInt(e.target.value) || 0\n                    })),\n                    style: {\n                      width: \"80px\",\n                      padding: \"8px 10px\",\n                      borderRadius: 6,\n                      border: \"2px solid #710ee9ff\",\n                      outline: \"none\",\n                      fontSize: 14,\n                      fontWeight: 500\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 890,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: 14,\n                      color: \"#0c4a6e\",\n                      fontWeight: 500\n                    },\n                    children: \"sec\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 909,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: startTimeSelection,\n                    style: {\n                      background: newSegment.isSelecting ? \"linear-gradient(90deg, #10b981 0%, #059669 100%)\" : \"linear-gradient(90deg, #df10a4ff 0%, #5914a3ff 100%)\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: 6,\n                      padding: \"6px 12px\",\n                      fontSize: 12,\n                      cursor: \"pointer\",\n                      fontWeight: 600,\n                      boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\"\n                    },\n                    children: newSegment.isSelecting ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: \"Selecting...\"\n                    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: \"Use Current\"\n                    }, void 0, false)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 910,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 889,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 884,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    display: \"block\",\n                    fontWeight: 600,\n                    marginBottom: 6,\n                    fontSize: 14,\n                    color: \"#0c4a6e\"\n                  },\n                  children: \"End Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 942,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: 8\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: \"0\",\n                    max: Math.floor(videoDuration),\n                    value: Math.floor(newSegment.endTime),\n                    onChange: e => setNewSegment(prev => ({\n                      ...prev,\n                      endTime: parseInt(e.target.value) || 0\n                    })),\n                    style: {\n                      width: \"80px\",\n                      padding: \"8px 10px\",\n                      borderRadius: 6,\n                      border: \"2px solid #830ee9ff\",\n                      outline: \"none\",\n                      fontSize: 14,\n                      fontWeight: 500\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 947,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: 14,\n                      color: \"#0c4a6e\",\n                      fontWeight: 500\n                    },\n                    children: \"sec\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 966,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: endTimeSelection,\n                    style: {\n                      background: \"linear-gradient(90deg, #3b82f6 0%, #4e10d4ff 100%)\",\n                      color: \"white\",\n                      border: \"none\",\n                      borderRadius: 6,\n                      padding: \"6px 12px\",\n                      fontSize: 12,\n                      cursor: \"pointer\",\n                      fontWeight: 600,\n                      boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\"\n                    },\n                    children: \"Use Current\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 967,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 946,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 941,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 883,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                gap: 12,\n                alignItems: \"center\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addExerciseSegment,\n                disabled: !newSegment.name.trim() || newSegment.startTime >= newSegment.endTime,\n                style: {\n                  background: !newSegment.name.trim() || newSegment.startTime >= newSegment.endTime ? \"#43e351ff\" : \"linear-gradient(90deg,#10b981 0%, #059669 100%)\",\n                  color: \"white\",\n                  border: \"none\",\n                  borderRadius: 8,\n                  padding: \"10px 20px\",\n                  fontSize: 14,\n                  fontWeight: 700,\n                  cursor: !newSegment.name.trim() || newSegment.startTime >= newSegment.endTime ? \"not-allowed\" : \"pointer\",\n                  boxShadow: \"0 2px 6px rgba(0,0,0,0.1)\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: process.env.PUBLIC_URL + \"/plus.png\",\n                  alt: \"add\",\n                  style: {\n                    width: 16,\n                    height: 16,\n                    marginRight: 6,\n                    verticalAlign: \"middle\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1008,\n                  columnNumber: 21\n                }, this), \"Add Segment\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 989,\n                columnNumber: 19\n              }, this), newSegment.name && newSegment.startTime < newSegment.endTime && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 13,\n                  color: \"#059669\",\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  background: \"rgba(16, 185, 129, 0.1)\",\n                  padding: \"6px 12px\",\n                  borderRadius: 6,\n                  fontWeight: 500\n                },\n                children: [\"Preview: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: newSegment.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1028,\n                  columnNumber: 32\n                }, this), \" (\", formatTime(newSegment.startTime), \" - \", formatTime(newSegment.endTime), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1017,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 988,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 15\n          }, this), exerciseSegments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 700,\n                marginBottom: 12,\n                color: \"#374151\",\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: 8\n              },\n              children: [\"Defined Segments (\", exerciseSegments.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1037,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"grid\",\n                gap: 8\n              },\n              children: exerciseSegments.map((segment, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                  background: \"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)\",\n                  border: \"2px solid #e5e7eb\",\n                  borderRadius: 10,\n                  padding: \"14px 18px\",\n                  boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 700,\n                      color: \"#111827\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      gap: 8,\n                      marginBottom: 4\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        background: \"linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)\",\n                        color: \"white\",\n                        borderRadius: \"50%\",\n                        width: 24,\n                        height: 24,\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        fontSize: 12,\n                        fontWeight: 700\n                      },\n                      children: index + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1072,\n                      columnNumber: 29\n                    }, this), segment.name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1064,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: 13,\n                      color: \"#6b7280\",\n                      marginLeft: 32\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: process.env.PUBLIC_URL + \"/chronometer.png\",\n                      alt: \"timer\",\n                      style: {\n                        width: 14,\n                        height: 14,\n                        marginRight: 6,\n                        verticalAlign: \"middle\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1089,\n                      columnNumber: 29\n                    }, this), formatTime(segment.startTime), \" - \", formatTime(segment.endTime), /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginLeft: 8,\n                        background: \"rgba(59, 130, 246, 0.1)\",\n                        color: \"#1d4ed8\",\n                        padding: \"2px 6px\",\n                        borderRadius: 4,\n                        fontSize: 11,\n                        fontWeight: 600\n                      },\n                      children: [Math.floor(segment.endTime - segment.startTime), \"s duration\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1095,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1088,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1063,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeSegment(segment.id),\n                  style: {\n                    background: \"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)\",\n                    color: \"white\",\n                    border: \"none\",\n                    borderRadius: 6,\n                    padding: \"6px 12px\",\n                    fontSize: 12,\n                    cursor: \"pointer\",\n                    fontWeight: 600,\n                    boxShadow: \"0 2px 4px rgba(239, 68, 68, 0.3)\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: process.env.PUBLIC_URL + \"/bin (1).png\",\n                    alt: \"remove\",\n                    style: {\n                      width: 14,\n                      height: 14,\n                      marginRight: 6,\n                      verticalAlign: \"middle\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1122,\n                    columnNumber: 27\n                  }, this), \"Remove\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1108,\n                  columnNumber: 25\n                }, this)]\n              }, segment.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1050,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1048,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 848,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 847,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 385,\n    columnNumber: 5\n  }, this);\n}\n_s(UploadVideo, \"SYiPPDDNNaODYBEA1HyoYHJGQGM=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = UploadVideo;\nvar _c;\n$RefreshReg$(_c, \"UploadVideo\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","useLocation","TrainerHeader","KeypointOverlay","jsxDEV","_jsxDEV","Fragment","_Fragment","box","extra","background","borderRadius","boxShadow","UploadVideo","_s","_location$state","submittingDraft","setSubmittingDraft","videoRef","showKeypoints","setShowKeypoints","keypoints","setKeypoints","isVideoPlaying","setIsVideoPlaying","processingKeypoints","setProcessingKeypoints","allKeypoints","setAllKeypoints","videoDuration","setVideoDuration","currentTime","setCurrentTime","exerciseSegments","setExerciseSegments","newSegment","setNewSegment","name","startTime","endTime","isSelecting","formatTime","seconds","mins","Math","floor","secs","toString","padStart","addExerciseSegment","trim","alert","segment","id","Date","now","prev","removeSegment","segmentId","filter","seg","startTimeSelection","current","endTimeSelection","handleSaveDraft","file","token","localStorage","getItem","formData","FormData","append","level","kcal","res","fetch","method","headers","Authorization","body","ok","detail","data","json","status","navigate","e","message","location","fileRef","editId","state","videoId","URLSearchParams","search","get","isEdit","setFile","fileURL","setFileURL","setName","setKcal","setLevel","preview","setPreview","submitting","setSubmitting","onPick","_fileRef$current","click","onFileChange","_e$target$files","f","target","files","URL","createObjectURL","setTimeout","onDrop","_e$dataTransfer$files","preventDefault","dataTransfer","onDragOver","_location$state2","video","_v$kcal","_v$description$match$","_v$description$match","v","title","String","difficulty","description","match","url","image","s3_url","test","replace","_v$kcal2","_v$description$match$2","_v$description$match2","handleCreate","handleUpdate","metaRes","JSON","stringify","fd","fileRes","today","toLocaleDateString","day","month","year","user","userData","userObj","parse","picture","style","minHeight","fontFamily","children","date","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","marginTop","marginBottom","display","alignItems","onClick","gap","color","fontWeight","border","padding","fontSize","cursor","width","height","fill","xmlns","marginRight","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","textAlign","ref","type","accept","onChange","round","size","gridTemplateColumns","desc","map","item","idx","lineHeight","justifyContent","p","value","placeholder","outline","min","disabled","opacity","window","confirm","src","process","env","PUBLIC_URL","alt","verticalAlign","position","controls","loop","autoPlay","muted","onPlay","onPause","onEnded","onLoadedData","duration","play","catch","onTimeUpdate","maxHeight","objectFit","isPlaying","onKeypointsDetected","detectedKeypoints","timestamp","kp","abs","top","right","zIndex","length","bottom","left","max","parseInt","index","marginLeft","_c","$RefreshReg$"],"sources":["C:/Fit/frontend/src/pages/UploadVideo.js"],"sourcesContent":["// src/pages/UploadVideo.jsx\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport TrainerHeader from \"../components/TrainerHeader\";\r\nimport KeypointOverlay from \"../components/KeypointOverlay\";\r\n\r\nconst box = (extra = {}) => ({\r\n  background: \"#fff\",\r\n  borderRadius: 16,\r\n  boxShadow: \"0 2px 12px rgba(0,0,0,0.06)\",\r\n  ...extra,\r\n});\r\n\r\nexport default function UploadVideo() {\r\n  // สถานะ loading เฉพาะปุ่ม save draft\r\n  const [submittingDraft, setSubmittingDraft] = useState(false);\r\n  \r\n  // State สำหรับ keypoint overlay\r\n  const videoRef = useRef(null);\r\n  const [showKeypoints, setShowKeypoints] = useState(false);\r\n  const [keypoints, setKeypoints] = useState(null);\r\n  const [isVideoPlaying, setIsVideoPlaying] = useState(false);\r\n  const [processingKeypoints, setProcessingKeypoints] = useState(false);\r\n  const [allKeypoints, setAllKeypoints] = useState([]); // เก็บ keypoints ทั้งหมดของวิดีโอ\r\n  \r\n  // NEW: Time Picker States\r\n  const [videoDuration, setVideoDuration] = useState(0);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [exerciseSegments, setExerciseSegments] = useState([]);\r\n  const [newSegment, setNewSegment] = useState({\r\n    name: '',\r\n    startTime: 0,\r\n    endTime: 0,\r\n    isSelecting: false\r\n  });\r\n\r\n  // NEW: Time formatting helper\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  // NEW: Add segment function\r\n  const addExerciseSegment = () => {\r\n    if (!newSegment.name.trim()) {\r\n      alert('กรุณาใส่ชื่อท่าออกกำลังกาย');\r\n      return;\r\n    }\r\n    if (newSegment.startTime >= newSegment.endTime) {\r\n      alert('เวลาเริ่มต้องน้อยกว่าเวลาจบ');\r\n      return;\r\n    }\r\n    \r\n    const segment = {\r\n      id: Date.now(),\r\n      name: newSegment.name,\r\n      startTime: newSegment.startTime,\r\n      endTime: newSegment.endTime,\r\n      keypoints: []\r\n    };\r\n    \r\n    setExerciseSegments(prev => [...prev, segment]);\r\n    setNewSegment({ name: '', startTime: 0, endTime: 0, isSelecting: false });\r\n  };\r\n\r\n  // NEW: Remove segment function\r\n  const removeSegment = (segmentId) => {\r\n    setExerciseSegments(prev => prev.filter(seg => seg.id !== segmentId));\r\n  };\r\n\r\n  // NEW: Start selecting time range\r\n  const startTimeSelection = () => {\r\n    if (videoRef.current) {\r\n      setNewSegment(prev => ({\r\n        ...prev,\r\n        startTime: videoRef.current.currentTime,\r\n        isSelecting: true\r\n      }));\r\n    }\r\n  };\r\n\r\n  // NEW: End selecting time range\r\n  const endTimeSelection = () => {\r\n    if (videoRef.current) {\r\n      setNewSegment(prev => ({\r\n        ...prev,\r\n        endTime: videoRef.current.currentTime,\r\n        isSelecting: false\r\n      }));\r\n    }\r\n  };\r\n\r\n  // ฟังก์ชัน save draft (POST /videos แต่ description มี draft:true)\r\n  const handleSaveDraft = async () => {\r\n    if (!file || !name) {\r\n      alert(\"กรุณาเลือกไฟล์และกรอกชื่อวิดีโอ\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\r\n      return;\r\n    }\r\n    if (submittingDraft) return;\r\n    setSubmittingDraft(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"title\", name);\r\n    formData.append(\"difficulty\", level);\r\n    // description: kcal:xx;draft:true\r\n    formData.append(\"description\", `kcal:${kcal};draft:true`);\r\n    formData.append(\"approved\", \"false\");\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:8000/videos\", {\r\n        method: \"POST\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        body: formData,\r\n      });\r\n      if (!res.ok) {\r\n        let detail = \"\";\r\n        try {\r\n          const data = await res.json();\r\n          detail = data.detail || \"\";\r\n        } catch {}\r\n        alert(`บันทึก draft ไม่สำเร็จ (${res.status}) ${detail}`);\r\n        return;\r\n      }\r\n      alert(\"บันทึก draft สำเร็จ! \");\r\n      navigate(\"/trainer\");\r\n    } catch (e) {\r\n      alert(\"เกิดข้อผิดพลาดในการบันทึก draft: \" + (e?.message || e));\r\n    } finally {\r\n      setSubmittingDraft(false);\r\n    }\r\n  };\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const fileRef = useRef(null);\r\n\r\n  // NEW: แยกโหมดแก้ไขจาก state หรือ query (?id=)\r\n  const editId = location.state?.videoId || new URLSearchParams(location.search).get(\"id\");\r\n  const isEdit = !!editId;\r\n\r\n  // ฟอร์ม\r\n  const [file, setFile] = useState(null);\r\n  const [fileURL, setFileURL] = useState(\"\"); // ใช้ preview (ทั้งไฟล์ใหม่/ของเดิม)\r\n  const [name, setName] = useState(\"\");\r\n  const [kcal, setKcal] = useState(\"\");\r\n  const [level, setLevel] = useState(\"1\");\r\n  const [preview, setPreview] = useState(false);\r\n\r\n  // NEW: กันกดซ้ำ + แสดงสถานะตอนกำลังส่ง\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const onPick = () => fileRef.current?.click();\r\n  const onFileChange = (e) => {\r\n    const f = e.target.files?.[0];\r\n    if (!f) return;\r\n    setFile(f);\r\n    setFileURL(URL.createObjectURL(f));\r\n    setPreview(true); // Auto-enable preview when file is selected\r\n    // Auto-enable keypoints when new video is loaded\r\n    setShowKeypoints(true);\r\n    setProcessingKeypoints(true);\r\n    setTimeout(() => setProcessingKeypoints(false), 2000);\r\n  };\r\n  const onDrop = (e) => {\r\n    e.preventDefault();\r\n    const f = e.dataTransfer.files?.[0];\r\n    if (!f) return;\r\n    setFile(f);\r\n    setFileURL(URL.createObjectURL(f));\r\n    setPreview(true); // Auto-enable preview when file is dropped\r\n    // Auto-enable keypoints when new video is loaded\r\n    setShowKeypoints(true);\r\n    setProcessingKeypoints(true);\r\n    setTimeout(() => setProcessingKeypoints(false), 2000);\r\n  };\r\n  const onDragOver = (e) => e.preventDefault();\r\n\r\n  // NEW: Prefill เมื่อเป็นโหมดแก้ไข (อ่านจาก state ก่อน, ไม่มีก็ค่อย GET /videos/:id)\r\n  useEffect(() => {\r\n    if (!isEdit) return;\r\n\r\n    // ถ้ามีข้อมูลมากับ state ก็เติมเลย (เร็วกว่า)\r\n    if (location.state?.video) {\r\n      const v = location.state.video;\r\n      setName(v.title || \"\");\r\n      setLevel(String(v.difficulty || v.level || \"1\"));\r\n      setKcal(\r\n        v.kcal ??\r\n          (typeof v.description === \"string\"\r\n            ? (v.description.match(/kcal:(\\d+)/)?.[1] ?? \"\")\r\n            : \"\")\r\n      );\r\n      const url =\r\n        v.image ||\r\n        (v.s3_url\r\n          ? /^https?:\\/\\//i.test(v.s3_url)\r\n            ? v.s3_url\r\n            : `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}`\r\n          : \"\");\r\n      setFileURL(url);\r\n      // Auto-enable keypoints for edit mode\r\n      if (url) {\r\n        setShowKeypoints(true);\r\n        setProcessingKeypoints(true);\r\n        setTimeout(() => setProcessingKeypoints(false), 2000);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // ไม่มีใน state -> ดึงจาก BE\r\n    (async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) return; // ไม่ล็อกอินจะดึงไม่ได้\r\n        const res = await fetch(`http://localhost:8000/videos/${editId}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        if (!res.ok) return;\r\n        const v = await res.json();\r\n        setName(v.title || \"\");\r\n        setLevel(String(v.difficulty || v.level || \"1\"));\r\n        setKcal(\r\n          v.kcal ??\r\n            (typeof v.description === \"string\"\r\n              ? (v.description.match(/kcal:(\\d+)/)?.[1] ?? \"\")\r\n              : \"\")\r\n        );\r\n        const url =\r\n          v.s3_url &&\r\n          (!/^https?:\\/\\//i.test(v.s3_url)\r\n            ? `http://localhost:8000/static/${v.s3_url.replace(/^.*[\\\\\\/]/, \"\")}`\r\n            : v.s3_url);\r\n        setFileURL(url || \"\");\r\n        // Auto-enable keypoints for edit mode\r\n        if (url) {\r\n          setShowKeypoints(true);\r\n          setProcessingKeypoints(true);\r\n          setTimeout(() => setProcessingKeypoints(false), 2000);\r\n        }\r\n      } catch {}\r\n    })();\r\n  }, [isEdit, editId, location.state]);\r\n\r\n  // CHANGED: อัปโหลดใหม่ (POST /videos) + เช็ค token + กันกดซ้ำ + แสดง error ชัดเจน\r\n  const handleCreate = async () => {\r\n    if (!file || !name) {\r\n      alert(\"กรุณาเลือกไฟล์และกรอกชื่อวิดีโอ\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\r\n      return;\r\n    }\r\n    if (submitting) return;\r\n    setSubmitting(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"title\", name);\r\n    formData.append(\"difficulty\", level);\r\n    formData.append(\"description\", `kcal:${kcal};verifying:true`);\r\n    formData.append(\"approved\", \"false\");\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:8000/videos\", {\r\n        method: \"POST\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n        body: formData,\r\n      });\r\n      if (!res.ok) {\r\n        let detail = \"\";\r\n        try {\r\n          const data = await res.json();\r\n          detail = data.detail || \"\";\r\n        } catch {}\r\n        if (res.status === 401) {\r\n          alert(`อัพโหลดไม่สำเร็จ (401 Unauthorized)\\n${detail || \"Token ไม่ถูกต้องหรือไม่มีการส่ง\"}`);\r\n        } else if (res.status === 403) {\r\n          alert(\"อัพโหลดไม่สำเร็จ (403) — เฉพาะ Trainer เท่านั้น\");\r\n        } else {\r\n          alert(`อัพโหลดไม่สำเร็จ (${res.status}) ${detail}`);\r\n        }\r\n        return;\r\n      }\r\n      alert(\"กำลังตรวจสอบ (verifying)... คลิปจะเข้าสู่สถานะ Pending\");\r\n      navigate(\"/trainer\");\r\n    } catch (e) {\r\n      alert(\"เกิดข้อผิดพลาดในการอัพโหลด: \" + (e?.message || e));\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // NEW: โหมดแก้ไข (PUT /videos/:id + ออปชัน PUT /videos/:id/file ถ้าเลือกไฟล์ใหม่)\r\n  const handleUpdate = async () => {\r\n    if (!name) {\r\n      alert(\"กรุณากรอกชื่อวิดีโอ\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    if (!token) {\r\n      alert(\"ยังไม่ได้ล็อกอิน หรือ token หายไป (โปรดล็อกอินด้วยบัญชี Trainer)\");\r\n      return;\r\n    }\r\n    if (submitting) return;\r\n    setSubmitting(true);\r\n\r\n    // 1) อัปเดต metadata\r\n    const metaRes = await fetch(`http://localhost:8000/videos/${editId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`, // NEW: ส่ง Bearer token\r\n      },\r\n      body: JSON.stringify({\r\n        title: name,\r\n        difficulty: level, // ถ้า BE ใช้ int: Number(level)\r\n        description: `kcal:${kcal}`,\r\n      }),\r\n    });\r\n    if (!metaRes.ok) {\r\n      let detail = \"\";\r\n      try {\r\n        const data = await metaRes.json();\r\n        detail = data.detail || \"\";\r\n      } catch {}\r\n      alert(`อัปเดตไม่สำเร็จ (${metaRes.status}) ${detail}`);\r\n      setSubmitting(false);\r\n      return;\r\n    }\r\n\r\n    // 2) ถ้าเลือกไฟล์ใหม่ -> อัปเดตไฟล์\r\n    if (file) {\r\n      const fd = new FormData();\r\n      fd.append(\"file\", file);\r\n      const fileRes = await fetch(`http://localhost:8000/videos/${editId}/file`, {\r\n        method: \"PUT\",\r\n        headers: { Authorization: `Bearer ${token}` }, // NEW: ส่ง Bearer token\r\n        body: fd,\r\n      });\r\n      if (!fileRes.ok) {\r\n        let detail = \"\";\r\n        try {\r\n          const data = await fileRes.json();\r\n          detail = data.detail || \"\";\r\n        } catch {}\r\n        alert(`อัปเดตไฟล์ไม่สำเร็จ (${fileRes.status}) ${detail}`);\r\n        setSubmitting(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    alert(\"อัปเดตเรียบร้อย\");\r\n    setSubmitting(false);\r\n    navigate(\"/trainer\");\r\n  };\r\n\r\n  // header user\r\n  const today = new Date().toLocaleDateString(\"en-GB\", {\r\n    day: \"numeric\",\r\n    month: \"long\",\r\n    year: \"numeric\",\r\n  });\r\n  let user = { name: \"Trainer\" };\r\n  try {\r\n    const userData = localStorage.getItem(\"user\");\r\n    if (userData) {\r\n      const userObj = JSON.parse(userData);\r\n      user = {\r\n        name: userObj.name || \"Trainer\",\r\n        picture: userObj.picture || \"/user (1).png\",\r\n      };\r\n    }\r\n  } catch {}\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        minHeight: \"100vh\",\r\n        background: \"linear-gradient(135deg,#f8fafc 0%, #e2e8f0 100%)\",\r\n        fontFamily: \"Inter, system-ui, sans-serif\",\r\n      }}\r\n    >\r\n      <TrainerHeader user={user} date={today} />\r\n\r\n      {/* back button */}\r\n      <div\r\n        style={{\r\n          maxWidth: 1200,\r\n          margin: \"0 auto\",\r\n          marginTop: \"12px\",\r\n          marginBottom: \"8px\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <button\r\n          onClick={() => navigate(\"/trainer\")}\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: 8,\r\n            background: \"linear-gradient(90deg,#a855f7 0%, #ff4d8b 100%)\",\r\n            color: \"#fff\",\r\n            fontWeight: 700,\r\n            border: \"none\",\r\n            borderRadius: 999,\r\n            padding: \"8px 22px 8px 16px\",\r\n            fontSize: \"1.08rem\",\r\n            boxShadow: \"0 2px 8px #a855f733\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          <svg\r\n            width=\"20\"\r\n            height=\"20\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            style={{ marginRight: 4 }}\r\n          >\r\n            <path\r\n              d=\"M12.5 15l-5-5 5-5\"\r\n              stroke=\"#fff\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            />\r\n          </svg>\r\n          กลับหน้าหลัก\r\n        </button>\r\n      </div>\r\n\r\n      {/* Main */}\r\n      <div style={{ maxWidth: 1200, margin: \"0 auto\", padding: \"8px 16px 40px 16px\" }}>\r\n        {/* Upload area */}\r\n        <div style={box({ padding: 24, marginTop: 8 })}>\r\n          <div\r\n            onDrop={onDrop}\r\n            onDragOver={onDragOver}\r\n            style={{\r\n              border: \"2px dashed #d1d5db\",\r\n              borderRadius: 16,\r\n              padding: \"36px 20px\",\r\n              textAlign: \"center\",\r\n              color: \"#6b7280\",\r\n              background: \"#f8fafc\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                fontSize: 18,\r\n                fontWeight: 700,\r\n                color: \"#111827\",\r\n                marginBottom: 6,\r\n              }}\r\n            >\r\n              {isEdit ? \"Replace video (optional)\" : \"Select video to upload\"}\r\n            </div>\r\n            <div style={{ marginBottom: 16 }}>Or drag and drop it here</div>\r\n            <button\r\n              onClick={onPick}\r\n              style={{\r\n                background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\r\n                color: \"#fff\",\r\n                fontWeight: 700,\r\n                border: \"none\",\r\n                borderRadius: 10,\r\n                padding: \"10px 18px\",\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              Select video\r\n            </button>\r\n            <input\r\n              ref={fileRef}\r\n              type=\"file\"\r\n              accept=\"video/*\"\r\n              onChange={onFileChange}\r\n              style={{ display: \"none\" }}\r\n            />\r\n            {file && (\r\n              <div style={{ marginTop: 12, color: \"#374151\" }}>\r\n                Selected: <b>{file.name}</b> ({Math.round(file.size / 1024 / 1024)} MB)\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Info row */}\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(4,1fr)\",\r\n            gap: 16,\r\n            marginTop: 14,\r\n          }}\r\n        >\r\n          {[\r\n            { title: \"Size and duration\", desc: \"Maximum size: 30 GB, video duration: 60 minutes\" },\r\n            { title: \"File formats\", desc: \"Recommended: .mp4 (others supported)\" },\r\n            { title: \"Video resolutions\", desc: \"Better: 1080p/1440p/4K\" },\r\n            { title: \"Aspect ratios\", desc: \"Recommended: 16:9\" },\r\n          ].map((item, idx) => (\r\n            <div key={idx} style={box({ padding: \"14px 16px\" })}>\r\n              <div style={{ fontWeight: 700, color: \"#111827\", marginBottom: 6 }}>\r\n                {item.title}\r\n              </div>\r\n              <div style={{ fontSize: 13, color: \"#6b7280\", lineHeight: 1.4 }}>\r\n                {item.desc}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Details */}\r\n        <div style={{ display: \"grid\", gridTemplateColumns: \"1.1fr 1fr\", gap: 20, marginTop: 24 }}>\r\n          {/* Left form */}\r\n          <div style={box({ padding: 20 })}>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n              <div style={{ fontSize: 20, fontWeight: 800, color: \"#111827\" }}>\r\n                {isEdit ? \"Edit details\" : \"Details\"}\r\n              </div>\r\n              <button\r\n                onClick={() => setPreview((p) => !p)}\r\n                style={{\r\n                  border: \"1.5px solid #e5e7eb\",\r\n                  background: \"#fff\",\r\n                  color: \"#a855f7\",\r\n                  borderRadius: 999,\r\n                  padding: \"8px 14px\",\r\n                  fontWeight: 700,\r\n                  cursor: \"pointer\",\r\n                }}\r\n              >\r\n                Preview\r\n              </button>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 18 }}>\r\n              <label style={{ display: \"block\", fontWeight: 700, marginBottom: 6 }}>\r\n                Name *\r\n              </label>\r\n              <input\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                placeholder=\"e.g., Pushups – Beginner Form\"\r\n                style={{\r\n                  width: \"97%\",\r\n                  padding: \"10px 12px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  outline: \"none\",\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 14 }}>\r\n              <label style={{ display: \"block\", fontWeight: 700, marginBottom: 6 }}>\r\n                Kcalories *\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                value={kcal}\r\n                onChange={(e) => setKcal(e.target.value)}\r\n                placeholder=\"e.g., 60\"\r\n                style={{\r\n                  width: 240,\r\n                  padding: \"10px 12px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  outline: \"none\",\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 14 }}>\r\n              <label style={{ display: \"block\", fontWeight: 700, marginBottom: 6 }}>\r\n                Level\r\n              </label>\r\n              <select\r\n                value={level}\r\n                onChange={(e) => setLevel(e.target.value)}\r\n                style={{\r\n                  width: 180,\r\n                  padding: \"10px 12px\",\r\n                  borderRadius: 8,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  outline: \"none\",\r\n                  background: \"#fff\",\r\n                }}\r\n              >\r\n                <option value=\"1\">Level 1</option>\r\n                <option value=\"2\">Level 2</option>\r\n                <option value=\"3\">Level 3</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Action buttons */}\r\n            <div style={{ display: \"flex\", gap: 12, marginTop: 20 }}>\r\n              {isEdit ? (\r\n                <button\r\n                  onClick={handleUpdate}\r\n                  disabled={submitting}                       // NEW: กันกดซ้ำ\r\n                  style={{\r\n                    opacity: submitting ? 0.7 : 1,            // NEW: ฟีดแบ็กกำลังส่ง\r\n                    background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\r\n                    color: \"#fff\",\r\n                    fontWeight: 700,\r\n                    border: \"none\",\r\n                    borderRadius: 10,\r\n                    padding: \"10px 16px\",\r\n                    cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n                  }}\r\n                >\r\n                  {submitting ? \"Updating...\" : \"Update\"}\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  onClick={() => {\r\n                    if (window.confirm(\"ต้องรอ admin อนุมัติคลิปก่อนจึงจะเป็น Active\\nกดยืนยันเพื่อส่งคลิปเข้าสู่สถานะ Pending\")) {\r\n                      handleCreate();\r\n                    }\r\n                  }}\r\n                  disabled={submitting}\r\n                  style={{\r\n                    opacity: submitting ? 0.7 : 1,\r\n                    background: \"linear-gradient(90deg,#ff4d8b 0%, #a855f7 100%)\",\r\n                    color: \"#fff\",\r\n                    fontWeight: 700,\r\n                    border: \"none\",\r\n                    borderRadius: 10,\r\n                    padding: \"10px 16px\",\r\n                    cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n                    display: \"inline-flex\",\r\n                    alignItems: \"center\",\r\n                    gap: 8,\r\n                  }}\r\n                >\r\n                  <img\r\n                    src={process.env.PUBLIC_URL + \"/UploadSimple.png\"}\r\n                    alt=\"upload\"\r\n                    style={{\r\n                      width: 20,\r\n                      height: 20,\r\n                      marginRight: 6,\r\n                      verticalAlign: \"middle\",\r\n                    }}\r\n                  />\r\n                  {submitting ? \"Uploading...\" : \"Public\"}\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={handleSaveDraft}\r\n                disabled={submittingDraft}\r\n                style={{\r\n                  background: \"#e5e7eb\",\r\n                  color: \"#111827\",\r\n                  fontWeight: 700,\r\n                  border: \"none\",\r\n                  borderRadius: 10,\r\n                  padding: \"10px 16px\",\r\n                  cursor: submittingDraft ? \"not-allowed\" : \"pointer\",\r\n                  opacity: submittingDraft ? 0.7 : 1,\r\n                }}\r\n              >\r\n                {submittingDraft ? \"Saving...\" : \"Save draft\"}\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  if (window.confirm('Discard changes and go back to Trainer page?')) {\r\n                    navigate('/trainer');\r\n                  }\r\n                }}\r\n                disabled={submitting}\r\n                style={{\r\n                  background: \"#fff\",\r\n                  color: \"#6b7280\",\r\n                  fontWeight: 700,\r\n                  border: \"1px solid #e5e7eb\",\r\n                  borderRadius: 10,\r\n                  padding: \"10px 16px\",\r\n                  cursor: submitting ? \"not-allowed\" : \"pointer\",\r\n                }}\r\n              >\r\n                Discard\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right preview pane */}\r\n          <div\r\n            style={box({\r\n              padding: 16,\r\n              minHeight: 300,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            })}\r\n          >\r\n            {!fileURL ? (\r\n              <div\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: 320,\r\n                  borderRadius: 12,\r\n                  background: \"#e5e7eb\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  color: \"#6b7280\",\r\n                }}\r\n              >\r\n                \"No video selected\"\r\n              </div>\r\n            ) : (\r\n              <div style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n                <video\r\n                  ref={videoRef}\r\n                  src={fileURL}\r\n                  controls\r\n                  loop\r\n                  autoPlay\r\n                  muted\r\n                  onPlay={() => setIsVideoPlaying(true)}\r\n                  onPause={() => setIsVideoPlaying(false)}\r\n                  onEnded={() => setIsVideoPlaying(false)}\r\n                  onLoadedData={() => {\r\n                    // Auto-play and enable keypoints when video loads\r\n                    if (videoRef.current) {\r\n                      setVideoDuration(videoRef.current.duration);\r\n                      videoRef.current.play().catch(() => {\r\n                        // If autoplay fails, just continue without error\r\n                      });\r\n                    }\r\n                  }}\r\n                  onTimeUpdate={() => {\r\n                    if (videoRef.current) {\r\n                      setCurrentTime(videoRef.current.currentTime);\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    width: '100%',\r\n                    height: '100%',\r\n                    maxHeight: 320,\r\n                    objectFit: 'contain',\r\n                    borderRadius: 12,\r\n                    background: '#fff',\r\n                    display: 'block'\r\n                  }}\r\n                />\r\n                {showKeypoints && (\r\n                  <KeypointOverlay\r\n                    videoRef={videoRef}\r\n                    isPlaying={isVideoPlaying}\r\n                    onKeypointsDetected={(detectedKeypoints) => {\r\n                      setKeypoints(detectedKeypoints);\r\n                      // เก็บ keypoints พร้อม timestamp\r\n                      if (detectedKeypoints && videoRef.current) {\r\n                        const timestamp = videoRef.current.currentTime;\r\n                        setAllKeypoints(prev => [\r\n                          ...prev.filter(kp => Math.abs(kp.timestamp - timestamp) > 0.1), // หลีกเลี่ยง duplicate\r\n                          { timestamp, keypoints: detectedKeypoints }\r\n                        ]);\r\n                      }\r\n                    }}\r\n                  />\r\n                )}\r\n                \r\n                {/* Toggle button for keypoints */}\r\n                <button\r\n                  onClick={() => {\r\n                    setShowKeypoints(!showKeypoints);\r\n                    if (!showKeypoints) {\r\n                      setProcessingKeypoints(true);\r\n                      // หยุด processing หลัง 2 วินาที (เพื่อให้ดู realistic)\r\n                      setTimeout(() => setProcessingKeypoints(false), 2000);\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    top: 10,\r\n                    right: 10,\r\n                    background: showKeypoints ? '#10b981' : processingKeypoints ? '#f59e0b' : '#374151',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: 8,\r\n                    padding: '8px 12px',\r\n                    fontSize: '12px',\r\n                    cursor: 'pointer',\r\n                    zIndex: 20\r\n                  }}\r\n                >\r\n                  {processingKeypoints ? 'Processing...' : showKeypoints ? 'Hide Keypoints' : 'Show Keypoints'}\r\n                </button>\r\n                \r\n                {/* Keypoint count indicator */}\r\n                {showKeypoints && keypoints && (\r\n                  <div\r\n                    style={{\r\n                      position: 'absolute',\r\n                      top: 50,\r\n                      right: 10,\r\n                      background: 'rgba(0,0,0,0.7)',\r\n                      color: 'white',\r\n                      padding: '4px 8px',\r\n                      borderRadius: 4,\r\n                      fontSize: '11px',\r\n                      zIndex: 20\r\n                    }}\r\n                  >\r\n                    {keypoints.length} keypoints detected\r\n                  </div>\r\n                )}\r\n\r\n                {/* Current time display */}\r\n                <div\r\n                  style={{\r\n                    position: 'absolute',\r\n                    bottom: 50,\r\n                    left: 10,\r\n                    background: 'rgba(0,0,0,0.7)',\r\n                    color: 'white',\r\n                    padding: '4px 8px',\r\n                    borderRadius: 4,\r\n                    fontSize: '11px',\r\n                    zIndex: 20\r\n                  }}\r\n                >\r\n                  {formatTime(currentTime)} / {formatTime(videoDuration)}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* NEW: Time Picker Section */}\r\n        {fileURL && (\r\n          <div style={{ marginTop: 24 }}>\r\n            <div style={box({ padding: 20 })}>\r\n              <div style={{ fontSize: 18, fontWeight: 700, color: \"#111827\", marginBottom: 16 }}>\r\n                \r\n                Exercise Time Segments\r\n              </div>\r\n              \r\n              {/* Add new segment form */}\r\n              <div style={{ \r\n                background: \"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)\", \r\n                padding: 20, \r\n                borderRadius: 12, \r\n                marginBottom: 16,\r\n                border: \"2px solid #0ea5e9\"\r\n              }}>\r\n                <div style={{ marginBottom: 12 }}>\r\n                  <label style={{ display: \"block\", fontWeight: 600, marginBottom: 6, color: \"#0c4a6e\" }}>\r\n        \r\n                    Exercise Name\r\n                  </label>\r\n                  <input\r\n                    value={newSegment.name}\r\n                    onChange={(e) => setNewSegment(prev => ({ ...prev, name: e.target.value }))}\r\n                    placeholder=\"e.g., Push-ups, Squats, Plank, Burpees\"\r\n                    style={{\r\n                      width: \"350px\",\r\n                      padding: \"10px 14px\",\r\n                      borderRadius: 8,\r\n                      border: \"2px solid #0ea5e9\",\r\n                      outline: \"none\",\r\n                      fontSize: 14,\r\n                      fontWeight: 500\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ display: \"flex\", gap: 20, alignItems: \"end\", marginBottom: 16 }}>\r\n                  <div>\r\n                    <label style={{ display: \"block\", fontWeight: 600, marginBottom: 6, fontSize: 14, color: \"#0c4a6e\" }}>\r\n                     \r\n                      Start Time\r\n                    </label>\r\n                    <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        max={Math.floor(videoDuration)}\r\n                        value={Math.floor(newSegment.startTime)}\r\n                        onChange={(e) => setNewSegment(prev => ({ \r\n                          ...prev, \r\n                          startTime: parseInt(e.target.value) || 0 \r\n                        }))}\r\n                        style={{\r\n                          width: \"80px\",\r\n                          padding: \"8px 10px\",\r\n                          borderRadius: 6,\r\n                          border: \"2px solid #710ee9ff\",\r\n                          outline: \"none\",\r\n                          fontSize: 14,\r\n                          fontWeight: 500\r\n                        }}\r\n                      />\r\n                      <span style={{ fontSize: 14, color: \"#0c4a6e\", fontWeight: 500 }}>sec</span>\r\n                      <button\r\n                        onClick={startTimeSelection}\r\n                        style={{\r\n                          background: newSegment.isSelecting \r\n                            ? \"linear-gradient(90deg, #10b981 0%, #059669 100%)\" \r\n                            : \"linear-gradient(90deg, #df10a4ff 0%, #5914a3ff 100%)\",\r\n                          color: \"white\",\r\n                          border: \"none\",\r\n                          borderRadius: 6,\r\n                          padding: \"6px 12px\",\r\n                          fontSize: 12,\r\n                          cursor: \"pointer\",\r\n                          fontWeight: 600,\r\n                          boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\"\r\n                        }}\r\n                      >\r\n                        {newSegment.isSelecting ? (\r\n                          <>\r\n                            \r\n                            Selecting...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            \r\n                            Use Current\r\n                          </>\r\n                        )}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label style={{ display: \"block\", fontWeight: 600, marginBottom: 6, fontSize: 14, color: \"#0c4a6e\" }}>\r\n                     \r\n                      End Time\r\n                    </label>\r\n                    <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        max={Math.floor(videoDuration)}\r\n                        value={Math.floor(newSegment.endTime)}\r\n                        onChange={(e) => setNewSegment(prev => ({ \r\n                          ...prev, \r\n                          endTime: parseInt(e.target.value) || 0 \r\n                        }))}\r\n                        style={{\r\n                          width: \"80px\",\r\n                          padding: \"8px 10px\",\r\n                          borderRadius: 6,\r\n                          border: \"2px solid #830ee9ff\",\r\n                          outline: \"none\",\r\n                          fontSize: 14,\r\n                          fontWeight: 500\r\n                        }}\r\n                      />\r\n                      <span style={{ fontSize: 14, color: \"#0c4a6e\", fontWeight: 500 }}>sec</span>\r\n                      <button\r\n                        onClick={endTimeSelection}\r\n                        style={{\r\n                          background: \"linear-gradient(90deg, #3b82f6 0%, #4e10d4ff 100%)\",\r\n                          color: \"white\",\r\n                          border: \"none\",\r\n                          borderRadius: 6,\r\n                          padding: \"6px 12px\",\r\n                          fontSize: 12,\r\n                          cursor: \"pointer\",\r\n                          fontWeight: 600,\r\n                          boxShadow: \"0 2px 4px rgba(0,0,0,0.1)\"\r\n                        }}\r\n                      >\r\n                      \r\n                        Use Current\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ display: \"flex\", gap: 12, alignItems: \"center\" }}>\r\n                  <button\r\n                    onClick={addExerciseSegment}\r\n                    disabled={!newSegment.name.trim() || newSegment.startTime >= newSegment.endTime}\r\n                    style={{\r\n                      background: !newSegment.name.trim() || newSegment.startTime >= newSegment.endTime\r\n                        ? \"#43e351ff\" \r\n                        : \"linear-gradient(90deg,#10b981 0%, #059669 100%)\",\r\n                      color: \"white\",\r\n                      border: \"none\",\r\n                      borderRadius: 8,\r\n                      padding: \"10px 20px\",\r\n                      fontSize: 14,\r\n                      fontWeight: 700,\r\n                      cursor: !newSegment.name.trim() || newSegment.startTime >= newSegment.endTime \r\n                        ? \"not-allowed\" \r\n                        : \"pointer\",\r\n                      boxShadow: \"0 2px 6px rgba(0,0,0,0.1)\"\r\n                    }}\r\n                  >\r\n                    <img \r\n                      src={process.env.PUBLIC_URL + \"/plus.png\"} \r\n                      alt=\"add\" \r\n                      style={{ width: 16, height: 16, marginRight: 6, verticalAlign: \"middle\" }}\r\n                    />\r\n                    Add Segment\r\n                  </button>\r\n                  \r\n                  {newSegment.name && newSegment.startTime < newSegment.endTime && (\r\n                    <div style={{ \r\n                      fontSize: 13, \r\n                      color: \"#059669\", \r\n                      display: \"flex\", \r\n                      alignItems: \"center\",\r\n                      background: \"rgba(16, 185, 129, 0.1)\",\r\n                      padding: \"6px 12px\",\r\n                      borderRadius: 6,\r\n                      fontWeight: 500\r\n                    }}>\r\n                      \r\n                      Preview: <strong>{newSegment.name}</strong> ({formatTime(newSegment.startTime)} - {formatTime(newSegment.endTime)})\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Existing segments list */}\r\n              {exerciseSegments.length > 0 && (\r\n                <div>\r\n                  <div style={{ \r\n                    fontWeight: 700, \r\n                    marginBottom: 12, \r\n                    color: \"#374151\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    gap: 8\r\n                  }}>\r\n                    \r\n                    Defined Segments ({exerciseSegments.length})\r\n                  </div>\r\n                  <div style={{ display: \"grid\", gap: 8 }}>\r\n                    {exerciseSegments.map((segment, index) => (\r\n                      <div\r\n                        key={segment.id}\r\n                        style={{\r\n                          display: \"flex\",\r\n                          justifyContent: \"space-between\",\r\n                          alignItems: \"center\",\r\n                          background: \"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)\",\r\n                          border: \"2px solid #e5e7eb\",\r\n                          borderRadius: 10,\r\n                          padding: \"14px 18px\",\r\n                          boxShadow: \"0 2px 4px rgba(0,0,0,0.05)\"\r\n                        }}\r\n                      >\r\n                        <div>\r\n                          <div style={{ \r\n                            fontWeight: 700, \r\n                            color: \"#111827\",\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: 8,\r\n                            marginBottom: 4\r\n                          }}>\r\n                            <span style={{ \r\n                              background: \"linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%)\",\r\n                              color: \"white\",\r\n                              borderRadius: \"50%\",\r\n                              width: 24,\r\n                              height: 24,\r\n                              display: \"flex\",\r\n                              alignItems: \"center\",\r\n                              justifyContent: \"center\",\r\n                              fontSize: 12,\r\n                              fontWeight: 700\r\n                            }}>\r\n                              {index + 1}\r\n                            </span>\r\n                            {segment.name}\r\n                          </div>\r\n                          <div style={{ fontSize: 13, color: \"#6b7280\", marginLeft: 32 }}>\r\n                            <img \r\n                              src={process.env.PUBLIC_URL + \"/chronometer.png\"} \r\n                              alt=\"timer\" \r\n                              style={{ width: 14, height: 14, marginRight: 6, verticalAlign: \"middle\" }}\r\n                            />\r\n                            {formatTime(segment.startTime)} - {formatTime(segment.endTime)} \r\n                            <span style={{ \r\n                              marginLeft: 8,\r\n                              background: \"rgba(59, 130, 246, 0.1)\",\r\n                              color: \"#1d4ed8\",\r\n                              padding: \"2px 6px\",\r\n                              borderRadius: 4,\r\n                              fontSize: 11,\r\n                              fontWeight: 600\r\n                            }}>\r\n                              {Math.floor(segment.endTime - segment.startTime)}s duration\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                        <button\r\n                          onClick={() => removeSegment(segment.id)}\r\n                          style={{\r\n                            background: \"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)\",\r\n                            color: \"white\",\r\n                            border: \"none\",\r\n                            borderRadius: 6,\r\n                            padding: \"6px 12px\",\r\n                            fontSize: 12,\r\n                            cursor: \"pointer\",\r\n                            fontWeight: 600,\r\n                            boxShadow: \"0 2px 4px rgba(239, 68, 68, 0.3)\"\r\n                          }}\r\n                        >\r\n                          <img \r\n                            src={process.env.PUBLIC_URL + \"/bin (1).png\"} \r\n                            alt=\"remove\" \r\n                            style={{ width: 14, height: 14, marginRight: 6, verticalAlign: \"middle\" }}\r\n                          />\r\n                          Remove\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,OAAOC,aAAa,MAAM,6BAA6B;AACvD,OAAOC,eAAe,MAAM,+BAA+B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE5D,MAAMC,GAAG,GAAGA,CAACC,KAAK,GAAG,CAAC,CAAC,MAAM;EAC3BC,UAAU,EAAE,MAAM;EAClBC,YAAY,EAAE,EAAE;EAChBC,SAAS,EAAE,6BAA6B;EACxC,GAAGH;AACL,CAAC,CAAC;AAEF,eAAe,SAASI,WAAWA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,eAAA;EACpC;EACA,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;;EAE7D;EACA,MAAMmB,QAAQ,GAAGpB,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAM,CAACqB,aAAa,EAAEC,gBAAgB,CAAC,GAAGrB,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACsB,SAAS,EAAEC,YAAY,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACwB,cAAc,EAAEC,iBAAiB,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAAC0B,mBAAmB,EAAEC,sBAAsB,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACrE,MAAM,CAAC4B,YAAY,EAAEC,eAAe,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAEtD;EACA,MAAM,CAAC8B,aAAa,EAAEC,gBAAgB,CAAC,GAAG/B,QAAQ,CAAC,CAAC,CAAC;EACrD,MAAM,CAACgC,WAAW,EAAEC,cAAc,CAAC,GAAGjC,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACkC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGnC,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACoC,UAAU,EAAEC,aAAa,CAAC,GAAGrC,QAAQ,CAAC;IAC3CsC,IAAI,EAAE,EAAE;IACRC,SAAS,EAAE,CAAC;IACZC,OAAO,EAAE,CAAC;IACVC,WAAW,EAAE;EACf,CAAC,CAAC;;EAEF;EACA,MAAMC,UAAU,GAAIC,OAAO,IAAK;IAC9B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,GAAG,EAAE,CAAC;IACrC,MAAMI,IAAI,GAAGF,IAAI,CAACC,KAAK,CAACH,OAAO,GAAG,EAAE,CAAC;IACrC,OAAO,GAAGC,IAAI,CAACI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAIF,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EAClF,CAAC;;EAED;EACA,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAI,CAACd,UAAU,CAACE,IAAI,CAACa,IAAI,CAAC,CAAC,EAAE;MAC3BC,KAAK,CAAC,4BAA4B,CAAC;MACnC;IACF;IACA,IAAIhB,UAAU,CAACG,SAAS,IAAIH,UAAU,CAACI,OAAO,EAAE;MAC9CY,KAAK,CAAC,6BAA6B,CAAC;MACpC;IACF;IAEA,MAAMC,OAAO,GAAG;MACdC,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;MACdlB,IAAI,EAAEF,UAAU,CAACE,IAAI;MACrBC,SAAS,EAAEH,UAAU,CAACG,SAAS;MAC/BC,OAAO,EAAEJ,UAAU,CAACI,OAAO;MAC3BlB,SAAS,EAAE;IACb,CAAC;IAEDa,mBAAmB,CAACsB,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEJ,OAAO,CAAC,CAAC;IAC/ChB,aAAa,CAAC;MAAEC,IAAI,EAAE,EAAE;MAAEC,SAAS,EAAE,CAAC;MAAEC,OAAO,EAAE,CAAC;MAAEC,WAAW,EAAE;IAAM,CAAC,CAAC;EAC3E,CAAC;;EAED;EACA,MAAMiB,aAAa,GAAIC,SAAS,IAAK;IACnCxB,mBAAmB,CAACsB,IAAI,IAAIA,IAAI,CAACG,MAAM,CAACC,GAAG,IAAIA,GAAG,CAACP,EAAE,KAAKK,SAAS,CAAC,CAAC;EACvE,CAAC;;EAED;EACA,MAAMG,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAI3C,QAAQ,CAAC4C,OAAO,EAAE;MACpB1B,aAAa,CAACoB,IAAI,KAAK;QACrB,GAAGA,IAAI;QACPlB,SAAS,EAAEpB,QAAQ,CAAC4C,OAAO,CAAC/B,WAAW;QACvCS,WAAW,EAAE;MACf,CAAC,CAAC,CAAC;IACL;EACF,CAAC;;EAED;EACA,MAAMuB,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,IAAI7C,QAAQ,CAAC4C,OAAO,EAAE;MACpB1B,aAAa,CAACoB,IAAI,KAAK;QACrB,GAAGA,IAAI;QACPjB,OAAO,EAAErB,QAAQ,CAAC4C,OAAO,CAAC/B,WAAW;QACrCS,WAAW,EAAE;MACf,CAAC,CAAC,CAAC;IACL;EACF,CAAC;;EAED;EACA,MAAMwB,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI,CAACC,IAAI,IAAI,CAAC5B,IAAI,EAAE;MAClBc,KAAK,CAAC,iCAAiC,CAAC;MACxC;IACF;IACA,MAAMe,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACVf,KAAK,CAAC,kEAAkE,CAAC;MACzE;IACF;IACA,IAAInC,eAAe,EAAE;IACrBC,kBAAkB,CAAC,IAAI,CAAC;IAExB,MAAMoD,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEN,IAAI,CAAC;IAC7BI,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAElC,IAAI,CAAC;IAC9BgC,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEC,KAAK,CAAC;IACpC;IACAH,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAE,QAAQE,IAAI,aAAa,CAAC;IACzDJ,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE,OAAO,CAAC;IAEpC,IAAI;MACF,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAE;QACtDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUZ,KAAK;QAAG,CAAC;QAC7Ca,IAAI,EAAEV;MACR,CAAC,CAAC;MACF,IAAI,CAACK,GAAG,CAACM,EAAE,EAAE;QACX,IAAIC,MAAM,GAAG,EAAE;QACf,IAAI;UACF,MAAMC,IAAI,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,CAAC;UAC7BF,MAAM,GAAGC,IAAI,CAACD,MAAM,IAAI,EAAE;QAC5B,CAAC,CAAC,MAAM,CAAC;QACT9B,KAAK,CAAC,2BAA2BuB,GAAG,CAACU,MAAM,KAAKH,MAAM,EAAE,CAAC;QACzD;MACF;MACA9B,KAAK,CAAC,uBAAuB,CAAC;MAC9BkC,QAAQ,CAAC,UAAU,CAAC;IACtB,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVnC,KAAK,CAAC,mCAAmC,IAAI,CAAAmC,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEC,OAAO,KAAID,CAAC,CAAC,CAAC;IAChE,CAAC,SAAS;MACRrE,kBAAkB,CAAC,KAAK,CAAC;IAC3B;EACF,CAAC;EACD,MAAMoE,QAAQ,GAAGrF,WAAW,CAAC,CAAC;EAC9B,MAAMwF,QAAQ,GAAGvF,WAAW,CAAC,CAAC;EAC9B,MAAMwF,OAAO,GAAG3F,MAAM,CAAC,IAAI,CAAC;;EAE5B;EACA,MAAM4F,MAAM,GAAG,EAAA3E,eAAA,GAAAyE,QAAQ,CAACG,KAAK,cAAA5E,eAAA,uBAAdA,eAAA,CAAgB6E,OAAO,KAAI,IAAIC,eAAe,CAACL,QAAQ,CAACM,MAAM,CAAC,CAACC,GAAG,CAAC,IAAI,CAAC;EACxF,MAAMC,MAAM,GAAG,CAAC,CAACN,MAAM;;EAEvB;EACA,MAAM,CAACzB,IAAI,EAAEgC,OAAO,CAAC,GAAGlG,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACmG,OAAO,EAAEC,UAAU,CAAC,GAAGpG,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC5C,MAAM,CAACsC,IAAI,EAAE+D,OAAO,CAAC,GAAGrG,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAAC0E,IAAI,EAAE4B,OAAO,CAAC,GAAGtG,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACyE,KAAK,EAAE8B,QAAQ,CAAC,GAAGvG,QAAQ,CAAC,GAAG,CAAC;EACvC,MAAM,CAACwG,OAAO,EAAEC,UAAU,CAAC,GAAGzG,QAAQ,CAAC,KAAK,CAAC;;EAE7C;EACA,MAAM,CAAC0G,UAAU,EAAEC,aAAa,CAAC,GAAG3G,QAAQ,CAAC,KAAK,CAAC;EAEnD,MAAM4G,MAAM,GAAGA,CAAA;IAAA,IAAAC,gBAAA;IAAA,QAAAA,gBAAA,GAAMnB,OAAO,CAAC3B,OAAO,cAAA8C,gBAAA,uBAAfA,gBAAA,CAAiBC,KAAK,CAAC,CAAC;EAAA;EAC7C,MAAMC,YAAY,GAAIxB,CAAC,IAAK;IAAA,IAAAyB,eAAA;IAC1B,MAAMC,CAAC,IAAAD,eAAA,GAAGzB,CAAC,CAAC2B,MAAM,CAACC,KAAK,cAAAH,eAAA,uBAAdA,eAAA,CAAiB,CAAC,CAAC;IAC7B,IAAI,CAACC,CAAC,EAAE;IACRf,OAAO,CAACe,CAAC,CAAC;IACVb,UAAU,CAACgB,GAAG,CAACC,eAAe,CAACJ,CAAC,CAAC,CAAC;IAClCR,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;IAClB;IACApF,gBAAgB,CAAC,IAAI,CAAC;IACtBM,sBAAsB,CAAC,IAAI,CAAC;IAC5B2F,UAAU,CAAC,MAAM3F,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;EACvD,CAAC;EACD,MAAM4F,MAAM,GAAIhC,CAAC,IAAK;IAAA,IAAAiC,qBAAA;IACpBjC,CAAC,CAACkC,cAAc,CAAC,CAAC;IAClB,MAAMR,CAAC,IAAAO,qBAAA,GAAGjC,CAAC,CAACmC,YAAY,CAACP,KAAK,cAAAK,qBAAA,uBAApBA,qBAAA,CAAuB,CAAC,CAAC;IACnC,IAAI,CAACP,CAAC,EAAE;IACRf,OAAO,CAACe,CAAC,CAAC;IACVb,UAAU,CAACgB,GAAG,CAACC,eAAe,CAACJ,CAAC,CAAC,CAAC;IAClCR,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;IAClB;IACApF,gBAAgB,CAAC,IAAI,CAAC;IACtBM,sBAAsB,CAAC,IAAI,CAAC;IAC5B2F,UAAU,CAAC,MAAM3F,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;EACvD,CAAC;EACD,MAAMgG,UAAU,GAAIpC,CAAC,IAAKA,CAAC,CAACkC,cAAc,CAAC,CAAC;;EAE5C;EACA3H,SAAS,CAAC,MAAM;IAAA,IAAA8H,gBAAA;IACd,IAAI,CAAC3B,MAAM,EAAE;;IAEb;IACA,KAAA2B,gBAAA,GAAInC,QAAQ,CAACG,KAAK,cAAAgC,gBAAA,eAAdA,gBAAA,CAAgBC,KAAK,EAAE;MAAA,IAAAC,OAAA,EAAAC,qBAAA,EAAAC,oBAAA;MACzB,MAAMC,CAAC,GAAGxC,QAAQ,CAACG,KAAK,CAACiC,KAAK;MAC9BxB,OAAO,CAAC4B,CAAC,CAACC,KAAK,IAAI,EAAE,CAAC;MACtB3B,QAAQ,CAAC4B,MAAM,CAACF,CAAC,CAACG,UAAU,IAAIH,CAAC,CAACxD,KAAK,IAAI,GAAG,CAAC,CAAC;MAChD6B,OAAO,EAAAwB,OAAA,GACLG,CAAC,CAACvD,IAAI,cAAAoD,OAAA,cAAAA,OAAA,GACH,OAAOG,CAAC,CAACI,WAAW,KAAK,QAAQ,IAAAN,qBAAA,IAAAC,oBAAA,GAC7BC,CAAC,CAACI,WAAW,CAACC,KAAK,CAAC,YAAY,CAAC,cAAAN,oBAAA,uBAAjCA,oBAAA,CAAoC,CAAC,CAAC,cAAAD,qBAAA,cAAAA,qBAAA,GAAI,EAAE,GAC7C,EACR,CAAC;MACD,MAAMQ,GAAG,GACPN,CAAC,CAACO,KAAK,KACNP,CAAC,CAACQ,MAAM,GACL,eAAe,CAACC,IAAI,CAACT,CAAC,CAACQ,MAAM,CAAC,GAC5BR,CAAC,CAACQ,MAAM,GACR,gCAAgCR,CAAC,CAACQ,MAAM,CAACE,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,EAAE,GACrE,EAAE,CAAC;MACTvC,UAAU,CAACmC,GAAG,CAAC;MACf;MACA,IAAIA,GAAG,EAAE;QACPlH,gBAAgB,CAAC,IAAI,CAAC;QACtBM,sBAAsB,CAAC,IAAI,CAAC;QAC5B2F,UAAU,CAAC,MAAM3F,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;MACvD;MACA;IACF;;IAEA;IACA,CAAC,YAAY;MACX,IAAI;QAAA,IAAAiH,QAAA,EAAAC,sBAAA,EAAAC,qBAAA;QACF,MAAM3E,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACF,KAAK,EAAE,OAAO,CAAC;QACpB,MAAMQ,GAAG,GAAG,MAAMC,KAAK,CAAC,gCAAgCe,MAAM,EAAE,EAAE;UAChEb,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUZ,KAAK;UAAG;QAC9C,CAAC,CAAC;QACF,IAAI,CAACQ,GAAG,CAACM,EAAE,EAAE;QACb,MAAMgD,CAAC,GAAG,MAAMtD,GAAG,CAACS,IAAI,CAAC,CAAC;QAC1BiB,OAAO,CAAC4B,CAAC,CAACC,KAAK,IAAI,EAAE,CAAC;QACtB3B,QAAQ,CAAC4B,MAAM,CAACF,CAAC,CAACG,UAAU,IAAIH,CAAC,CAACxD,KAAK,IAAI,GAAG,CAAC,CAAC;QAChD6B,OAAO,EAAAsC,QAAA,GACLX,CAAC,CAACvD,IAAI,cAAAkE,QAAA,cAAAA,QAAA,GACH,OAAOX,CAAC,CAACI,WAAW,KAAK,QAAQ,IAAAQ,sBAAA,IAAAC,qBAAA,GAC7Bb,CAAC,CAACI,WAAW,CAACC,KAAK,CAAC,YAAY,CAAC,cAAAQ,qBAAA,uBAAjCA,qBAAA,CAAoC,CAAC,CAAC,cAAAD,sBAAA,cAAAA,sBAAA,GAAI,EAAE,GAC7C,EACR,CAAC;QACD,MAAMN,GAAG,GACPN,CAAC,CAACQ,MAAM,KACP,CAAC,eAAe,CAACC,IAAI,CAACT,CAAC,CAACQ,MAAM,CAAC,GAC5B,gCAAgCR,CAAC,CAACQ,MAAM,CAACE,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,EAAE,GACnEV,CAAC,CAACQ,MAAM,CAAC;QACfrC,UAAU,CAACmC,GAAG,IAAI,EAAE,CAAC;QACrB;QACA,IAAIA,GAAG,EAAE;UACPlH,gBAAgB,CAAC,IAAI,CAAC;UACtBM,sBAAsB,CAAC,IAAI,CAAC;UAC5B2F,UAAU,CAAC,MAAM3F,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;QACvD;MACF,CAAC,CAAC,MAAM,CAAC;IACX,CAAC,EAAE,CAAC;EACN,CAAC,EAAE,CAACsE,MAAM,EAAEN,MAAM,EAAEF,QAAQ,CAACG,KAAK,CAAC,CAAC;;EAEpC;EACA,MAAMmD,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAAC7E,IAAI,IAAI,CAAC5B,IAAI,EAAE;MAClBc,KAAK,CAAC,iCAAiC,CAAC;MACxC;IACF;IACA,MAAMe,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACVf,KAAK,CAAC,kEAAkE,CAAC;MACzE;IACF;IACA,IAAIsD,UAAU,EAAE;IAChBC,aAAa,CAAC,IAAI,CAAC;IAEnB,MAAMrC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEN,IAAI,CAAC;IAC7BI,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAElC,IAAI,CAAC;IAC9BgC,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEC,KAAK,CAAC;IACpCH,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAE,QAAQE,IAAI,iBAAiB,CAAC;IAC7DJ,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE,OAAO,CAAC;IAEpC,IAAI;MACF,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAE;QACtDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUZ,KAAK;QAAG,CAAC;QAC7Ca,IAAI,EAAEV;MACR,CAAC,CAAC;MACF,IAAI,CAACK,GAAG,CAACM,EAAE,EAAE;QACX,IAAIC,MAAM,GAAG,EAAE;QACf,IAAI;UACF,MAAMC,IAAI,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,CAAC;UAC7BF,MAAM,GAAGC,IAAI,CAACD,MAAM,IAAI,EAAE;QAC5B,CAAC,CAAC,MAAM,CAAC;QACT,IAAIP,GAAG,CAACU,MAAM,KAAK,GAAG,EAAE;UACtBjC,KAAK,CAAC,wCAAwC8B,MAAM,IAAI,iCAAiC,EAAE,CAAC;QAC9F,CAAC,MAAM,IAAIP,GAAG,CAACU,MAAM,KAAK,GAAG,EAAE;UAC7BjC,KAAK,CAAC,iDAAiD,CAAC;QAC1D,CAAC,MAAM;UACLA,KAAK,CAAC,qBAAqBuB,GAAG,CAACU,MAAM,KAAKH,MAAM,EAAE,CAAC;QACrD;QACA;MACF;MACA9B,KAAK,CAAC,wDAAwD,CAAC;MAC/DkC,QAAQ,CAAC,UAAU,CAAC;IACtB,CAAC,CAAC,OAAOC,CAAC,EAAE;MACVnC,KAAK,CAAC,8BAA8B,IAAI,CAAAmC,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEC,OAAO,KAAID,CAAC,CAAC,CAAC;IAC3D,CAAC,SAAS;MACRoB,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC;;EAED;EACA,MAAMqC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAAC1G,IAAI,EAAE;MACTc,KAAK,CAAC,qBAAqB,CAAC;MAC5B;IACF;IACA,MAAMe,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE;MACVf,KAAK,CAAC,kEAAkE,CAAC;MACzE;IACF;IACA,IAAIsD,UAAU,EAAE;IAChBC,aAAa,CAAC,IAAI,CAAC;;IAEnB;IACA,MAAMsC,OAAO,GAAG,MAAMrE,KAAK,CAAC,gCAAgCe,MAAM,EAAE,EAAE;MACpEd,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClCC,aAAa,EAAE,UAAUZ,KAAK,EAAE,CAAE;MACpC,CAAC;MACDa,IAAI,EAAEkE,IAAI,CAACC,SAAS,CAAC;QACnBjB,KAAK,EAAE5F,IAAI;QACX8F,UAAU,EAAE3D,KAAK;QAAE;QACnB4D,WAAW,EAAE,QAAQ3D,IAAI;MAC3B,CAAC;IACH,CAAC,CAAC;IACF,IAAI,CAACuE,OAAO,CAAChE,EAAE,EAAE;MACf,IAAIC,MAAM,GAAG,EAAE;MACf,IAAI;QACF,MAAMC,IAAI,GAAG,MAAM8D,OAAO,CAAC7D,IAAI,CAAC,CAAC;QACjCF,MAAM,GAAGC,IAAI,CAACD,MAAM,IAAI,EAAE;MAC5B,CAAC,CAAC,MAAM,CAAC;MACT9B,KAAK,CAAC,oBAAoB6F,OAAO,CAAC5D,MAAM,KAAKH,MAAM,EAAE,CAAC;MACtDyB,aAAa,CAAC,KAAK,CAAC;MACpB;IACF;;IAEA;IACA,IAAIzC,IAAI,EAAE;MACR,MAAMkF,EAAE,GAAG,IAAI7E,QAAQ,CAAC,CAAC;MACzB6E,EAAE,CAAC5E,MAAM,CAAC,MAAM,EAAEN,IAAI,CAAC;MACvB,MAAMmF,OAAO,GAAG,MAAMzE,KAAK,CAAC,gCAAgCe,MAAM,OAAO,EAAE;QACzEd,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUZ,KAAK;QAAG,CAAC;QAAE;QAC/Ca,IAAI,EAAEoE;MACR,CAAC,CAAC;MACF,IAAI,CAACC,OAAO,CAACpE,EAAE,EAAE;QACf,IAAIC,MAAM,GAAG,EAAE;QACf,IAAI;UACF,MAAMC,IAAI,GAAG,MAAMkE,OAAO,CAACjE,IAAI,CAAC,CAAC;UACjCF,MAAM,GAAGC,IAAI,CAACD,MAAM,IAAI,EAAE;QAC5B,CAAC,CAAC,MAAM,CAAC;QACT9B,KAAK,CAAC,wBAAwBiG,OAAO,CAAChE,MAAM,KAAKH,MAAM,EAAE,CAAC;QAC1DyB,aAAa,CAAC,KAAK,CAAC;QACpB;MACF;IACF;IAEAvD,KAAK,CAAC,iBAAiB,CAAC;IACxBuD,aAAa,CAAC,KAAK,CAAC;IACpBrB,QAAQ,CAAC,UAAU,CAAC;EACtB,CAAC;;EAED;EACA,MAAMgE,KAAK,GAAG,IAAI/F,IAAI,CAAC,CAAC,CAACgG,kBAAkB,CAAC,OAAO,EAAE;IACnDC,GAAG,EAAE,SAAS;IACdC,KAAK,EAAE,MAAM;IACbC,IAAI,EAAE;EACR,CAAC,CAAC;EACF,IAAIC,IAAI,GAAG;IAAErH,IAAI,EAAE;EAAU,CAAC;EAC9B,IAAI;IACF,MAAMsH,QAAQ,GAAGxF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC7C,IAAIuF,QAAQ,EAAE;MACZ,MAAMC,OAAO,GAAGX,IAAI,CAACY,KAAK,CAACF,QAAQ,CAAC;MACpCD,IAAI,GAAG;QACLrH,IAAI,EAAEuH,OAAO,CAACvH,IAAI,IAAI,SAAS;QAC/ByH,OAAO,EAAEF,OAAO,CAACE,OAAO,IAAI;MAC9B,CAAC;IACH;EACF,CAAC,CAAC,MAAM,CAAC;EAET,oBACEzJ,OAAA;IACE0J,KAAK,EAAE;MACLC,SAAS,EAAE,OAAO;MAClBtJ,UAAU,EAAE,kDAAkD;MAC9DuJ,UAAU,EAAE;IACd,CAAE;IAAAC,QAAA,gBAEF7J,OAAA,CAACH,aAAa;MAACwJ,IAAI,EAAEA,IAAK;MAACS,IAAI,EAAEd;IAAM;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAG1ClK,OAAA;MACE0J,KAAK,EAAE;QACLS,QAAQ,EAAE,IAAI;QACdC,MAAM,EAAE,QAAQ;QAChBC,SAAS,EAAE,MAAM;QACjBC,YAAY,EAAE,KAAK;QACnBC,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE;MACd,CAAE;MAAAX,QAAA,eAEF7J,OAAA;QACEyK,OAAO,EAAEA,CAAA,KAAMzF,QAAQ,CAAC,UAAU,CAAE;QACpC0E,KAAK,EAAE;UACLa,OAAO,EAAE,MAAM;UACfC,UAAU,EAAE,QAAQ;UACpBE,GAAG,EAAE,CAAC;UACNrK,UAAU,EAAE,iDAAiD;UAC7DsK,KAAK,EAAE,MAAM;UACbC,UAAU,EAAE,GAAG;UACfC,MAAM,EAAE,MAAM;UACdvK,YAAY,EAAE,GAAG;UACjBwK,OAAO,EAAE,mBAAmB;UAC5BC,QAAQ,EAAE,SAAS;UACnBxK,SAAS,EAAE,qBAAqB;UAChCyK,MAAM,EAAE;QACV,CAAE;QAAAnB,QAAA,gBAEF7J,OAAA;UACEiL,KAAK,EAAC,IAAI;UACVC,MAAM,EAAC,IAAI;UACXC,IAAI,EAAC,MAAM;UACXC,KAAK,EAAC,4BAA4B;UAClC1B,KAAK,EAAE;YAAE2B,WAAW,EAAE;UAAE,CAAE;UAAAxB,QAAA,eAE1B7J,OAAA;YACEsL,CAAC,EAAC,mBAAmB;YACrBC,MAAM,EAAC,MAAM;YACbC,WAAW,EAAC,GAAG;YACfC,aAAa,EAAC,OAAO;YACrBC,cAAc,EAAC;UAAO;YAAA3B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,4EAER;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAGNlK,OAAA;MAAK0J,KAAK,EAAE;QAAES,QAAQ,EAAE,IAAI;QAAEC,MAAM,EAAE,QAAQ;QAAEU,OAAO,EAAE;MAAqB,CAAE;MAAAjB,QAAA,gBAE9E7J,OAAA;QAAK0J,KAAK,EAAEvJ,GAAG,CAAC;UAAE2K,OAAO,EAAE,EAAE;UAAET,SAAS,EAAE;QAAE,CAAC,CAAE;QAAAR,QAAA,eAC7C7J,OAAA;UACEiH,MAAM,EAAEA,MAAO;UACfI,UAAU,EAAEA,UAAW;UACvBqC,KAAK,EAAE;YACLmB,MAAM,EAAE,oBAAoB;YAC5BvK,YAAY,EAAE,EAAE;YAChBwK,OAAO,EAAE,WAAW;YACpBa,SAAS,EAAE,QAAQ;YACnBhB,KAAK,EAAE,SAAS;YAChBtK,UAAU,EAAE;UACd,CAAE;UAAAwJ,QAAA,gBAEF7J,OAAA;YACE0J,KAAK,EAAE;cACLqB,QAAQ,EAAE,EAAE;cACZH,UAAU,EAAE,GAAG;cACfD,KAAK,EAAE,SAAS;cAChBL,YAAY,EAAE;YAChB,CAAE;YAAAT,QAAA,EAEDlE,MAAM,GAAG,0BAA0B,GAAG;UAAwB;YAAAoE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5D,CAAC,eACNlK,OAAA;YAAK0J,KAAK,EAAE;cAAEY,YAAY,EAAE;YAAG,CAAE;YAAAT,QAAA,EAAC;UAAwB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAChElK,OAAA;YACEyK,OAAO,EAAEnE,MAAO;YAChBoD,KAAK,EAAE;cACLrJ,UAAU,EAAE,iDAAiD;cAC7DsK,KAAK,EAAE,MAAM;cACbC,UAAU,EAAE,GAAG;cACfC,MAAM,EAAE,MAAM;cACdvK,YAAY,EAAE,EAAE;cAChBwK,OAAO,EAAE,WAAW;cACpBE,MAAM,EAAE;YACV,CAAE;YAAAnB,QAAA,EACH;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACTlK,OAAA;YACE4L,GAAG,EAAExG,OAAQ;YACbyG,IAAI,EAAC,MAAM;YACXC,MAAM,EAAC,SAAS;YAChBC,QAAQ,EAAEtF,YAAa;YACvBiD,KAAK,EAAE;cAAEa,OAAO,EAAE;YAAO;UAAE;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC,EACDtG,IAAI,iBACH5D,OAAA;YAAK0J,KAAK,EAAE;cAAEW,SAAS,EAAE,EAAE;cAAEM,KAAK,EAAE;YAAU,CAAE;YAAAd,QAAA,GAAC,YACrC,eAAA7J,OAAA;cAAA6J,QAAA,EAAIjG,IAAI,CAAC5B;YAAI;cAAA+H,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,MAAE,EAAC3H,IAAI,CAACyJ,KAAK,CAACpI,IAAI,CAACqI,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,EAAC,MACrE;UAAA;YAAAlC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNlK,OAAA;QACE0J,KAAK,EAAE;UACLa,OAAO,EAAE,MAAM;UACf2B,mBAAmB,EAAE,eAAe;UACpCxB,GAAG,EAAE,EAAE;UACPL,SAAS,EAAE;QACb,CAAE;QAAAR,QAAA,EAED,CACC;UAAEjC,KAAK,EAAE,mBAAmB;UAAEuE,IAAI,EAAE;QAAkD,CAAC,EACvF;UAAEvE,KAAK,EAAE,cAAc;UAAEuE,IAAI,EAAE;QAAuC,CAAC,EACvE;UAAEvE,KAAK,EAAE,mBAAmB;UAAEuE,IAAI,EAAE;QAAyB,CAAC,EAC9D;UAAEvE,KAAK,EAAE,eAAe;UAAEuE,IAAI,EAAE;QAAoB,CAAC,CACtD,CAACC,GAAG,CAAC,CAACC,IAAI,EAAEC,GAAG,kBACdtM,OAAA;UAAe0J,KAAK,EAAEvJ,GAAG,CAAC;YAAE2K,OAAO,EAAE;UAAY,CAAC,CAAE;UAAAjB,QAAA,gBAClD7J,OAAA;YAAK0J,KAAK,EAAE;cAAEkB,UAAU,EAAE,GAAG;cAAED,KAAK,EAAE,SAAS;cAAEL,YAAY,EAAE;YAAE,CAAE;YAAAT,QAAA,EAChEwC,IAAI,CAACzE;UAAK;YAAAmC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC,eACNlK,OAAA;YAAK0J,KAAK,EAAE;cAAEqB,QAAQ,EAAE,EAAE;cAAEJ,KAAK,EAAE,SAAS;cAAE4B,UAAU,EAAE;YAAI,CAAE;YAAA1C,QAAA,EAC7DwC,IAAI,CAACF;UAAI;YAAApC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP,CAAC;QAAA,GANEoC,GAAG;UAAAvC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAOR,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,eAGNlK,OAAA;QAAK0J,KAAK,EAAE;UAAEa,OAAO,EAAE,MAAM;UAAE2B,mBAAmB,EAAE,WAAW;UAAExB,GAAG,EAAE,EAAE;UAAEL,SAAS,EAAE;QAAG,CAAE;QAAAR,QAAA,gBAExF7J,OAAA;UAAK0J,KAAK,EAAEvJ,GAAG,CAAC;YAAE2K,OAAO,EAAE;UAAG,CAAC,CAAE;UAAAjB,QAAA,gBAC/B7J,OAAA;YAAK0J,KAAK,EAAE;cAAEa,OAAO,EAAE,MAAM;cAAEiC,cAAc,EAAE,eAAe;cAAEhC,UAAU,EAAE;YAAS,CAAE;YAAAX,QAAA,gBACrF7J,OAAA;cAAK0J,KAAK,EAAE;gBAAEqB,QAAQ,EAAE,EAAE;gBAAEH,UAAU,EAAE,GAAG;gBAAED,KAAK,EAAE;cAAU,CAAE;cAAAd,QAAA,EAC7DlE,MAAM,GAAG,cAAc,GAAG;YAAS;cAAAoE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjC,CAAC,eACNlK,OAAA;cACEyK,OAAO,EAAEA,CAAA,KAAMtE,UAAU,CAAEsG,CAAC,IAAK,CAACA,CAAC,CAAE;cACrC/C,KAAK,EAAE;gBACLmB,MAAM,EAAE,qBAAqB;gBAC7BxK,UAAU,EAAE,MAAM;gBAClBsK,KAAK,EAAE,SAAS;gBAChBrK,YAAY,EAAE,GAAG;gBACjBwK,OAAO,EAAE,UAAU;gBACnBF,UAAU,EAAE,GAAG;gBACfI,MAAM,EAAE;cACV,CAAE;cAAAnB,QAAA,EACH;YAED;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAENlK,OAAA;YAAK0J,KAAK,EAAE;cAAEW,SAAS,EAAE;YAAG,CAAE;YAAAR,QAAA,gBAC5B7J,OAAA;cAAO0J,KAAK,EAAE;gBAAEa,OAAO,EAAE,OAAO;gBAAEK,UAAU,EAAE,GAAG;gBAAEN,YAAY,EAAE;cAAE,CAAE;cAAAT,QAAA,EAAC;YAEtE;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACRlK,OAAA;cACE0M,KAAK,EAAE1K,IAAK;cACZ+J,QAAQ,EAAG9G,CAAC,IAAKc,OAAO,CAACd,CAAC,CAAC2B,MAAM,CAAC8F,KAAK,CAAE;cACzCC,WAAW,EAAC,oCAA+B;cAC3CjD,KAAK,EAAE;gBACLuB,KAAK,EAAE,KAAK;gBACZH,OAAO,EAAE,WAAW;gBACpBxK,YAAY,EAAE,CAAC;gBACfuK,MAAM,EAAE,mBAAmB;gBAC3B+B,OAAO,EAAE;cACX;YAAE;cAAA7C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eAENlK,OAAA;YAAK0J,KAAK,EAAE;cAAEW,SAAS,EAAE;YAAG,CAAE;YAAAR,QAAA,gBAC5B7J,OAAA;cAAO0J,KAAK,EAAE;gBAAEa,OAAO,EAAE,OAAO;gBAAEK,UAAU,EAAE,GAAG;gBAAEN,YAAY,EAAE;cAAE,CAAE;cAAAT,QAAA,EAAC;YAEtE;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACRlK,OAAA;cACE6L,IAAI,EAAC,QAAQ;cACbgB,GAAG,EAAC,GAAG;cACPH,KAAK,EAAEtI,IAAK;cACZ2H,QAAQ,EAAG9G,CAAC,IAAKe,OAAO,CAACf,CAAC,CAAC2B,MAAM,CAAC8F,KAAK,CAAE;cACzCC,WAAW,EAAC,UAAU;cACtBjD,KAAK,EAAE;gBACLuB,KAAK,EAAE,GAAG;gBACVH,OAAO,EAAE,WAAW;gBACpBxK,YAAY,EAAE,CAAC;gBACfuK,MAAM,EAAE,mBAAmB;gBAC3B+B,OAAO,EAAE;cACX;YAAE;cAAA7C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eAENlK,OAAA;YAAK0J,KAAK,EAAE;cAAEW,SAAS,EAAE;YAAG,CAAE;YAAAR,QAAA,gBAC5B7J,OAAA;cAAO0J,KAAK,EAAE;gBAAEa,OAAO,EAAE,OAAO;gBAAEK,UAAU,EAAE,GAAG;gBAAEN,YAAY,EAAE;cAAE,CAAE;cAAAT,QAAA,EAAC;YAEtE;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACRlK,OAAA;cACE0M,KAAK,EAAEvI,KAAM;cACb4H,QAAQ,EAAG9G,CAAC,IAAKgB,QAAQ,CAAChB,CAAC,CAAC2B,MAAM,CAAC8F,KAAK,CAAE;cAC1ChD,KAAK,EAAE;gBACLuB,KAAK,EAAE,GAAG;gBACVH,OAAO,EAAE,WAAW;gBACpBxK,YAAY,EAAE,CAAC;gBACfuK,MAAM,EAAE,mBAAmB;gBAC3B+B,OAAO,EAAE,MAAM;gBACfvM,UAAU,EAAE;cACd,CAAE;cAAAwJ,QAAA,gBAEF7J,OAAA;gBAAQ0M,KAAK,EAAC,GAAG;gBAAA7C,QAAA,EAAC;cAAO;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAClClK,OAAA;gBAAQ0M,KAAK,EAAC,GAAG;gBAAA7C,QAAA,EAAC;cAAO;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAClClK,OAAA;gBAAQ0M,KAAK,EAAC,GAAG;gBAAA7C,QAAA,EAAC;cAAO;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eAGNlK,OAAA;YAAK0J,KAAK,EAAE;cAAEa,OAAO,EAAE,MAAM;cAAEG,GAAG,EAAE,EAAE;cAAEL,SAAS,EAAE;YAAG,CAAE;YAAAR,QAAA,GACrDlE,MAAM,gBACL3F,OAAA;cACEyK,OAAO,EAAE/B,YAAa;cACtBoE,QAAQ,EAAE1G,UAAW,CAAuB;cAAA;cAC5CsD,KAAK,EAAE;gBACLqD,OAAO,EAAE3G,UAAU,GAAG,GAAG,GAAG,CAAC;gBAAa;gBAC1C/F,UAAU,EAAE,iDAAiD;gBAC7DsK,KAAK,EAAE,MAAM;gBACbC,UAAU,EAAE,GAAG;gBACfC,MAAM,EAAE,MAAM;gBACdvK,YAAY,EAAE,EAAE;gBAChBwK,OAAO,EAAE,WAAW;gBACpBE,MAAM,EAAE5E,UAAU,GAAG,aAAa,GAAG;cACvC,CAAE;cAAAyD,QAAA,EAEDzD,UAAU,GAAG,aAAa,GAAG;YAAQ;cAAA2D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChC,CAAC,gBAETlK,OAAA;cACEyK,OAAO,EAAEA,CAAA,KAAM;gBACb,IAAIuC,MAAM,CAACC,OAAO,CAAC,wFAAwF,CAAC,EAAE;kBAC5GxE,YAAY,CAAC,CAAC;gBAChB;cACF,CAAE;cACFqE,QAAQ,EAAE1G,UAAW;cACrBsD,KAAK,EAAE;gBACLqD,OAAO,EAAE3G,UAAU,GAAG,GAAG,GAAG,CAAC;gBAC7B/F,UAAU,EAAE,iDAAiD;gBAC7DsK,KAAK,EAAE,MAAM;gBACbC,UAAU,EAAE,GAAG;gBACfC,MAAM,EAAE,MAAM;gBACdvK,YAAY,EAAE,EAAE;gBAChBwK,OAAO,EAAE,WAAW;gBACpBE,MAAM,EAAE5E,UAAU,GAAG,aAAa,GAAG,SAAS;gBAC9CmE,OAAO,EAAE,aAAa;gBACtBC,UAAU,EAAE,QAAQ;gBACpBE,GAAG,EAAE;cACP,CAAE;cAAAb,QAAA,gBAEF7J,OAAA;gBACEkN,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,mBAAoB;gBAClDC,GAAG,EAAC,QAAQ;gBACZ5D,KAAK,EAAE;kBACLuB,KAAK,EAAE,EAAE;kBACTC,MAAM,EAAE,EAAE;kBACVG,WAAW,EAAE,CAAC;kBACdkC,aAAa,EAAE;gBACjB;cAAE;gBAAAxD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,EACD9D,UAAU,GAAG,cAAc,GAAG,QAAQ;YAAA;cAAA2D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjC,CACT,eACDlK,OAAA;cACEyK,OAAO,EAAE9G,eAAgB;cACzBmJ,QAAQ,EAAEnM,eAAgB;cAC1B+I,KAAK,EAAE;gBACLrJ,UAAU,EAAE,SAAS;gBACrBsK,KAAK,EAAE,SAAS;gBAChBC,UAAU,EAAE,GAAG;gBACfC,MAAM,EAAE,MAAM;gBACdvK,YAAY,EAAE,EAAE;gBAChBwK,OAAO,EAAE,WAAW;gBACpBE,MAAM,EAAErK,eAAe,GAAG,aAAa,GAAG,SAAS;gBACnDoM,OAAO,EAAEpM,eAAe,GAAG,GAAG,GAAG;cACnC,CAAE;cAAAkJ,QAAA,EAEDlJ,eAAe,GAAG,WAAW,GAAG;YAAY;cAAAoJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvC,CAAC,eACTlK,OAAA;cACEyK,OAAO,EAAEA,CAAA,KAAM;gBACb,IAAIuC,MAAM,CAACC,OAAO,CAAC,8CAA8C,CAAC,EAAE;kBAClEjI,QAAQ,CAAC,UAAU,CAAC;gBACtB;cACF,CAAE;cACF8H,QAAQ,EAAE1G,UAAW;cACrBsD,KAAK,EAAE;gBACLrJ,UAAU,EAAE,MAAM;gBAClBsK,KAAK,EAAE,SAAS;gBAChBC,UAAU,EAAE,GAAG;gBACfC,MAAM,EAAE,mBAAmB;gBAC3BvK,YAAY,EAAE,EAAE;gBAChBwK,OAAO,EAAE,WAAW;gBACpBE,MAAM,EAAE5E,UAAU,GAAG,aAAa,GAAG;cACvC,CAAE;cAAAyD,QAAA,EACH;YAED;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eAGNlK,OAAA;UACE0J,KAAK,EAAEvJ,GAAG,CAAC;YACT2K,OAAO,EAAE,EAAE;YACXnB,SAAS,EAAE,GAAG;YACdY,OAAO,EAAE,MAAM;YACfC,UAAU,EAAE,QAAQ;YACpBgC,cAAc,EAAE;UAClB,CAAC,CAAE;UAAA3C,QAAA,EAEF,CAAChE,OAAO,gBACP7F,OAAA;YACE0J,KAAK,EAAE;cACLuB,KAAK,EAAE,MAAM;cACbC,MAAM,EAAE,GAAG;cACX5K,YAAY,EAAE,EAAE;cAChBD,UAAU,EAAE,SAAS;cACrBkK,OAAO,EAAE,MAAM;cACfC,UAAU,EAAE,QAAQ;cACpBgC,cAAc,EAAE,QAAQ;cACxB7B,KAAK,EAAE;YACT,CAAE;YAAAd,QAAA,EACH;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,gBAENlK,OAAA;YAAK0J,KAAK,EAAE;cAAE8D,QAAQ,EAAE,UAAU;cAAEvC,KAAK,EAAE,MAAM;cAAEC,MAAM,EAAE;YAAO,CAAE;YAAArB,QAAA,gBAClE7J,OAAA;cACE4L,GAAG,EAAE/K,QAAS;cACdqM,GAAG,EAAErH,OAAQ;cACb4H,QAAQ;cACRC,IAAI;cACJC,QAAQ;cACRC,KAAK;cACLC,MAAM,EAAEA,CAAA,KAAM1M,iBAAiB,CAAC,IAAI,CAAE;cACtC2M,OAAO,EAAEA,CAAA,KAAM3M,iBAAiB,CAAC,KAAK,CAAE;cACxC4M,OAAO,EAAEA,CAAA,KAAM5M,iBAAiB,CAAC,KAAK,CAAE;cACxC6M,YAAY,EAAEA,CAAA,KAAM;gBAClB;gBACA,IAAInN,QAAQ,CAAC4C,OAAO,EAAE;kBACpBhC,gBAAgB,CAACZ,QAAQ,CAAC4C,OAAO,CAACwK,QAAQ,CAAC;kBAC3CpN,QAAQ,CAAC4C,OAAO,CAACyK,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;oBAClC;kBAAA,CACD,CAAC;gBACJ;cACF,CAAE;cACFC,YAAY,EAAEA,CAAA,KAAM;gBAClB,IAAIvN,QAAQ,CAAC4C,OAAO,EAAE;kBACpB9B,cAAc,CAACd,QAAQ,CAAC4C,OAAO,CAAC/B,WAAW,CAAC;gBAC9C;cACF,CAAE;cACFgI,KAAK,EAAE;gBACLuB,KAAK,EAAE,MAAM;gBACbC,MAAM,EAAE,MAAM;gBACdmD,SAAS,EAAE,GAAG;gBACdC,SAAS,EAAE,SAAS;gBACpBhO,YAAY,EAAE,EAAE;gBAChBD,UAAU,EAAE,MAAM;gBAClBkK,OAAO,EAAE;cACX;YAAE;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,EACDpJ,aAAa,iBACZd,OAAA,CAACF,eAAe;cACde,QAAQ,EAAEA,QAAS;cACnB0N,SAAS,EAAErN,cAAe;cAC1BsN,mBAAmB,EAAGC,iBAAiB,IAAK;gBAC1CxN,YAAY,CAACwN,iBAAiB,CAAC;gBAC/B;gBACA,IAAIA,iBAAiB,IAAI5N,QAAQ,CAAC4C,OAAO,EAAE;kBACzC,MAAMiL,SAAS,GAAG7N,QAAQ,CAAC4C,OAAO,CAAC/B,WAAW;kBAC9CH,eAAe,CAAC4B,IAAI,IAAI,CACtB,GAAGA,IAAI,CAACG,MAAM,CAACqL,EAAE,IAAIpM,IAAI,CAACqM,GAAG,CAACD,EAAE,CAACD,SAAS,GAAGA,SAAS,CAAC,GAAG,GAAG,CAAC;kBAAE;kBAChE;oBAAEA,SAAS;oBAAE1N,SAAS,EAAEyN;kBAAkB,CAAC,CAC5C,CAAC;gBACJ;cACF;YAAE;cAAA1E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CACF,eAGDlK,OAAA;cACEyK,OAAO,EAAEA,CAAA,KAAM;gBACb1J,gBAAgB,CAAC,CAACD,aAAa,CAAC;gBAChC,IAAI,CAACA,aAAa,EAAE;kBAClBO,sBAAsB,CAAC,IAAI,CAAC;kBAC5B;kBACA2F,UAAU,CAAC,MAAM3F,sBAAsB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC;gBACvD;cACF,CAAE;cACFqI,KAAK,EAAE;gBACL8D,QAAQ,EAAE,UAAU;gBACpBqB,GAAG,EAAE,EAAE;gBACPC,KAAK,EAAE,EAAE;gBACTzO,UAAU,EAAES,aAAa,GAAG,SAAS,GAAGM,mBAAmB,GAAG,SAAS,GAAG,SAAS;gBACnFuJ,KAAK,EAAE,OAAO;gBACdE,MAAM,EAAE,MAAM;gBACdvK,YAAY,EAAE,CAAC;gBACfwK,OAAO,EAAE,UAAU;gBACnBC,QAAQ,EAAE,MAAM;gBAChBC,MAAM,EAAE,SAAS;gBACjB+D,MAAM,EAAE;cACV,CAAE;cAAAlF,QAAA,EAEDzI,mBAAmB,GAAG,eAAe,GAAGN,aAAa,GAAG,gBAAgB,GAAG;YAAgB;cAAAiJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtF,CAAC,EAGRpJ,aAAa,IAAIE,SAAS,iBACzBhB,OAAA;cACE0J,KAAK,EAAE;gBACL8D,QAAQ,EAAE,UAAU;gBACpBqB,GAAG,EAAE,EAAE;gBACPC,KAAK,EAAE,EAAE;gBACTzO,UAAU,EAAE,iBAAiB;gBAC7BsK,KAAK,EAAE,OAAO;gBACdG,OAAO,EAAE,SAAS;gBAClBxK,YAAY,EAAE,CAAC;gBACfyK,QAAQ,EAAE,MAAM;gBAChBgE,MAAM,EAAE;cACV,CAAE;cAAAlF,QAAA,GAED7I,SAAS,CAACgO,MAAM,EAAC,qBACpB;YAAA;cAAAjF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CACN,eAGDlK,OAAA;cACE0J,KAAK,EAAE;gBACL8D,QAAQ,EAAE,UAAU;gBACpByB,MAAM,EAAE,EAAE;gBACVC,IAAI,EAAE,EAAE;gBACR7O,UAAU,EAAE,iBAAiB;gBAC7BsK,KAAK,EAAE,OAAO;gBACdG,OAAO,EAAE,SAAS;gBAClBxK,YAAY,EAAE,CAAC;gBACfyK,QAAQ,EAAE,MAAM;gBAChBgE,MAAM,EAAE;cACV,CAAE;cAAAlF,QAAA,GAEDzH,UAAU,CAACV,WAAW,CAAC,EAAC,KAAG,EAACU,UAAU,CAACZ,aAAa,CAAC;YAAA;cAAAuI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QACN;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAGLrE,OAAO,iBACN7F,OAAA;QAAK0J,KAAK,EAAE;UAAEW,SAAS,EAAE;QAAG,CAAE;QAAAR,QAAA,eAC5B7J,OAAA;UAAK0J,KAAK,EAAEvJ,GAAG,CAAC;YAAE2K,OAAO,EAAE;UAAG,CAAC,CAAE;UAAAjB,QAAA,gBAC/B7J,OAAA;YAAK0J,KAAK,EAAE;cAAEqB,QAAQ,EAAE,EAAE;cAAEH,UAAU,EAAE,GAAG;cAAED,KAAK,EAAE,SAAS;cAAEL,YAAY,EAAE;YAAG,CAAE;YAAAT,QAAA,EAAC;UAGnF;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAGNlK,OAAA;YAAK0J,KAAK,EAAE;cACVrJ,UAAU,EAAE,mDAAmD;cAC/DyK,OAAO,EAAE,EAAE;cACXxK,YAAY,EAAE,EAAE;cAChBgK,YAAY,EAAE,EAAE;cAChBO,MAAM,EAAE;YACV,CAAE;YAAAhB,QAAA,gBACA7J,OAAA;cAAK0J,KAAK,EAAE;gBAAEY,YAAY,EAAE;cAAG,CAAE;cAAAT,QAAA,gBAC/B7J,OAAA;gBAAO0J,KAAK,EAAE;kBAAEa,OAAO,EAAE,OAAO;kBAAEK,UAAU,EAAE,GAAG;kBAAEN,YAAY,EAAE,CAAC;kBAAEK,KAAK,EAAE;gBAAU,CAAE;gBAAAd,QAAA,EAAC;cAGxF;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACRlK,OAAA;gBACE0M,KAAK,EAAE5K,UAAU,CAACE,IAAK;gBACvB+J,QAAQ,EAAG9G,CAAC,IAAKlD,aAAa,CAACoB,IAAI,KAAK;kBAAE,GAAGA,IAAI;kBAAEnB,IAAI,EAAEiD,CAAC,CAAC2B,MAAM,CAAC8F;gBAAM,CAAC,CAAC,CAAE;gBAC5EC,WAAW,EAAC,wCAAwC;gBACpDjD,KAAK,EAAE;kBACLuB,KAAK,EAAE,OAAO;kBACdH,OAAO,EAAE,WAAW;kBACpBxK,YAAY,EAAE,CAAC;kBACfuK,MAAM,EAAE,mBAAmB;kBAC3B+B,OAAO,EAAE,MAAM;kBACf7B,QAAQ,EAAE,EAAE;kBACZH,UAAU,EAAE;gBACd;cAAE;gBAAAb,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC,eAENlK,OAAA;cAAK0J,KAAK,EAAE;gBAAEa,OAAO,EAAE,MAAM;gBAAEG,GAAG,EAAE,EAAE;gBAAEF,UAAU,EAAE,KAAK;gBAAEF,YAAY,EAAE;cAAG,CAAE;cAAAT,QAAA,gBAC5E7J,OAAA;gBAAA6J,QAAA,gBACE7J,OAAA;kBAAO0J,KAAK,EAAE;oBAAEa,OAAO,EAAE,OAAO;oBAAEK,UAAU,EAAE,GAAG;oBAAEN,YAAY,EAAE,CAAC;oBAAES,QAAQ,EAAE,EAAE;oBAAEJ,KAAK,EAAE;kBAAU,CAAE;kBAAAd,QAAA,EAAC;gBAGtG;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACRlK,OAAA;kBAAK0J,KAAK,EAAE;oBAAEa,OAAO,EAAE,MAAM;oBAAEC,UAAU,EAAE,QAAQ;oBAAEE,GAAG,EAAE;kBAAE,CAAE;kBAAAb,QAAA,gBAC5D7J,OAAA;oBACE6L,IAAI,EAAC,QAAQ;oBACbgB,GAAG,EAAC,GAAG;oBACPsC,GAAG,EAAE5M,IAAI,CAACC,KAAK,CAAChB,aAAa,CAAE;oBAC/BkL,KAAK,EAAEnK,IAAI,CAACC,KAAK,CAACV,UAAU,CAACG,SAAS,CAAE;oBACxC8J,QAAQ,EAAG9G,CAAC,IAAKlD,aAAa,CAACoB,IAAI,KAAK;sBACtC,GAAGA,IAAI;sBACPlB,SAAS,EAAEmN,QAAQ,CAACnK,CAAC,CAAC2B,MAAM,CAAC8F,KAAK,CAAC,IAAI;oBACzC,CAAC,CAAC,CAAE;oBACJhD,KAAK,EAAE;sBACLuB,KAAK,EAAE,MAAM;sBACbH,OAAO,EAAE,UAAU;sBACnBxK,YAAY,EAAE,CAAC;sBACfuK,MAAM,EAAE,qBAAqB;sBAC7B+B,OAAO,EAAE,MAAM;sBACf7B,QAAQ,EAAE,EAAE;sBACZH,UAAU,EAAE;oBACd;kBAAE;oBAAAb,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACH,CAAC,eACFlK,OAAA;oBAAM0J,KAAK,EAAE;sBAAEqB,QAAQ,EAAE,EAAE;sBAAEJ,KAAK,EAAE,SAAS;sBAAEC,UAAU,EAAE;oBAAI,CAAE;oBAAAf,QAAA,EAAC;kBAAG;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC5ElK,OAAA;oBACEyK,OAAO,EAAEjH,kBAAmB;oBAC5BkG,KAAK,EAAE;sBACLrJ,UAAU,EAAEyB,UAAU,CAACK,WAAW,GAC9B,kDAAkD,GAClD,sDAAsD;sBAC1DwI,KAAK,EAAE,OAAO;sBACdE,MAAM,EAAE,MAAM;sBACdvK,YAAY,EAAE,CAAC;sBACfwK,OAAO,EAAE,UAAU;sBACnBC,QAAQ,EAAE,EAAE;sBACZC,MAAM,EAAE,SAAS;sBACjBJ,UAAU,EAAE,GAAG;sBACfrK,SAAS,EAAE;oBACb,CAAE;oBAAAsJ,QAAA,EAED/H,UAAU,CAACK,WAAW,gBACrBnC,OAAA,CAAAE,SAAA;sBAAA2J,QAAA,EAAE;oBAGF,gBAAE,CAAC,gBAEH7J,OAAA,CAAAE,SAAA;sBAAA2J,QAAA,EAAE;oBAGF,gBAAE;kBACH;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACK,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eAENlK,OAAA;gBAAA6J,QAAA,gBACE7J,OAAA;kBAAO0J,KAAK,EAAE;oBAAEa,OAAO,EAAE,OAAO;oBAAEK,UAAU,EAAE,GAAG;oBAAEN,YAAY,EAAE,CAAC;oBAAES,QAAQ,EAAE,EAAE;oBAAEJ,KAAK,EAAE;kBAAU,CAAE;kBAAAd,QAAA,EAAC;gBAGtG;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACRlK,OAAA;kBAAK0J,KAAK,EAAE;oBAAEa,OAAO,EAAE,MAAM;oBAAEC,UAAU,EAAE,QAAQ;oBAAEE,GAAG,EAAE;kBAAE,CAAE;kBAAAb,QAAA,gBAC5D7J,OAAA;oBACE6L,IAAI,EAAC,QAAQ;oBACbgB,GAAG,EAAC,GAAG;oBACPsC,GAAG,EAAE5M,IAAI,CAACC,KAAK,CAAChB,aAAa,CAAE;oBAC/BkL,KAAK,EAAEnK,IAAI,CAACC,KAAK,CAACV,UAAU,CAACI,OAAO,CAAE;oBACtC6J,QAAQ,EAAG9G,CAAC,IAAKlD,aAAa,CAACoB,IAAI,KAAK;sBACtC,GAAGA,IAAI;sBACPjB,OAAO,EAAEkN,QAAQ,CAACnK,CAAC,CAAC2B,MAAM,CAAC8F,KAAK,CAAC,IAAI;oBACvC,CAAC,CAAC,CAAE;oBACJhD,KAAK,EAAE;sBACLuB,KAAK,EAAE,MAAM;sBACbH,OAAO,EAAE,UAAU;sBACnBxK,YAAY,EAAE,CAAC;sBACfuK,MAAM,EAAE,qBAAqB;sBAC7B+B,OAAO,EAAE,MAAM;sBACf7B,QAAQ,EAAE,EAAE;sBACZH,UAAU,EAAE;oBACd;kBAAE;oBAAAb,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACH,CAAC,eACFlK,OAAA;oBAAM0J,KAAK,EAAE;sBAAEqB,QAAQ,EAAE,EAAE;sBAAEJ,KAAK,EAAE,SAAS;sBAAEC,UAAU,EAAE;oBAAI,CAAE;oBAAAf,QAAA,EAAC;kBAAG;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC5ElK,OAAA;oBACEyK,OAAO,EAAE/G,gBAAiB;oBAC1BgG,KAAK,EAAE;sBACLrJ,UAAU,EAAE,oDAAoD;sBAChEsK,KAAK,EAAE,OAAO;sBACdE,MAAM,EAAE,MAAM;sBACdvK,YAAY,EAAE,CAAC;sBACfwK,OAAO,EAAE,UAAU;sBACnBC,QAAQ,EAAE,EAAE;sBACZC,MAAM,EAAE,SAAS;sBACjBJ,UAAU,EAAE,GAAG;sBACfrK,SAAS,EAAE;oBACb,CAAE;oBAAAsJ,QAAA,EACH;kBAGD;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAENlK,OAAA;cAAK0J,KAAK,EAAE;gBAAEa,OAAO,EAAE,MAAM;gBAAEG,GAAG,EAAE,EAAE;gBAAEF,UAAU,EAAE;cAAS,CAAE;cAAAX,QAAA,gBAC7D7J,OAAA;gBACEyK,OAAO,EAAE7H,kBAAmB;gBAC5BkK,QAAQ,EAAE,CAAChL,UAAU,CAACE,IAAI,CAACa,IAAI,CAAC,CAAC,IAAIf,UAAU,CAACG,SAAS,IAAIH,UAAU,CAACI,OAAQ;gBAChFwH,KAAK,EAAE;kBACLrJ,UAAU,EAAE,CAACyB,UAAU,CAACE,IAAI,CAACa,IAAI,CAAC,CAAC,IAAIf,UAAU,CAACG,SAAS,IAAIH,UAAU,CAACI,OAAO,GAC7E,WAAW,GACX,iDAAiD;kBACrDyI,KAAK,EAAE,OAAO;kBACdE,MAAM,EAAE,MAAM;kBACdvK,YAAY,EAAE,CAAC;kBACfwK,OAAO,EAAE,WAAW;kBACpBC,QAAQ,EAAE,EAAE;kBACZH,UAAU,EAAE,GAAG;kBACfI,MAAM,EAAE,CAAClJ,UAAU,CAACE,IAAI,CAACa,IAAI,CAAC,CAAC,IAAIf,UAAU,CAACG,SAAS,IAAIH,UAAU,CAACI,OAAO,GACzE,aAAa,GACb,SAAS;kBACb3B,SAAS,EAAE;gBACb,CAAE;gBAAAsJ,QAAA,gBAEF7J,OAAA;kBACEkN,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,WAAY;kBAC1CC,GAAG,EAAC,KAAK;kBACT5D,KAAK,EAAE;oBAAEuB,KAAK,EAAE,EAAE;oBAAEC,MAAM,EAAE,EAAE;oBAAEG,WAAW,EAAE,CAAC;oBAAEkC,aAAa,EAAE;kBAAS;gBAAE;kBAAAxD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3E,CAAC,eAEJ;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,EAERpI,UAAU,CAACE,IAAI,IAAIF,UAAU,CAACG,SAAS,GAAGH,UAAU,CAACI,OAAO,iBAC3DlC,OAAA;gBAAK0J,KAAK,EAAE;kBACVqB,QAAQ,EAAE,EAAE;kBACZJ,KAAK,EAAE,SAAS;kBAChBJ,OAAO,EAAE,MAAM;kBACfC,UAAU,EAAE,QAAQ;kBACpBnK,UAAU,EAAE,yBAAyB;kBACrCyK,OAAO,EAAE,UAAU;kBACnBxK,YAAY,EAAE,CAAC;kBACfsK,UAAU,EAAE;gBACd,CAAE;gBAAAf,QAAA,GAAC,WAEQ,eAAA7J,OAAA;kBAAA6J,QAAA,EAAS/H,UAAU,CAACE;gBAAI;kBAAA+H,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAS,CAAC,MAAE,EAAC9H,UAAU,CAACN,UAAU,CAACG,SAAS,CAAC,EAAC,KAAG,EAACG,UAAU,CAACN,UAAU,CAACI,OAAO,CAAC,EAAC,GACpH;cAAA;gBAAA6H,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CACN;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EAGLtI,gBAAgB,CAACoN,MAAM,GAAG,CAAC,iBAC1BhP,OAAA;YAAA6J,QAAA,gBACE7J,OAAA;cAAK0J,KAAK,EAAE;gBACVkB,UAAU,EAAE,GAAG;gBACfN,YAAY,EAAE,EAAE;gBAChBK,KAAK,EAAE,SAAS;gBAChBJ,OAAO,EAAE,MAAM;gBACfC,UAAU,EAAE,QAAQ;gBACpBE,GAAG,EAAE;cACP,CAAE;cAAAb,QAAA,GAAC,oBAEiB,EAACjI,gBAAgB,CAACoN,MAAM,EAAC,GAC7C;YAAA;cAAAjF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACNlK,OAAA;cAAK0J,KAAK,EAAE;gBAAEa,OAAO,EAAE,MAAM;gBAAEG,GAAG,EAAE;cAAE,CAAE;cAAAb,QAAA,EACrCjI,gBAAgB,CAACwK,GAAG,CAAC,CAACrJ,OAAO,EAAEsM,KAAK,kBACnCrP,OAAA;gBAEE0J,KAAK,EAAE;kBACLa,OAAO,EAAE,MAAM;kBACfiC,cAAc,EAAE,eAAe;kBAC/BhC,UAAU,EAAE,QAAQ;kBACpBnK,UAAU,EAAE,mDAAmD;kBAC/DwK,MAAM,EAAE,mBAAmB;kBAC3BvK,YAAY,EAAE,EAAE;kBAChBwK,OAAO,EAAE,WAAW;kBACpBvK,SAAS,EAAE;gBACb,CAAE;gBAAAsJ,QAAA,gBAEF7J,OAAA;kBAAA6J,QAAA,gBACE7J,OAAA;oBAAK0J,KAAK,EAAE;sBACVkB,UAAU,EAAE,GAAG;sBACfD,KAAK,EAAE,SAAS;sBAChBJ,OAAO,EAAE,MAAM;sBACfC,UAAU,EAAE,QAAQ;sBACpBE,GAAG,EAAE,CAAC;sBACNJ,YAAY,EAAE;oBAChB,CAAE;oBAAAT,QAAA,gBACA7J,OAAA;sBAAM0J,KAAK,EAAE;wBACXrJ,UAAU,EAAE,kDAAkD;wBAC9DsK,KAAK,EAAE,OAAO;wBACdrK,YAAY,EAAE,KAAK;wBACnB2K,KAAK,EAAE,EAAE;wBACTC,MAAM,EAAE,EAAE;wBACVX,OAAO,EAAE,MAAM;wBACfC,UAAU,EAAE,QAAQ;wBACpBgC,cAAc,EAAE,QAAQ;wBACxBzB,QAAQ,EAAE,EAAE;wBACZH,UAAU,EAAE;sBACd,CAAE;sBAAAf,QAAA,EACCwF,KAAK,GAAG;oBAAC;sBAAAtF,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACN,CAAC,EACNnH,OAAO,CAACf,IAAI;kBAAA;oBAAA+H,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACV,CAAC,eACNlK,OAAA;oBAAK0J,KAAK,EAAE;sBAAEqB,QAAQ,EAAE,EAAE;sBAAEJ,KAAK,EAAE,SAAS;sBAAE2E,UAAU,EAAE;oBAAG,CAAE;oBAAAzF,QAAA,gBAC7D7J,OAAA;sBACEkN,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,kBAAmB;sBACjDC,GAAG,EAAC,OAAO;sBACX5D,KAAK,EAAE;wBAAEuB,KAAK,EAAE,EAAE;wBAAEC,MAAM,EAAE,EAAE;wBAAEG,WAAW,EAAE,CAAC;wBAAEkC,aAAa,EAAE;sBAAS;oBAAE;sBAAAxD,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAC3E,CAAC,EACD9H,UAAU,CAACW,OAAO,CAACd,SAAS,CAAC,EAAC,KAAG,EAACG,UAAU,CAACW,OAAO,CAACb,OAAO,CAAC,eAC9DlC,OAAA;sBAAM0J,KAAK,EAAE;wBACX4F,UAAU,EAAE,CAAC;wBACbjP,UAAU,EAAE,yBAAyB;wBACrCsK,KAAK,EAAE,SAAS;wBAChBG,OAAO,EAAE,SAAS;wBAClBxK,YAAY,EAAE,CAAC;wBACfyK,QAAQ,EAAE,EAAE;wBACZH,UAAU,EAAE;sBACd,CAAE;sBAAAf,QAAA,GACCtH,IAAI,CAACC,KAAK,CAACO,OAAO,CAACb,OAAO,GAAGa,OAAO,CAACd,SAAS,CAAC,EAAC,YACnD;oBAAA;sBAAA8H,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACNlK,OAAA;kBACEyK,OAAO,EAAEA,CAAA,KAAMrH,aAAa,CAACL,OAAO,CAACC,EAAE,CAAE;kBACzC0G,KAAK,EAAE;oBACLrJ,UAAU,EAAE,kDAAkD;oBAC9DsK,KAAK,EAAE,OAAO;oBACdE,MAAM,EAAE,MAAM;oBACdvK,YAAY,EAAE,CAAC;oBACfwK,OAAO,EAAE,UAAU;oBACnBC,QAAQ,EAAE,EAAE;oBACZC,MAAM,EAAE,SAAS;oBACjBJ,UAAU,EAAE,GAAG;oBACfrK,SAAS,EAAE;kBACb,CAAE;kBAAAsJ,QAAA,gBAEF7J,OAAA;oBACEkN,GAAG,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,cAAe;oBAC7CC,GAAG,EAAC,QAAQ;oBACZ5D,KAAK,EAAE;sBAAEuB,KAAK,EAAE,EAAE;sBAAEC,MAAM,EAAE,EAAE;sBAAEG,WAAW,EAAE,CAAC;sBAAEkC,aAAa,EAAE;oBAAS;kBAAE;oBAAAxD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC3E,CAAC,UAEJ;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA,GA7EJnH,OAAO,CAACC,EAAE;gBAAA+G,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OA8EZ,CACN;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACzJ,EAAA,CArmCuBD,WAAW;EAAA,QA6HhBb,WAAW,EACXC,WAAW;AAAA;AAAA2P,EAAA,GA9HN/O,WAAW;AAAA,IAAA+O,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}