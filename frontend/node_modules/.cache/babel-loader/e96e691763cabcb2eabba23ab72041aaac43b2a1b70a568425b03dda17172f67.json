{"ast":null,"code":"// KeypointsProcessor.js - Service à¸ªà¸³à¸«à¸£à¸±à¸šà¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥ keypoints à¸«à¸¥à¸±à¸‡ upload video\n\nclass KeypointsProcessor {\n  constructor(baseURL = 'http://localhost:8000') {\n    this.baseURL = baseURL;\n  }\n\n  // à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸à¸²à¸£à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥ keypoints à¸ªà¸³à¸«à¸£à¸±à¸šà¸§à¸´à¸”à¸µà¹‚à¸­à¸—à¸µà¹ˆ upload à¹ƒà¸«à¸¡à¹ˆ - DISABLED\n  async processVideoKeypoints(videoId, onProgress = null) {\n    try {\n      console.log(`ðŸš€ Keypoints processing disabled for video ${videoId}`);\n\n      // Mock successful response without actually processing keypoints\n      if (onProgress) {\n        onProgress({\n          current: 1,\n          total: 1,\n          status: 'Keypoints processing disabled',\n          completed: true\n        });\n      }\n      return {\n        processedSuccessfully: 0,\n        totalSegments: 0,\n        results: [],\n        message: 'Keypoints processing has been disabled'\n      };\n    } catch (error) {\n      console.error('âŒ Error processing video keypoints:', error);\n      throw error;\n    }\n  }\n\n  // à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ segments à¸‚à¸­à¸‡à¸§à¸´à¸”à¸µà¹‚à¸­\n  async getVideoSegments(videoId) {\n    const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments`);\n    if (!response.ok) {\n      throw new Error(`Failed to get video segments: ${response.status}`);\n    }\n    return await response.json();\n  }\n\n  // Extract keypoints à¸ªà¸³à¸«à¸£à¸±à¸š segment à¹€à¸‰à¸žà¸²à¸°\n  async extractSegmentKeypoints(videoId, segmentId) {\n    const response = await fetch(`${this.baseURL}/keypoints/extract-segment`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        video_id: videoId,\n        segment_id: segmentId\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.detail || `HTTP ${response.status}`);\n    }\n    return await response.json();\n  }\n\n  // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸° keypoints à¸‚à¸­à¸‡à¸§à¸´à¸”à¸µà¹‚à¸­\n  async checkKeypointsStatus(videoId) {\n    try {\n      const segments = await this.getVideoSegments(videoId);\n      const status = {\n        totalSegments: segments.segments.length,\n        withKeypoints: segments.segments.filter(s => s.has_keypoints).length,\n        withoutKeypoints: segments.segments.filter(s => !s.has_keypoints).length,\n        segments: segments.segments.map(s => ({\n          segmentId: s.segment_id,\n          exerciseId: s.exercise_id,\n          startTime: s.start_time,\n          endTime: s.end_time,\n          hasKeypoints: s.has_keypoints,\n          keypointsFile: s.keypoints_file\n        }))\n      };\n      return status;\n    } catch (error) {\n      console.error('Error checking keypoints status:', error);\n      throw error;\n    }\n  }\n\n  // à¸¥à¸š keypoints à¸‚à¸­à¸‡ segment\n  async deleteSegmentKeypoints(videoId, segmentId) {\n    const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/keypoints`, {\n      method: 'DELETE'\n    });\n    if (!response.ok) {\n      throw new Error(`Failed to delete keypoints: ${response.status}`);\n    }\n    return await response.json();\n  }\n}\nexport default KeypointsProcessor;","map":{"version":3,"names":["KeypointsProcessor","constructor","baseURL","processVideoKeypoints","videoId","onProgress","console","log","current","total","status","completed","processedSuccessfully","totalSegments","results","message","error","getVideoSegments","response","fetch","ok","Error","json","extractSegmentKeypoints","segmentId","method","headers","body","JSON","stringify","video_id","segment_id","errorData","catch","detail","checkKeypointsStatus","segments","length","withKeypoints","filter","s","has_keypoints","withoutKeypoints","map","exerciseId","exercise_id","startTime","start_time","endTime","end_time","hasKeypoints","keypointsFile","keypoints_file","deleteSegmentKeypoints"],"sources":["C:/Fit/frontend/src/services/KeypointsProcessor.js"],"sourcesContent":["// KeypointsProcessor.js - Service à¸ªà¸³à¸«à¸£à¸±à¸šà¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥ keypoints à¸«à¸¥à¸±à¸‡ upload video\r\n\r\nclass KeypointsProcessor {\r\n    constructor(baseURL = 'http://localhost:8000') {\r\n        this.baseURL = baseURL;\r\n    }\r\n\r\n    // à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸à¸²à¸£à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥ keypoints à¸ªà¸³à¸«à¸£à¸±à¸šà¸§à¸´à¸”à¸µà¹‚à¸­à¸—à¸µà¹ˆ upload à¹ƒà¸«à¸¡à¹ˆ - DISABLED\r\n    async processVideoKeypoints(videoId, onProgress = null) {\r\n        try {\r\n            console.log(`ðŸš€ Keypoints processing disabled for video ${videoId}`);\r\n            \r\n            // Mock successful response without actually processing keypoints\r\n            if (onProgress) {\r\n                onProgress({\r\n                    current: 1,\r\n                    total: 1,\r\n                    status: 'Keypoints processing disabled',\r\n                    completed: true\r\n                });\r\n            }\r\n\r\n            return {\r\n                processedSuccessfully: 0,\r\n                totalSegments: 0,\r\n                results: [],\r\n                message: 'Keypoints processing has been disabled'\r\n            };\r\n\r\n        } catch (error) {\r\n            console.error('âŒ Error processing video keypoints:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ segments à¸‚à¸­à¸‡à¸§à¸´à¸”à¸µà¹‚à¸­\r\n    async getVideoSegments(videoId) {\r\n        const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments`);\r\n        \r\n        if (!response.ok) {\r\n            throw new Error(`Failed to get video segments: ${response.status}`);\r\n        }\r\n        \r\n        return await response.json();\r\n    }\r\n\r\n    // Extract keypoints à¸ªà¸³à¸«à¸£à¸±à¸š segment à¹€à¸‰à¸žà¸²à¸°\r\n    async extractSegmentKeypoints(videoId, segmentId) {\r\n        const response = await fetch(`${this.baseURL}/keypoints/extract-segment`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                video_id: videoId,\r\n                segment_id: segmentId\r\n            })\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => ({}));\r\n            throw new Error(errorData.detail || `HTTP ${response.status}`);\r\n        }\r\n\r\n        return await response.json();\r\n    }\r\n\r\n    // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸° keypoints à¸‚à¸­à¸‡à¸§à¸´à¸”à¸µà¹‚à¸­\r\n    async checkKeypointsStatus(videoId) {\r\n        try {\r\n            const segments = await this.getVideoSegments(videoId);\r\n            \r\n            const status = {\r\n                totalSegments: segments.segments.length,\r\n                withKeypoints: segments.segments.filter(s => s.has_keypoints).length,\r\n                withoutKeypoints: segments.segments.filter(s => !s.has_keypoints).length,\r\n                segments: segments.segments.map(s => ({\r\n                    segmentId: s.segment_id,\r\n                    exerciseId: s.exercise_id,\r\n                    startTime: s.start_time,\r\n                    endTime: s.end_time,\r\n                    hasKeypoints: s.has_keypoints,\r\n                    keypointsFile: s.keypoints_file\r\n                }))\r\n            };\r\n\r\n            return status;\r\n\r\n        } catch (error) {\r\n            console.error('Error checking keypoints status:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    // à¸¥à¸š keypoints à¸‚à¸­à¸‡ segment\r\n    async deleteSegmentKeypoints(videoId, segmentId) {\r\n        const response = await fetch(`${this.baseURL}/keypoints/videos/${videoId}/segments/${segmentId}/keypoints`, {\r\n            method: 'DELETE'\r\n        });\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`Failed to delete keypoints: ${response.status}`);\r\n        }\r\n\r\n        return await response.json();\r\n    }\r\n}\r\n\r\nexport default KeypointsProcessor;"],"mappings":"AAAA;;AAEA,MAAMA,kBAAkB,CAAC;EACrBC,WAAWA,CAACC,OAAO,GAAG,uBAAuB,EAAE;IAC3C,IAAI,CAACA,OAAO,GAAGA,OAAO;EAC1B;;EAEA;EACA,MAAMC,qBAAqBA,CAACC,OAAO,EAAEC,UAAU,GAAG,IAAI,EAAE;IACpD,IAAI;MACAC,OAAO,CAACC,GAAG,CAAC,8CAA8CH,OAAO,EAAE,CAAC;;MAEpE;MACA,IAAIC,UAAU,EAAE;QACZA,UAAU,CAAC;UACPG,OAAO,EAAE,CAAC;UACVC,KAAK,EAAE,CAAC;UACRC,MAAM,EAAE,+BAA+B;UACvCC,SAAS,EAAE;QACf,CAAC,CAAC;MACN;MAEA,OAAO;QACHC,qBAAqB,EAAE,CAAC;QACxBC,aAAa,EAAE,CAAC;QAChBC,OAAO,EAAE,EAAE;QACXC,OAAO,EAAE;MACb,CAAC;IAEL,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZV,OAAO,CAACU,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC3D,MAAMA,KAAK;IACf;EACJ;;EAEA;EACA,MAAMC,gBAAgBA,CAACb,OAAO,EAAE;IAC5B,MAAMc,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAG,IAAI,CAACjB,OAAO,qBAAqBE,OAAO,WAAW,CAAC;IAEpF,IAAI,CAACc,QAAQ,CAACE,EAAE,EAAE;MACd,MAAM,IAAIC,KAAK,CAAC,iCAAiCH,QAAQ,CAACR,MAAM,EAAE,CAAC;IACvE;IAEA,OAAO,MAAMQ,QAAQ,CAACI,IAAI,CAAC,CAAC;EAChC;;EAEA;EACA,MAAMC,uBAAuBA,CAACnB,OAAO,EAAEoB,SAAS,EAAE;IAC9C,MAAMN,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAG,IAAI,CAACjB,OAAO,4BAA4B,EAAE;MACtEuB,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACjBC,QAAQ,EAAE1B,OAAO;QACjB2B,UAAU,EAAEP;MAChB,CAAC;IACL,CAAC,CAAC;IAEF,IAAI,CAACN,QAAQ,CAACE,EAAE,EAAE;MACd,MAAMY,SAAS,GAAG,MAAMd,QAAQ,CAACI,IAAI,CAAC,CAAC,CAACW,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;MACzD,MAAM,IAAIZ,KAAK,CAACW,SAAS,CAACE,MAAM,IAAI,QAAQhB,QAAQ,CAACR,MAAM,EAAE,CAAC;IAClE;IAEA,OAAO,MAAMQ,QAAQ,CAACI,IAAI,CAAC,CAAC;EAChC;;EAEA;EACA,MAAMa,oBAAoBA,CAAC/B,OAAO,EAAE;IAChC,IAAI;MACA,MAAMgC,QAAQ,GAAG,MAAM,IAAI,CAACnB,gBAAgB,CAACb,OAAO,CAAC;MAErD,MAAMM,MAAM,GAAG;QACXG,aAAa,EAAEuB,QAAQ,CAACA,QAAQ,CAACC,MAAM;QACvCC,aAAa,EAAEF,QAAQ,CAACA,QAAQ,CAACG,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,aAAa,CAAC,CAACJ,MAAM;QACpEK,gBAAgB,EAAEN,QAAQ,CAACA,QAAQ,CAACG,MAAM,CAACC,CAAC,IAAI,CAACA,CAAC,CAACC,aAAa,CAAC,CAACJ,MAAM;QACxED,QAAQ,EAAEA,QAAQ,CAACA,QAAQ,CAACO,GAAG,CAACH,CAAC,KAAK;UAClChB,SAAS,EAAEgB,CAAC,CAACT,UAAU;UACvBa,UAAU,EAAEJ,CAAC,CAACK,WAAW;UACzBC,SAAS,EAAEN,CAAC,CAACO,UAAU;UACvBC,OAAO,EAAER,CAAC,CAACS,QAAQ;UACnBC,YAAY,EAAEV,CAAC,CAACC,aAAa;UAC7BU,aAAa,EAAEX,CAAC,CAACY;QACrB,CAAC,CAAC;MACN,CAAC;MAED,OAAO1C,MAAM;IAEjB,CAAC,CAAC,OAAOM,KAAK,EAAE;MACZV,OAAO,CAACU,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MACxD,MAAMA,KAAK;IACf;EACJ;;EAEA;EACA,MAAMqC,sBAAsBA,CAACjD,OAAO,EAAEoB,SAAS,EAAE;IAC7C,MAAMN,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAG,IAAI,CAACjB,OAAO,qBAAqBE,OAAO,aAAaoB,SAAS,YAAY,EAAE;MACxGC,MAAM,EAAE;IACZ,CAAC,CAAC;IAEF,IAAI,CAACP,QAAQ,CAACE,EAAE,EAAE;MACd,MAAM,IAAIC,KAAK,CAAC,+BAA+BH,QAAQ,CAACR,MAAM,EAAE,CAAC;IACrE;IAEA,OAAO,MAAMQ,QAAQ,CAACI,IAAI,CAAC,CAAC;EAChC;AACJ;AAEA,eAAetB,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}